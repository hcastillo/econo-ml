# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50


    ALGORITHM = interbank_lenderchange.ShockedMarket3
    P = 0.5

    SEED = 39393

    CONFIG = 'C_i0=30 D_i0=135 E_i0=15 L_i0=120 alfa=0.1 allow_replacement_of_bankrupted=True beta=5 chi=0.0015 mu=0.7 normalize_interest_rate_max=1 omega=0.55 phi=0.25 psi=0.0 r_i0=0.02 reintroduce_with_median=False reserves=0.02 rho=0.3 xi=0.9 '

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":26.9521811794,"1":37.6169525655,"2":93.2967093721,"3":67.7558103683,"4":55.2686783059,"5":110.6335772194,"6":48.6433948067,"7":41.6373045949,"8":44.9633177484,"9":26.4921586082,"10":53.485131937,"11":95.3433081497,"12":173.4493157657,"13":28.5217631434,"14":145.9356571708,"15":68.550060216,"16":67.6549387003,"17":86.4892623892,"18":90.8346499243,"19":56.056014268,"20":47.7971412408,"21":41.0733796503,"22":85.0159972248,"23":23.0285719104,"24":28.3838425508,"25":26.5093253242,"26":48.850328031,"27":119.6411499635,"28":30.5921399108,"29":44.8508903736,"30":42.6041382995,"31":116.2435972354,"32":23.0491795551,"33":58.2699554176,"34":69.189082783,"35":56.6641365986,"36":44.3451253495,"37":44.8168184585,"38":38.2933669257,"39":64.7711970218,"40":81.9693449714,"41":86.8995113343,"42":98.7758906596,"43":118.8820503081,"44":32.6225721214,"45":42.6768472142,"46":65.3253471085,"47":32.5546183532,"48":85.6035633962,"49":56.9948195213},"active_borrowers":{"0":3,"1":5,"2":9,"3":11,"4":10,"5":7,"6":6,"7":7,"8":7,"9":2,"10":5,"11":12,"12":16,"13":8,"14":10,"15":9,"16":8,"17":11,"18":11,"19":10,"20":5,"21":4,"22":8,"23":5,"24":5,"25":5,"26":4,"27":11,"28":5,"29":8,"30":5,"31":12,"32":3,"33":8,"34":7,"35":9,"36":6,"37":11,"38":6,"39":7,"40":9,"41":7,"42":11,"43":10,"44":6,"45":6,"46":4,"47":3,"48":11,"49":6},"active_lenders":{"0":3,"1":5,"2":6,"3":8,"4":9,"5":5,"6":6,"7":6,"8":5,"9":2,"10":5,"11":9,"12":12,"13":6,"14":10,"15":8,"16":6,"17":9,"18":9,"19":9,"20":5,"21":4,"22":7,"23":4,"24":5,"25":5,"26":3,"27":10,"28":5,"29":7,"30":4,"31":10,"32":2,"33":7,"34":7,"35":9,"36":5,"37":11,"38":6,"39":7,"40":6,"41":6,"42":9,"43":8,"44":6,"45":5,"46":4,"47":3,"48":10,"49":6},"asset_i":{"0":0.0,"1":149.9862262134,"2":148.4826450979,"3":163.7825284038,"4":157.9232480546,"5":162.443004217,"6":155.0510639058,"7":166.5631066499,"8":161.528406324,"9":167.5262451898,"10":158.4271899618,"11":163.5292136182,"12":167.3441350391,"13":158.9814303426,"14":153.4135178328,"15":151.9069673891,"16":150.4026149724,"17":162.2172266563,"18":162.333741156,"19":164.110254544,"20":160.7911338623,"21":170.5268239723,"22":171.1219479428,"23":173.3655090436,"24":191.6025253922,"25":165.2280397912,"26":179.6219815077,"27":167.099243153,"28":174.7879490986,"29":189.0327522152,"30":174.2927935387,"31":168.8100404613,"32":162.3801660422,"33":169.4410887869,"34":151.290882795,"35":160.897222685,"36":180.2546417848,"37":162.3805239179,"38":155.9859571601,"39":158.6704234615,"40":160.5899251618,"41":155.1049876365,"42":157.5446085524,"43":175.9364719797,"44":161.275080609,"45":174.7744706327,"46":176.7720343624,"47":166.8412871707,"48":178.0190725898,"49":156.5743329282},"asset_j":{"0":0.0,"1":151.5446044093,"2":153.1070694094,"3":159.2456742058,"4":157.6884129011,"5":162.2869748491,"6":165.1259544639,"7":167.9435286005,"8":162.3321803987,"9":162.6216756563,"10":161.6240583968,"11":159.4556267422,"12":157.3510400532,"13":160.9897654341,"14":161.6055710508,"15":157.0834934454,"16":152.1182984901,"17":161.63604861,"18":159.0475915011,"19":157.76618647,"20":166.2512445657,"21":171.4749190919,"22":180.0943720109,"23":171.0371401928,"24":174.0327003492,"25":172.7506592312,"26":174.1822721407,"27":170.3314995756,"28":172.7235547687,"29":178.8257538993,"30":175.2800231696,"31":173.3562530585,"32":171.7288165122,"33":171.8261314602,"34":161.8775643226,"35":161.312475028,"36":170.4169390229,"37":161.574148689,"38":162.6410519575,"39":157.665815293,"40":159.9714697049,"41":160.3472194432,"42":161.9866042655,"43":168.0990214402,"44":168.9547596958,"45":176.2298740487,"46":173.1525683563,"47":177.4195941212,"48":174.5112663966,"49":171.9012712349},"bankruptcies":{"0":15,"1":13,"2":23,"3":21,"4":13,"5":21,"6":15,"7":19,"8":11,"9":9,"10":12,"11":28,"12":39,"13":12,"14":27,"15":21,"16":26,"17":15,"18":24,"19":17,"20":17,"21":12,"22":24,"23":10,"24":17,"25":12,"26":17,"27":24,"28":12,"29":15,"30":12,"31":24,"32":13,"33":23,"34":21,"35":15,"36":14,"37":20,"38":11,"39":23,"40":26,"41":20,"42":24,"43":30,"44":12,"45":12,"46":12,"47":13,"48":21,"49":18},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},"best_lender":{"0":49,"1":49,"2":49,"3":49,"4":49,"5":49,"6":49,"7":49,"8":48,"9":49,"10":48,"11":49,"12":49,"13":48,"14":49,"15":48,"16":49,"17":49,"18":49,"19":49,"20":49,"21":49,"22":49,"23":49,"24":49,"25":49,"26":49,"27":49,"28":49,"29":49,"30":49,"31":49,"32":49,"33":49,"34":49,"35":49,"36":48,"37":49,"38":49,"39":48,"40":49,"41":49,"42":49,"43":49,"44":48,"45":49,"46":49,"47":49,"48":49,"49":49},"best_lender_clients":{"0":11,"1":13,"2":17,"3":13,"4":10,"5":11,"6":12,"7":9,"8":12,"9":13,"10":9,"11":13,"12":18,"13":9,"14":11,"15":7,"16":10,"17":14,"18":11,"19":9,"20":15,"21":15,"22":10,"23":13,"24":11,"25":13,"26":14,"27":12,"28":16,"29":14,"30":19,"31":10,"32":8,"33":12,"34":11,"35":11,"36":7,"37":13,"38":10,"39":9,"40":13,"41":11,"42":11,"43":11,"44":8,"45":8,"46":13,"47":10,"48":11,"49":14},"c":{"0":148.5482405615,"1":150.1393433509,"2":155.9318233254,"3":147.7735469023,"4":159.0382995035,"5":162.1352267245,"6":164.6033175252,"7":159.0983733604,"8":159.3029458929,"9":158.4426324018,"10":156.2014575162,"11":154.0159891769,"12":157.7971172756,"13":158.475150317,"14":153.9910162605,"15":149.0550922671,"16":158.396113281,"17":155.7995474489,"18":154.5176049399,"19":163.0471967359,"20":168.074761759,"21":176.5859099363,"22":167.5792124761,"23":170.2214525142,"24":169.4157850651,"25":170.5677769616,"26":166.9809119378,"27":169.2233438755,"28":175.099195946,"29":171.796296281,"30":169.9408668297,"31":168.4701443892,"32":168.4246689583,"33":157.6409370245,"34":158.095426075,"35":166.8514884857,"36":158.2810829639,"37":159.4945152471,"38":147.0410755337,"39":156.7629490156,"40":157.211135567,"41":158.8020121536,"42":164.6311003007,"43":165.6983118212,"44":172.7233429754,"45":169.6024523796,"46":174.0871760057,"47":170.9550381873,"48":166.430219927,"49":177.7988330386},"deposits":{"0":5231.3308676064,"1":5586.740610491,"2":4909.1913972705,"3":5408.3392710392,"4":6268.4489692516,"5":5909.1483550966,"6":6579.6952463718,"7":5456.188790686,"8":6336.9995908978,"9":6380.6237475938,"10":6030.9729236325,"11":4788.3285658713,"12":4083.1929732703,"13":6195.6435042849,"14":4428.6745399152,"15":5064.617232123,"16":4986.8119774187,"17":5975.9228352802,"18":5007.6901028244,"19":5967.2959277669,"20":6197.6896823067,"21":6855.1279534415,"22":5786.944781698,"23":6906.4120004554,"24":5966.2395474502,"25":6579.8530436419,"26":6385.9064462649,"27":5777.5362372504,"28":6998.0123872153,"29":6659.3056632457,"30":6559.9797319834,"31":6078.958930008,"32":6738.4765903448,"33":5154.1984051106,"34":5109.7711003377,"35":5979.4243558589,"36":5988.6876773627,"37":5748.7192645036,"38":6170.4288301468,"39":5150.3349262889,"40":5178.9148589682,"41":5357.5286313288,"42":5695.0948203846,"43":5040.8571224276,"44":7038.6715115194,"45":6606.6015558095,"46":6997.7167635452,"47":6654.2180248865,"48":6245.9294479893,"49":6629.8971066028},"equity":{"0":530.7616598345,"1":564.5696845799,"2":446.4397504566,"3":474.2284388128,"4":547.1530668556,"5":466.8944031652,"6":497.3535366941,"7":401.6224769775,"8":495.8739222284,"9":514.2485078709,"10":473.5118870928,"11":397.5565439043,"12":305.5336241853,"13":511.4831474726,"14":404.659247479,"15":499.6198112795,"16":451.1721679587,"17":544.5012240069,"18":410.0789197191,"19":441.366687323,"20":447.4220520353,"21":476.8837067215,"22":403.4990718812,"23":516.2234696512,"24":433.9407128067,"25":483.1259045148,"26":508.7744156226,"27":413.1980413822,"28":513.2509576131,"29":517.4734365229,"30":493.5650106665,"31":445.3526804517,"32":528.9656066725,"33":409.6387776029,"34":410.9503110445,"35":467.8955761131,"36":502.3185584802,"37":480.6709529775,"38":531.3977313222,"39":450.2411219052,"40":394.9363337464,"41":413.5672130207,"42":452.4287829904,"43":379.2360580586,"44":501.5662842907,"45":470.0202602331,"46":494.6600848247,"47":524.2479816149,"48":432.3341714383,"49":468.1503691756},"fitness":{"0":0.0,"1":0.3071928781,"2":0.3745076503,"3":0.4400749367,"4":0.3426740795,"5":0.2990333524,"6":0.1945286796,"7":0.3128271268,"8":0.2318792081,"9":0.2749201912,"10":0.3703642032,"11":0.3298433009,"12":0.2661966353,"13":0.2412246496,"14":0.3053040635,"15":0.18272806,"16":0.4184958841,"17":0.2301438776,"18":0.3464663979,"19":0.2837018168,"20":0.2463981622,"21":0.2156329021,"22":0.2913288638,"23":0.2204053323,"24":0.1501844231,"25":0.1291198228,"26":0.1354459133,"27":0.2090759476,"28":0.1821173443,"29":0.1742972558,"30":0.1908042079,"31":0.3202900103,"32":0.2558135343,"33":0.2072956124,"34":0.2936731795,"35":0.2901991168,"36":0.3317923887,"37":0.3316281699,"38":0.3763900237,"39":0.253787942,"40":0.2915011616,"41":0.2853067085,"42":0.3378350212,"43":0.36020537,"44":0.2310218601,"45":0.1664697818,"46":0.2291623751,"47":0.1923329617,"48":0.1379773009,"49":0.1677149212},"incrementD":{"0":-398.4872309796,"1":-171.3835806445,"2":-236.4887360901,"3":-378.3419718503,"4":-260.0166394636,"5":-78.2174408189,"6":-328.2943365664,"7":-653.6244966356,"8":-314.4344590777,"9":-287.6892420095,"10":-330.0667756292,"11":-589.8252843074,"12":-271.2205196798,"13":-370.2835833314,"14":-783.3159864674,"15":-528.3143198068,"16":-438.5940285957,"17":-420.872716693,"18":-684.8169460286,"19":-39.9722402843,"20":-153.9985216728,"21":86.0045399101,"22":-858.1249234416,"23":-198.8834520757,"24":-552.3782626627,"25":-341.3364349147,"26":-116.1794594388,"27":-309.7641874263,"28":-64.9957438937,"29":-399.3316559084,"30":-480.9492824779,"31":-539.3837891352,"32":-321.0535899745,"33":-686.5356333073,"34":-735.3134906776,"35":-12.3351244118,"36":-525.0225901648,"37":-530.2542440455,"38":-484.4960213671,"39":-607.6324861882,"40":-554.7834744741,"41":-294.9964322328,"42":-185.9078661506,"43":-411.6512031159,"44":40.234884102,"45":-419.2858100707,"46":134.9797212188,"47":-586.2796414088,"48":-154.3304653764,"49":-178.4159492586},"interest_rate":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"leverage":{"0":0.125108501,"1":0.0,"2":0.0,"3":0.1645397118,"4":0.1193604355,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0036936524,"12":0.0,"13":0.0166573386,"14":0.4982195189,"15":0.0814089796,"16":0.0,"17":0.0,"18":0.1559676085,"19":0.0,"20":0.0,"21":0.2144867182,"22":0.014784007,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":1.6152914931,"28":0.0,"29":0.0,"30":0.0051090011,"31":0.0248571393,"32":0.0614467573,"33":0.2628218667,"34":0.1047714871,"35":1.9737559567,"36":0.0407497008,"37":0.0161810316,"38":0.025937384,"39":0.5726280322,"40":0.072085602,"41":0.2179483158,"42":0.0927594741,"43":0.3469489186,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.2622665647,"49":0.0},"liquidity":{"0":1131.9169037248,"1":1277.5500182623,"2":1390.7728432517,"3":1648.7947248282,"4":1834.1095310013,"5":1906.1739035516,"6":2125.715150391,"7":1723.4087635494,"8":1859.9688296878,"9":1832.6795148184,"10":1662.0532684094,"11":1311.8345333189,"12":1289.3985573124,"13":1790.1971275674,"14":1266.9328618094,"15":1309.2633868378,"16":1493.0678089441,"17":1573.7258871924,"18":1349.8666610911,"19":1891.926035869,"20":2165.8894915356,"21":2652.6239513077,"22":2046.9547765637,"23":2340.4352812706,"24":2168.2953693461,"25":2353.5934711663,"26":2175.5272196648,"27":2106.0357049036,"28":2593.9426931807,"29":2419.8832581643,"30":2340.5323357472,"31":2162.6943242459,"32":2297.1847720672,"33":1671.0312697692,"34":1543.3314596817,"35":2051.4049969952,"36":1927.8069979658,"37":1741.151990457,"38":1746.7659606527,"39":1498.8886349575,"40":1562.6642836998,"41":1643.6714122088,"42":1857.2708244604,"43":1802.8409609987,"44":2500.056162536,"45":2296.5630139808,"46":2560.9967134116,"47":2347.1245795339,"48":2339.5204190764,"49":2590.4314077184},"loans":{"0":26.9521811794,"1":47.8330571585,"2":119.706291132,"3":93.7840381535,"4":68.7958151346,"5":110.6335772194,"6":48.6433948067,"7":46.4615455116,"8":58.3436419523,"9":26.4921586082,"10":59.8858354184,"11":107.3030276402,"12":184.3112955829,"13":49.2839156719,"14":164.779340363,"15":81.2941041961,"16":81.187842383,"17":101.1254099911,"18":108.5466215251,"19":66.7169031156,"20":47.7971412408,"21":50.295848415,"22":85.0159972248,"23":29.1580579948,"24":44.5536211189,"25":42.4003215484,"26":48.850328031,"27":135.3562729426,"28":33.0106164372,"29":58.1681337011,"30":57.4455313536,"31":118.3434737524,"32":23.0491795551,"33":68.4068480506,"34":80.2686873343,"35":85.9467496236,"36":58.6722584953,"37":53.850453602,"38":49.5316077155,"39":64.7711970218,"40":92.9589767868,"41":100.6058989691,"42":109.7752372273,"43":134.3513556625,"44":36.4973822287,"45":53.3416776645,"46":69.5946626209,"47":33.0501383941,"48":99.0816771431,"49":61.7673916546},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"num_loans":{"0":3,"1":5,"2":9,"3":11,"4":10,"5":7,"6":6,"7":7,"8":7,"9":2,"10":5,"11":12,"12":16,"13":8,"14":10,"15":9,"16":8,"17":11,"18":11,"19":10,"20":5,"21":4,"22":8,"23":5,"24":5,"25":5,"26":4,"27":11,"28":5,"29":8,"30":5,"31":12,"32":3,"33":8,"34":7,"35":9,"36":6,"37":11,"38":6,"39":7,"40":9,"41":7,"42":11,"43":10,"44":6,"45":6,"46":4,"47":3,"48":11,"49":6},"num_of_rationed":{"0":0,"1":0,"2":1,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":2,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"potential_credit_channels":{"0":622,"1":586,"2":602,"3":574,"4":559,"5":596,"6":595,"7":602,"8":606,"9":592,"10":601,"11":602,"12":625,"13":625,"14":623,"15":641,"16":590,"17":612,"18":622,"19":629,"20":610,"21":628,"22":600,"23":606,"24":649,"25":617,"26":624,"27":627,"28":579,"29":641,"30":615,"31":632,"32":582,"33":623,"34":609,"35":601,"36":598,"37":619,"38":621,"39":579,"40":643,"41":624,"42":647,"43":589,"44":611,"45":622,"46":647,"47":627,"48":583,"49":598},"potential_lenders":{"0":21,"1":26,"2":25,"3":29,"4":21,"5":24,"6":30,"7":20,"8":22,"9":20,"10":22,"11":22,"12":24,"13":20,"14":19,"15":16,"16":21,"17":19,"18":25,"19":21,"20":26,"21":30,"22":17,"23":22,"24":24,"25":22,"26":27,"27":23,"28":26,"29":21,"30":26,"31":18,"32":24,"33":21,"34":20,"35":26,"36":22,"37":21,"38":22,"39":20,"40":21,"41":20,"42":19,"43":20,"44":22,"45":19,"46":27,"47":25,"48":24,"49":21},"prob_bankruptcy":{"0":0.0523177869,"1":0.4332434005,"2":0.0647469994,"3":0.414967794,"4":0.4295676585,"5":0.3228049535,"6":0.3537295192,"7":0.2926950438,"8":0.2877785006,"9":0.2600228433,"10":0.1886508172,"11":0.254998991,"12":0.4452704534,"13":0.515491202,"14":0.4509340873,"15":0.4350426666,"16":0.4016855105,"17":0.3726032931,"18":0.4182689529,"19":0.3632580387,"20":0.3570528383,"21":0.4823948683,"22":0.4810610942,"23":0.3977861391,"24":0.4557455654,"25":0.4648861699,"26":0.4432082178,"27":0.4501885435,"28":0.454352615,"29":0.4381726229,"30":0.4582968817,"31":0.4610007722,"32":0.4537510788,"33":0.440558619,"34":0.4520805086,"35":0.4982523065,"36":0.5080458585,"37":0.4999361306,"38":0.5069550604,"39":0.4755441153,"40":0.5229356551,"41":0.5085984922,"42":0.4786930513,"43":0.4773022851,"44":0.3347474097,"45":0.3364020949,"46":0.3260847426,"47":0.27836302,"48":0.3321715396,"49":0.3105291455},"profits":{"0":8.018317565,"1":38.0190219876,"2":19.1997958989,"3":39.5901413844,"4":25.5134114987,"5":28.5956299458,"6":14.3891272797,"7":16.441249218,"8":13.380324204,"9":8.0646473896,"10":33.5125766029,"11":54.9629822027,"12":83.0105936358,"13":28.4877046496,"14":38.7143642439,"15":50.1835436274,"16":0.0,"17":37.8550660776,"18":47.0888782077,"19":22.8499167645,"20":0.0,"21":9.2224687646,"22":40.0663773169,"23":18.6621021808,"24":16.1697785681,"25":15.8909962242,"26":0.0,"27":57.3499811305,"28":18.9752187288,"29":11.1622184852,"30":14.1424686336,"31":23.1965944103,"32":6.3539572287,"33":17.5013153074,"34":36.842476755,"35":39.2345151293,"36":31.4928837181,"37":24.5654352304,"38":19.9787784668,"39":0.0,"40":34.4392679971,"41":17.4936186322,"42":44.3041829868,"43":26.005299352,"44":15.63775728,"45":18.8821712235,"46":19.2466319983,"47":0.4955200408,"48":52.2463289479,"49":24.6444056441},"psi":{"0":1.0,"1":0.9476822131,"2":0.5667565995,"3":0.9352530006,"4":0.585032206,"5":0.5704323415,"6":0.6771950465,"7":0.6462704808,"8":0.7073049562,"9":0.7122214994,"10":0.7399771567,"11":0.8113491828,"12":0.745001009,"13":0.5547295466,"14":0.484508798,"15":0.5490659127,"16":0.5649573334,"17":0.5983144895,"18":0.6273967069,"19":0.5817310471,"20":0.6367419613,"21":0.6429471617,"22":0.5176051317,"23":0.5189389058,"24":0.6022138609,"25":0.5442544346,"26":0.5351138301,"27":0.5567917822,"28":0.5498114565,"29":0.545647385,"30":0.5618273771,"31":0.5417031183,"32":0.5389992278,"33":0.5462489212,"34":0.559441381,"35":0.5479194914,"36":0.5017476935,"37":0.4919541415,"38":0.5000638694,"39":0.4930449396,"40":0.5244558847,"41":0.4770643449,"42":0.4914015078,"43":0.5213069487,"44":0.5226977149,"45":0.6652525903,"46":0.6635979051,"47":0.6739152574,"48":0.72163698,"49":0.6678284604},"rationing":{"0":0.0,"1":0.0,"2":7.6298760957,"3":0.0,"4":0.0,"5":0.0,"6":4.3553865412,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":7.4153151709,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":7.7043435267,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":5.0424936805,"40":8.683814173,"41":15.5548353345,"42":0.0061496656,"43":7.8731507319,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"reserves":{"0":104.6266173521,"1":111.7348122098,"2":98.1838279454,"3":108.1667854208,"4":125.368979385,"5":118.1829671019,"6":131.5939049274,"7":109.1237758137,"8":126.739991818,"9":127.6124749519,"10":120.6194584726,"11":95.7665713174,"12":81.6638594654,"13":123.9128700857,"14":88.5734907983,"15":101.2923446425,"16":99.7362395484,"17":119.5184567056,"18":100.1538020565,"19":119.3459185553,"20":123.9537936461,"21":137.1025590688,"22":115.738895634,"23":138.1282400091,"24":119.324790949,"25":131.5970608728,"26":127.7181289253,"27":115.550724745,"28":139.9602477443,"29":133.1861132649,"30":131.1995946397,"31":121.5791786002,"32":134.7695318069,"33":103.0839681022,"34":102.1954220068,"35":119.5884871172,"36":119.7737535473,"37":114.9743852901,"38":123.4085766029,"39":103.0066985258,"40":103.5782971794,"41":107.1505726266,"42":113.9018964077,"43":100.8171424486,"44":140.7734302304,"45":132.1320311162,"46":139.9543352709,"47":133.0843604977,"48":124.9185889598,"49":132.5979421321},"systemic_leverage":{"0":0.117601991,"1":0.0,"2":0.0,"3":0.1283409752,"4":0.0954883484,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0028071758,"12":0.0,"13":0.0139921644,"14":0.3985756151,"15":0.0667553633,"16":0.0,"17":0.0,"18":0.1216547347,"19":0.0,"20":0.0,"21":0.1973277807,"22":0.0124185659,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":1.2599273646,"28":0.0,"29":0.0,"30":0.004598101,"31":0.0188914259,"32":0.0577599519,"33":0.220770368,"34":0.0901034789,"35":1.6184798845,"36":0.0358597367,"37":0.0126212047,"38":0.0228248979,"39":0.4924601077,"40":0.0591101937,"41":0.1874355516,"42":0.0723523898,"43":0.2775591349,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.2045679205,"49":0.0},"grade_avg":{"0":50.0,"1":50.0,"2":50.0,"3":50.0,"4":50.0,"5":50.0,"6":50.0,"7":50.0,"8":50.0,"9":50.0,"10":50.0,"11":50.0,"12":50.0,"13":50.0,"14":50.0,"15":50.0,"16":50.0,"17":50.0,"18":50.0,"19":50.0,"20":50.0,"21":50.0,"22":50.0,"23":50.0,"24":50.0,"25":50.0,"26":50.0,"27":50.0,"28":50.0,"29":50.0,"30":50.0,"31":50.0,"32":50.0,"33":50.0,"34":50.0,"35":50.0,"36":50.0,"37":50.0,"38":50.0,"39":50.0,"40":50.0,"41":50.0,"42":50.0,"43":50.0,"44":50.0,"45":50.0,"46":50.0,"47":50.0,"48":50.0,"49":50.0},"communities":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1},"communities_not_alone":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1},"gcs":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50}}'
    maxDiff = None

    def setUp(self):
        model = interbank.Model()
        model.config.lender_change = self.ALGORITHM()
        model.log.define_log('ERROR')
        model.config.lender_change.set_parameter("p", self.P)
        model.configure_json(self.CONFIG)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_shockedmarket')
        model.simulate_full()
        self.generated_now_values = model.finish()
        if os.path.exists('tests\\test_whole_execution_shockedmarket_erdos_renyi.json'):
            os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.json')
        if os.path.exists('tests\\test_whole_execution_shockedmarket_erdos_renyi.png'):
            os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.png')


    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
