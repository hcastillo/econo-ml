# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50


    ALGORITHM = interbank_lenderchange.ShockedMarket3
    P = 0.5

    SEED = 39393

    CONFIG = 'C_i0=30 D_i0=135 E_i0=15 L_i0=120 alfa=0.1 allow_replacement_of_bankrupted=True beta=5 chi=0.0015 mu=0.7 omega=0.55 phi=0.25 psi=0.0 r_i0=0.02 reintroduce_with_median=False reserves=0.02 rho=0.3 xi=0.9 '

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":26.9521811794,"1":37.6169525655,"2":93.2967093721,"3":67.7558103683,"4":55.2686783059,"5":110.6335772194,"6":48.6433948067,"7":41.6373045949,"8":44.9633177484,"9":26.4921586082,"10":53.485131937,"11":95.3433081497,"12":173.4493157657,"13":28.5217631434,"14":145.9356571708,"15":68.550060216,"16":67.6549387003,"17":86.4892623892,"18":90.8346499243,"19":56.056014268,"20":47.7971412408,"21":41.0733796503,"22":85.0159972248,"23":23.0285719104,"24":28.3838425508,"25":26.5093253242,"26":48.850328031,"27":119.6411499635,"28":30.5921399108,"29":44.8508903736,"30":42.6041382995,"31":116.2435972354,"32":23.0491795551,"33":58.2699554176,"34":69.189082783,"35":56.6641365986,"36":44.3451253495,"37":44.8168184585,"38":38.2933669257,"39":64.7711970218,"40":81.9693449714,"41":86.8995113343,"42":98.7758906596,"43":118.8820503081,"44":32.6225721214,"45":42.6768472142,"46":65.3253471085,"47":32.5546183532,"48":85.6035633962,"49":56.9948195213},"liquidity":{"0":1131.9169037248,"1":1277.5500182623,"2":1390.7728432517,"3":1648.7947248282,"4":1834.1095310013,"5":1906.1739035516,"6":2125.715150391,"7":1723.4087635494,"8":1859.9688296878,"9":1832.6795148184,"10":1662.0532684094,"11":1311.8345333189,"12":1289.3985573124,"13":1790.1971275674,"14":1266.9328618094,"15":1309.2633868378,"16":1493.0678089441,"17":1573.7258871924,"18":1349.8666610911,"19":1891.926035869,"20":2165.8894915356,"21":2652.6239513077,"22":2046.9547765637,"23":2340.4352812706,"24":2168.2953693461,"25":2353.5934711663,"26":2175.5272196648,"27":2106.0357049036,"28":2593.9426931807,"29":2419.8832581643,"30":2340.5323357472,"31":2162.6943242459,"32":2297.1847720672,"33":1671.0312697692,"34":1543.3314596817,"35":2051.4049969952,"36":1927.8069979658,"37":1741.151990457,"38":1746.7659606527,"39":1498.8886349575,"40":1562.6642836998,"41":1643.6714122088,"42":1857.2708244604,"43":1802.8409609987,"44":2500.056162536,"45":2296.5630139808,"46":2560.9967134116,"47":2347.1245795339,"48":2339.5204190764,"49":2590.4314077184},"interest_rate":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"asset_i":{"0":0.0,"1":146.8619975985,"2":155.7948990756,"3":162.8882565987,"4":171.6202707559,"5":217.7177918314,"6":147.6022263773,"7":175.1782346525,"8":164.9651616758,"9":203.645743562,"10":164.821135157,"11":167.5510395089,"12":172.2790633939,"13":143.0260767048,"14":149.9058618037,"15":159.8570458925,"16":155.4837024098,"17":165.773798547,"18":155.1058301858,"19":161.1741354421,"20":156.0831785613,"21":153.5854362483,"22":166.9415746954,"23":157.8958490586,"24":162.5972649269,"25":161.5578690672,"26":266.8145849751,"27":162.9012564077,"28":145.0992409348,"29":215.0978492309,"30":237.6125351666,"31":149.881152624,"32":136.0083978406,"33":179.6368889504,"34":146.8951392125,"35":173.4561868432,"36":171.6126608568,"37":167.4332505992,"38":158.7442541148,"39":176.2120314283,"40":168.9944171688,"41":154.4067660859,"42":161.8634408525,"43":175.9644204396,"44":144.2851357025,"45":190.2380533379,"46":162.0454328608,"47":131.9194838006,"48":183.2313386526,"49":174.8451298506},"asset_j":{"0":0.0,"1":151.7095389712,"2":153.5068592661,"3":159.5306981708,"4":162.4939033537,"5":162.8067453422,"6":165.9011343479,"7":168.4028003277,"8":162.8824702112,"9":163.1764038186,"10":162.2356485064,"11":159.7601138399,"12":157.6359495889,"13":161.4187344694,"14":162.3063415068,"15":157.5067956383,"16":156.3820813017,"17":162.0123704086,"18":159.3393872009,"19":158.0006344545,"20":166.9301718889,"21":172.3569197305,"22":181.1615549341,"23":171.7089206827,"24":174.5507217604,"25":173.4934086735,"26":174.9510296458,"27":171.0500165731,"28":173.1916824442,"29":179.4172343474,"30":176.2862036091,"31":174.112782909,"32":172.8309225126,"33":172.4537466213,"34":164.9201943488,"35":161.7574407005,"36":170.8743315309,"37":166.5942614592,"38":163.0657556236,"39":161.3023302898,"40":160.3989656664,"41":161.060758325,"42":162.6758576792,"43":168.6136540765,"44":169.4463445148,"45":176.9364704528,"46":173.8722189121,"47":178.6120389785,"48":175.1820790763,"49":177.3347289626},"equity":{"0":750.0,"1":710.7616598345,"2":699.5696845799,"3":701.4397504566,"4":684.2284388128,"5":667.1530668556,"6":636.7318345689,"7":617.3535366941,"8":611.6224769775,"9":615.8739222284,"10":619.2485078709,"11":608.5118870928,"12":652.5565439043,"13":665.5336241853,"14":631.4831474726,"15":689.659247479,"16":694.6198112795,"17":706.1721679587,"18":679.5012240069,"19":650.0789197191,"20":621.366687323,"21":627.4220520353,"22":626.8837067215,"23":628.4990718812,"24":636.2234696512,"25":643.9407128067,"26":633.1259045148,"27":658.7744156226,"28":653.1980413822,"29":648.2509576131,"30":657.4958113561,"31":643.5650106665,"32":640.3526804517,"33":648.9656066725,"34":664.6387776029,"35":650.9503110445,"36":662.8955761131,"37":667.3185584802,"38":660.6709529775,"39":639.6319127343,"40":654.9788888348,"41":611.9843577292,"42":638.5528638009,"43":662.4287829904,"44":679.2360580586,"45":621.5662842907,"46":620.0202602331,"47":629.6600848247,"48":674.2479816149,"49":642.3341714383},"equity_borrowers":{"0":45.0,"1":56.0661363856,"2":127.4130603697,"3":157.5659086652,"4":139.7066865608,"5":99.9121834848,"6":52.1092250523,"7":99.1975518712,"8":86.6648906924,"9":21.6652858572,"10":67.5577572088,"11":153.8075316193,"12":199.6854640329,"13":102.7128826593,"14":134.6748634676,"15":105.3506016417,"16":94.6646939963,"17":145.2575635731,"18":142.6003392463,"19":131.1553995456,"20":74.782399417,"21":45.5075834623,"22":110.2339539566,"23":63.965647476,"24":68.5968699881,"25":69.3476020156,"26":53.0320951341,"27":147.6750429592,"28":67.1472235695,"29":104.6979787276,"30":51.4867905575,"31":160.4342598368,"32":43.0363025488,"33":122.8605864226,"34":92.4869003073,"35":124.4358414245,"36":75.4981140205,"37":131.2704930217,"38":71.7042243718,"39":66.6461543733,"40":130.4480018838,"41":27.6272917325,"42":114.1823245224,"43":124.3862205496,"44":81.9315593202,"45":71.3088230403,"46":45.5083784336,"47":18.9559248581,"48":138.4253480373,"49":67.1760413066},"bankruptcies":{"0":12,"1":8,"2":13,"3":11,"4":7,"5":9,"6":8,"7":11,"8":6,"9":6,"10":7,"11":13,"12":17,"13":8,"14":13,"15":12,"16":15,"17":7,"18":13,"19":10,"20":10,"21":7,"22":11,"23":7,"24":12,"25":9,"26":9,"27":11,"28":7,"29":8,"30":8,"31":11,"32":8,"33":14,"34":14,"35":8,"36":8,"37":11,"38":6,"39":13,"40":14,"41":11,"42":12,"43":16,"44":8,"45":8,"46":6,"47":9,"48":11,"49":11},"potential_credit_channels":{"0":622,"1":586,"2":602,"3":574,"4":559,"5":596,"6":595,"7":602,"8":606,"9":592,"10":601,"11":602,"12":625,"13":625,"14":623,"15":641,"16":590,"17":612,"18":622,"19":629,"20":610,"21":628,"22":600,"23":606,"24":649,"25":617,"26":624,"27":627,"28":579,"29":641,"30":615,"31":632,"32":582,"33":623,"34":609,"35":601,"36":598,"37":619,"38":621,"39":579,"40":643,"41":624,"42":647,"43":589,"44":611,"45":622,"46":647,"47":627,"48":583,"49":598},"prob_change_lender":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"best_lender":{"0":49,"1":49,"2":49,"3":49,"4":49,"5":49,"6":49,"7":49,"8":48,"9":49,"10":48,"11":49,"12":49,"13":48,"14":49,"15":48,"16":49,"17":49,"18":49,"19":49,"20":49,"21":49,"22":49,"23":49,"24":49,"25":49,"26":49,"27":49,"28":49,"29":49,"30":49,"31":49,"32":49,"33":49,"34":49,"35":49,"36":48,"37":49,"38":49,"39":48,"40":49,"41":49,"42":49,"43":49,"44":48,"45":49,"46":49,"47":49,"48":49,"49":49},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.3071928781,"2":0.3745076503,"3":0.4400749367,"4":0.3426740795,"5":0.2990333524,"6":0.1945286796,"7":0.3128271268,"8":0.2318792081,"9":0.2749201912,"10":0.3703642032,"11":0.3298433009,"12":0.2661966353,"13":0.2412246496,"14":0.3053040635,"15":0.18272806,"16":0.4184958841,"17":0.2301438776,"18":0.3464663979,"19":0.2837018168,"20":0.2463981622,"21":0.2156329021,"22":0.2913288638,"23":0.2204053323,"24":0.1501844231,"25":0.1291198228,"26":0.1354459133,"27":0.2090759476,"28":0.1821173443,"29":0.1742972558,"30":0.1908042079,"31":0.3202900103,"32":0.2558135343,"33":0.2072956124,"34":0.2936731795,"35":0.2901991168,"36":0.3317923887,"37":0.3316281699,"38":0.3763900237,"39":0.253787942,"40":0.2915011616,"41":0.2853067085,"42":0.3378350212,"43":0.36020537,"44":0.2310218601,"45":0.1664697818,"46":0.2291623751,"47":0.1923329617,"48":0.1379773009,"49":0.1677149212},"best_lender_clients":{"0":11,"1":13,"2":17,"3":13,"4":10,"5":11,"6":12,"7":9,"8":12,"9":13,"10":9,"11":13,"12":18,"13":9,"14":11,"15":7,"16":10,"17":14,"18":11,"19":9,"20":15,"21":15,"22":10,"23":13,"24":11,"25":13,"26":14,"27":12,"28":16,"29":14,"30":19,"31":10,"32":8,"33":12,"34":11,"35":11,"36":7,"37":13,"38":10,"39":9,"40":13,"41":11,"42":11,"43":11,"44":8,"45":8,"46":13,"47":10,"48":11,"49":14},"rationing":{"0":0.0,"1":0.0,"2":7.6298760957,"3":0.0,"4":0.0,"5":0.0,"6":4.3553865412,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":7.4153151709,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":7.7043435267,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":5.0424936805,"40":8.683814173,"41":15.5548353345,"42":0.0061496656,"43":7.8731507319,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"leverage":{"0":0.125108501,"1":0.0,"2":0.0,"3":0.1645397118,"4":0.1193604355,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0036936524,"12":0.0,"13":0.0166573386,"14":0.4982195189,"15":0.0814089796,"16":0.0,"17":0.0,"18":0.1559676085,"19":0.0,"20":0.0,"21":0.2144867182,"22":0.014784007,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":1.6152914931,"28":0.0,"29":0.0,"30":0.0051090011,"31":0.0248571393,"32":0.0614467573,"33":0.2628218667,"34":0.1047714871,"35":1.9737559567,"36":0.0407497008,"37":0.0161810316,"38":0.025937384,"39":0.5726280322,"40":0.072085602,"41":0.2179483158,"42":0.0927594741,"43":0.3469489186,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.2622665647,"49":0.0},"systemic_leverage":{"0":0.117601991,"1":0.0,"2":0.0,"3":0.1283409752,"4":0.0954883484,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0028071758,"12":0.0,"13":0.0139921644,"14":0.3985756151,"15":0.0667553633,"16":0.0,"17":0.0,"18":0.1216547347,"19":0.0,"20":0.0,"21":0.1973277807,"22":0.0124185659,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":1.2599273646,"28":0.0,"29":0.0,"30":0.004598101,"31":0.0188914259,"32":0.0577599519,"33":0.220770368,"34":0.0901034789,"35":1.6184798845,"36":0.0358597367,"37":0.0126212047,"38":0.0228248979,"39":0.4924601077,"40":0.0591101937,"41":0.1874355516,"42":0.0723523898,"43":0.2775591349,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.2045679205,"49":0.0},"num_of_rationed":{"0":0,"1":0,"2":1,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":2,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},"loans":{"0":8.9840603931,"1":9.5666114317,"2":19.951048522,"3":11.7230047692,"4":7.6439794594,"5":22.1267154439,"6":8.1072324678,"7":7.7435909186,"8":11.6687283905,"9":13.2460793041,"10":11.9771670837,"11":11.9225586267,"12":15.3592746319,"13":8.2139859453,"14":16.4779340363,"15":10.1617630245,"16":13.5313070638,"17":11.2361566657,"18":12.060735725,"19":7.4129892351,"20":9.5594282482,"21":12.5739621037,"22":12.1451424607,"23":7.2895144987,"24":8.9107242238,"25":8.4800643097,"26":16.283442677,"27":13.5356272943,"28":6.6021232874,"29":8.3097333859,"30":14.3613828384,"31":11.8343473752,"32":11.5245897775,"33":9.7724068644,"34":11.4669553335,"35":9.5496388471,"36":11.7344516991,"37":4.895495782,"38":8.2552679526,"39":9.253028146,"40":15.4931627978,"41":16.7676498282,"42":12.1972485808,"43":16.7939194578,"44":6.0828970381,"45":10.6683355329,"46":17.3986656552,"47":11.016712798,"48":9.9081677143,"49":10.2945652758},"c":{"0":148.5482405615,"1":150.1393433509,"2":155.9318233254,"3":147.7735469023,"4":159.0382995035,"5":162.1352267245,"6":164.6033175252,"7":159.0983733604,"8":159.3029458929,"9":158.4426324018,"10":156.2014575162,"11":154.0159891769,"12":157.7971172756,"13":158.475150317,"14":153.9910162605,"15":149.0550922671,"16":158.396113281,"17":155.7995474489,"18":154.5176049399,"19":163.0471967359,"20":168.074761759,"21":176.5859099363,"22":167.5792124761,"23":170.2214525142,"24":169.4157850651,"25":170.5677769616,"26":166.9809119378,"27":169.2233438755,"28":175.099195946,"29":171.796296281,"30":169.9408668297,"31":168.4701443892,"32":168.4246689583,"33":157.6409370245,"34":158.095426075,"35":166.8514884857,"36":158.2810829639,"37":159.4945152471,"38":147.0410755337,"39":156.7629490156,"40":157.211135567,"41":158.8020121536,"42":164.6311003007,"43":165.6983118212,"44":172.7233429754,"45":169.6024523796,"46":174.0871760057,"47":170.9550381873,"48":166.430219927,"49":177.7988330386},"reserves":{"0":104.6266173521,"1":111.7348122098,"2":98.1838279454,"3":108.1667854208,"4":125.368979385,"5":118.1829671019,"6":131.5939049274,"7":109.1237758137,"8":126.739991818,"9":127.6124749519,"10":120.6194584726,"11":95.7665713174,"12":81.6638594654,"13":123.9128700857,"14":88.5734907983,"15":101.2923446425,"16":99.7362395484,"17":119.5184567056,"18":100.1538020565,"19":119.3459185553,"20":123.9537936461,"21":137.1025590688,"22":115.738895634,"23":138.1282400091,"24":119.324790949,"25":131.5970608728,"26":127.7181289253,"27":115.550724745,"28":139.9602477443,"29":133.1861132649,"30":131.1995946397,"31":121.5791786002,"32":134.7695318069,"33":103.0839681022,"34":102.1954220068,"35":119.5884871172,"36":119.7737535473,"37":114.9743852901,"38":123.4085766029,"39":103.0066985258,"40":103.5782971794,"41":107.1505726266,"42":113.9018964077,"43":100.8171424486,"44":140.7734302304,"45":132.1320311162,"46":139.9543352709,"47":133.0843604977,"48":124.9185889598,"49":132.5979421321},"deposits":{"0":5231.3308676064,"1":5586.740610491,"2":4909.1913972705,"3":5408.3392710392,"4":6268.4489692516,"5":5909.1483550966,"6":6579.6952463718,"7":5456.188790686,"8":6336.9995908978,"9":6380.6237475938,"10":6030.9729236325,"11":4788.3285658713,"12":4083.1929732703,"13":6195.6435042849,"14":4428.6745399152,"15":5064.617232123,"16":4986.8119774187,"17":5975.9228352802,"18":5007.6901028244,"19":5967.2959277669,"20":6197.6896823067,"21":6855.1279534415,"22":5786.944781698,"23":6906.4120004554,"24":5966.2395474502,"25":6579.8530436419,"26":6385.9064462649,"27":5777.5362372504,"28":6998.0123872153,"29":6659.3056632457,"30":6559.9797319834,"31":6078.958930008,"32":6738.4765903448,"33":5154.1984051106,"34":5109.7711003377,"35":5979.4243558589,"36":5988.6876773627,"37":5748.7192645036,"38":6170.4288301468,"39":5150.3349262889,"40":5178.9148589682,"41":5357.5286313288,"42":5695.0948203846,"43":5040.8571224276,"44":7038.6715115194,"45":6606.6015558095,"46":6997.7167635452,"47":6654.2180248865,"48":6245.9294479893,"49":6629.8971066028},"psi":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"psi_lenders":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"potential_lenders":{"0":21,"1":26,"2":25,"3":29,"4":21,"5":24,"6":30,"7":20,"8":22,"9":20,"10":22,"11":22,"12":24,"13":20,"14":19,"15":16,"16":21,"17":19,"18":25,"19":21,"20":26,"21":30,"22":17,"23":22,"24":24,"25":22,"26":27,"27":23,"28":26,"29":21,"30":26,"31":18,"32":24,"33":21,"34":20,"35":26,"36":22,"37":21,"38":22,"39":20,"40":21,"41":20,"42":19,"43":20,"44":22,"45":19,"46":27,"47":25,"48":24,"49":21},"active_lenders":{"0":3,"1":5,"2":6,"3":8,"4":9,"5":5,"6":6,"7":6,"8":5,"9":2,"10":5,"11":9,"12":12,"13":6,"14":10,"15":8,"16":6,"17":9,"18":9,"19":9,"20":5,"21":4,"22":7,"23":4,"24":5,"25":5,"26":3,"27":10,"28":5,"29":7,"30":4,"31":10,"32":2,"33":7,"34":7,"35":9,"36":5,"37":11,"38":6,"39":7,"40":6,"41":6,"42":9,"43":8,"44":6,"45":5,"46":4,"47":3,"48":10,"49":6},"active_borrowers":{"0":3,"1":5,"2":9,"3":11,"4":10,"5":7,"6":6,"7":7,"8":7,"9":2,"10":5,"11":12,"12":16,"13":8,"14":10,"15":9,"16":8,"17":11,"18":11,"19":10,"20":5,"21":4,"22":8,"23":5,"24":5,"25":5,"26":4,"27":11,"28":5,"29":8,"30":5,"31":12,"32":3,"33":8,"34":7,"35":9,"36":6,"37":11,"38":6,"39":7,"40":9,"41":7,"42":11,"43":10,"44":6,"45":6,"46":4,"47":3,"48":11,"49":6},"prob_bankruptcy":{"0":0.0,"1":0.4051420613,"2":0.0,"3":0.427377323,"4":0.4185234083,"5":0.2148698731,"6":0.2148698731,"7":0.1725193054,"8":0.2051270553,"9":0.1037800488,"10":0.184572617,"11":0.1588899592,"12":0.422674872,"13":0.6187534915,"14":0.4482973005,"15":0.4592613162,"16":0.3645517517,"17":0.3658262692,"18":0.3288533559,"19":0.2723215263,"20":0.2314417867,"21":0.380740248,"22":0.380740248,"23":0.3120390914,"24":0.4393259482,"25":0.4328079403,"26":0.3661049568,"27":0.3953154735,"28":0.4310796545,"29":0.4792148957,"30":0.4582019142,"31":0.3618670735,"32":0.3687081616,"33":0.4345366425,"34":0.4353221038,"35":0.4517393224,"36":0.4605944599,"37":0.4415213484,"38":0.5259149214,"39":0.4174793258,"40":0.4862919635,"41":0.4981528228,"42":0.4613213645,"43":0.4709405258,"44":0.303809104,"45":0.2571437916,"46":0.3827346163,"47":0.2061259509,"48":0.2966431824,"49":0.2615824121},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'
    maxDiff = None

    def setUp(self):
        model = interbank.Model()
        model.config.lender_change = self.ALGORITHM()
        model.log.define_log('ERROR')
        model.config.lender_change.set_parameter("p", self.P)
        model.configure_json(self.CONFIG)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_shockedmarket')
        model.simulate_full()
        self.generated_now_values = model.finish()

    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
