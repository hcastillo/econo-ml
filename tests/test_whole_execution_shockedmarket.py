# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50
    T_LONG = 1000

    maxDiff = None

    ALGORITHM = interbank_lenderchange.ShockedMarket
    P = 0.5

    SEED = 39393

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":0.0,"1":2.7759270896,"2":6.7145566961,"3":11.0444933427,"4":12.3399571279,"5":1.3313543116,"6":0.0,"7":14.7365370793,"8":10.7702182196,"9":10.2401877738,"10":0.0,"11":0.0,"12":0.0,"13":16.2276809223,"14":8.3497627819,"15":8.1303098882,"16":0.0,"17":3.2849379961,"18":22.1540045561,"19":0.0,"20":0.0,"21":0.0,"22":10.3042008706,"23":0.0,"24":29.2812211345,"25":0.0,"26":8.4809291501,"27":3.1843922733,"28":0.0,"29":0.0,"30":0.0,"31":9.3875358056,"32":15.4951117653,"33":0.0,"34":0.0,"35":0.0,"36":10.9283722464,"37":0.0,"38":19.7176556002,"39":0.0,"40":8.5426745771,"41":4.2552110316,"42":8.1084509561,"43":13.7870109908,"44":17.2232710038,"45":7.9362983602,"46":0.0,"47":13.6619132366,"48":4.5541595532,"49":16.3696932855},"liquidity":{"0":1611.3021386348,"1":2207.649799259,"2":2380.2023665552,"3":2662.5054106024,"4":2704.8606661352,"5":2964.8522153124,"6":3204.054421552,"7":3388.9431898911,"8":3803.7955319268,"9":3696.4531406592,"10":3966.1220897754,"11":4450.226638856,"12":4670.5813597429,"13":5549.8027529659,"14":6008.1218846836,"15":6839.6145383701,"16":7501.4388633472,"17":7850.5557477088,"18":7502.1864191008,"19":7684.3426336585,"20":7570.8668984335,"21":8141.3169770684,"22":7918.21748491,"23":7019.3196630917,"24":6301.5838444965,"25":5925.4724699096,"26":6019.6768608184,"27":6564.4898207433,"28":7829.4470079249,"29":7778.6358414326,"30":8615.4183555652,"31":9917.4038717511,"32":9916.5713645939,"33":8975.9505884955,"34":9856.3770926,"35":11287.8710862979,"36":9783.6028337804,"37":9316.8993436465,"38":9302.7356486376,"39":8964.2880276806,"40":8318.3827590493,"41":7485.6845679887,"42":7326.2093147682,"43":6313.5104307386,"44":6024.7954789009,"45":6628.5473990626,"46":7490.1171009345,"47":7203.9603589057,"48":7370.6915306859,"49":8019.6763616432},"interest_rate":{"0":0.0,"1":0.02,"2":0.0146379146,"3":1.1957931314,"4":0.1936519688,"5":0.02,"6":0.0128137832,"7":0.1783016664,"8":0.2648775358,"9":0.1959338082,"10":0.3465531882,"11":0.3061574109,"12":0.7277556599,"13":0.5104090275,"14":0.3993208769,"15":0.7920192332,"16":0.5741525921,"17":0.3025664388,"18":0.2591426675,"19":2.9654220412,"20":0.0,"21":0.2141934108,"22":0.1697114647,"23":0.5730855356,"24":0.2141138165,"25":0.3559975917,"26":0.3548073748,"27":6.215600912,"28":0.1855799981,"29":0.1953266137,"30":0.1429775388,"31":0.1066070335,"32":0.2667563343,"33":0.02,"34":0.0,"35":0.4403304168,"36":0.1797914447,"37":0.0,"38":0.1549907134,"39":0.1630591082,"40":0.2484441494,"41":3.6560576528,"42":0.1397402238,"43":0.5365623442,"44":0.1525147982,"45":0.1389357089,"46":0.0688665558,"47":0.6782885379,"48":0.1179073132,"49":0.3853447828},"asset_i":{"0":0.0,"1":2.3199334351,"2":2.0978234824,"3":2.481546033,"4":2.723043073,"5":2.7236815114,"6":2.796226185,"7":2.6281392149,"8":2.9235147584,"9":3.2801665886,"10":2.8093769925,"11":3.3899029699,"12":3.3962292224,"13":3.4399104703,"14":3.6179702543,"15":4.4626727198,"16":4.4402262535,"17":3.0936178917,"18":3.5743881442,"19":4.5929361628,"20":4.1697501494,"21":5.0342864099,"22":3.9460164619,"23":2.8852604065,"24":3.2471055881,"25":3.4149328634,"26":4.0056223736,"27":3.9070646575,"28":4.3197177759,"29":4.8530218975,"30":4.2599766165,"31":3.6906730605,"32":5.5185653937,"33":2.9872238099,"34":5.8556053403,"35":5.5698658198,"36":4.0593780341,"37":3.2809326653,"38":6.3922598605,"39":4.3513059396,"40":4.5406866881,"41":3.9558904187,"42":4.3969853011,"43":3.7791672038,"44":3.3052018549,"45":3.6613852549,"46":3.7952622854,"47":3.7224403201,"48":3.9403300365,"49":4.3193403464},"asset_j":{"0":0.0,"1":3.8841284417,"2":4.1463875066,"3":4.2859919923,"4":4.5750208069,"5":4.4620782126,"6":4.5525787941,"7":4.6787670551,"8":5.053212504,"9":5.2824847945,"10":5.1897467231,"11":5.3213751234,"12":5.6523988624,"13":5.6824627526,"14":6.1399465195,"15":6.4041602288,"16":6.8889022171,"17":7.1658794945,"18":7.274850271,"19":7.1811168403,"20":7.2257032034,"21":7.2032026335,"22":7.3790209173,"23":7.2549961288,"24":6.8721662117,"25":6.5455591708,"26":6.3019426556,"27":6.34169788,"28":6.6272789082,"29":7.2682583122,"30":7.2915517658,"31":7.6338018811,"32":8.4167166802,"33":8.3123481151,"34":7.9173052216,"35":8.3568077919,"36":9.0013361126,"37":8.1670964877,"38":8.1078082254,"39":8.0572650861,"40":7.8368370221,"41":7.5399223409,"42":7.1157144279,"43":6.9611974487,"44":6.5194094671,"45":6.3814516489,"46":6.6127525395,"47":7.1018827658,"48":6.8881375273,"49":7.0034248182},"equity":{"0":735.5046480856,"1":727.7484922447,"2":724.8169058289,"3":725.9567914379,"4":730.6951706721,"5":715.7302474211,"6":707.3207149882,"7":690.8905905689,"8":683.9659192217,"9":702.4200734702,"10":714.2040927505,"11":690.6613995436,"12":697.9732402394,"13":691.0779915142,"14":676.3469232535,"15":694.1111132435,"16":707.7201209878,"17":701.5399312598,"18":670.3683547322,"19":694.3698934715,"20":694.3698934715,"21":696.4254675077,"22":667.9871268169,"23":692.3548299024,"24":654.0662880162,"25":639.2669610282,"26":659.0340453967,"27":674.1302812507,"28":668.7793874727,"29":679.7612277481,"30":657.7406873705,"31":667.1194113509,"32":641.6187550172,"33":670.1340574673,"34":664.2483250561,"35":660.0731554823,"36":649.0297852333,"37":654.4583700275,"38":644.4207654497,"39":627.8728860988,"40":646.483580913,"41":680.6105555422,"42":649.432670434,"43":666.9148565098,"44":635.2219736035,"45":654.0822744492,"46":663.2061832682,"47":662.997444062,"48":634.5386488693,"49":635.5027855692},"equity_borrowers":{"0":0.0,"1":4.4691520834,"2":0.0,"3":4.2058221612,"4":0.0,"5":14.8307447628,"6":28.4656603392,"7":12.1425831024,"8":26.406000744,"9":12.733024976,"10":12.3667095561,"11":-2.4482923289,"12":7.7326645504,"13":3.1874135343,"14":15.4087863773,"15":0.0,"16":0.0,"17":14.6971091727,"18":0.0,"19":0.0,"20":0.0,"21":12.8769458829,"22":28.031002063,"23":0.0,"24":0.0,"25":21.5817487855,"26":12.9986892686,"27":13.154800235,"28":15.4018690583,"29":0.0,"30":17.1038726989,"31":0.0,"32":-0.0785067002,"33":0.0,"34":0.0,"35":0.0,"36":26.1769911588,"37":0.0,"38":0.0,"39":16.356603803,"40":0.0,"41":0.0,"42":14.3901934394,"43":0.0,"44":0.0,"45":38.8572035685,"46":0.0,"47":12.4500736362,"48":17.5867306185,"49":0.0},"bankruptcies":{"0":2,"1":10,"2":5,"3":7,"4":12,"5":3,"6":5,"7":7,"8":11,"9":6,"10":4,"11":3,"12":6,"13":5,"14":5,"15":5,"16":5,"17":5,"18":5,"19":4,"20":1,"21":8,"22":7,"23":6,"24":5,"25":4,"26":11,"27":7,"28":5,"29":4,"30":2,"31":8,"32":3,"33":5,"34":0,"35":2,"36":6,"37":3,"38":5,"39":2,"40":5,"41":8,"42":4,"43":7,"44":7,"45":4,"46":6,"47":7,"48":4,"49":9},"potential_credit_channels":{"0":20,"1":27,"2":28,"3":29,"4":20,"5":26,"6":20,"7":26,"8":23,"9":27,"10":25,"11":25,"12":24,"13":22,"14":25,"15":25,"16":26,"17":26,"18":28,"19":24,"20":21,"21":29,"22":24,"23":25,"24":23,"25":23,"26":24,"27":25,"28":26,"29":19,"30":23,"31":23,"32":31,"33":24,"34":25,"35":23,"36":27,"37":27,"38":21,"39":21,"40":25,"41":28,"42":29,"43":30,"44":22,"45":29,"46":29,"47":24,"48":25,"49":28},"prob_change_lender":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"best_lender":{"0":7,"1":24,"2":10,"3":31,"4":38,"5":37,"6":37,"7":2,"8":29,"9":27,"10":21,"11":33,"12":33,"13":32,"14":17,"15":29,"16":18,"17":10,"18":41,"19":15,"20":22,"21":48,"22":37,"23":5,"24":7,"25":44,"26":39,"27":44,"28":6,"29":23,"30":39,"31":37,"32":22,"33":32,"34":3,"35":35,"36":26,"37":45,"38":45,"39":4,"40":24,"41":25,"42":24,"43":16,"44":16,"45":16,"46":49,"47":49,"48":8,"49":32},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.278351113,"2":0.206109412,"3":0.2172322857,"4":0.1482002998,"5":0.1524959672,"6":0.1102638974,"7":0.1808455197,"8":0.1737670043,"9":0.1767984724,"10":0.1283288613,"11":0.1127860451,"12":0.0725285397,"13":0.0888081074,"14":0.0916557888,"15":0.084141621,"16":0.0646239815,"17":0.0677952179,"18":0.0745998273,"19":0.0915315384,"20":0.1079412268,"21":0.0770458293,"22":0.0889729892,"23":0.0803803324,"24":0.0857158124,"25":0.1071701466,"26":0.1216193272,"27":0.1268300664,"28":0.0984104194,"29":0.07831592,"30":0.0805214391,"31":0.0630824343,"32":0.0568935469,"33":0.0703139407,"34":0.0615134851,"35":0.055417845,"36":0.0454575626,"37":0.057711932,"38":0.0856125869,"39":0.0911681201,"40":0.109890012,"41":0.1030297179,"42":0.1191180268,"43":0.0988452587,"44":0.168226495,"45":0.1845434858,"46":0.1670146425,"47":0.2019332933,"48":0.1723270937,"49":0.1266353332},"best_lender_clients":{"0":2,"1":3,"2":4,"3":3,"4":4,"5":3,"6":3,"7":4,"8":3,"9":4,"10":4,"11":5,"12":4,"13":4,"14":3,"15":3,"16":3,"17":4,"18":4,"19":3,"20":4,"21":4,"22":5,"23":5,"24":4,"25":4,"26":4,"27":4,"28":6,"29":4,"30":3,"31":3,"32":4,"33":4,"34":3,"35":4,"36":3,"37":4,"38":4,"39":4,"40":4,"41":3,"42":5,"43":4,"44":4,"45":4,"46":3,"47":3,"48":4,"49":4},"rationing":{"0":23.3619380212,"1":33.024465565,"2":40.8473410894,"3":39.2290432685,"4":84.6771236454,"5":24.8935017148,"6":33.9838037801,"7":55.2739828524,"8":29.6942702182,"9":39.7399462686,"10":19.7897300436,"11":64.788040212,"12":81.5537680207,"13":1.7403919449,"14":16.912453924,"15":24.0050032482,"16":20.2303322278,"17":20.8008779581,"18":12.5827335531,"19":33.1474534212,"20":9.4584126442,"21":26.7678946008,"22":32.8386006225,"23":20.043842539,"24":16.2478960002,"25":3.7167768253,"26":103.2987257815,"27":40.7715790714,"28":13.3092356964,"29":24.6660502849,"30":33.9442034238,"31":66.2948345559,"32":0.0,"33":39.1700785606,"34":1.8636376789,"35":27.4176276704,"36":0.8619497524,"37":61.5089881973,"38":36.1388459851,"39":14.1532266925,"40":0.0,"41":28.2298550649,"42":9.8869003509,"43":21.3620304208,"44":38.512250019,"45":36.3478170477,"46":17.9373417437,"47":5.2681506124,"48":20.2693570231,"49":30.1058327833},"leverage":{"0":0.0,"1":4.6844541121,"2":0.0,"3":1.7542936482,"4":0.0,"5":0.570622851,"6":0.5940196269,"7":-1.8640893061,"8":0.5293368549,"9":0.5982626954,"10":0.2675617806,"11":-5.8835312459,"12":0.4768312781,"13":1.9327014628,"14":0.7367391826,"15":0.0,"16":0.0,"17":0.0708953934,"18":0.0,"19":0.0,"20":0.0,"21":0.8002053409,"22":0.1407548554,"23":0.0,"24":0.0,"25":-1.6479682986,"26":0.900610132,"27":0.9663065602,"28":0.045017445,"29":0.0,"30":5.4006724961,"31":0.0,"32":-208.9930181132,"33":0.0,"34":0.0,"35":0.0,"36":0.4958463714,"37":0.0,"38":0.0,"39":2.1549349094,"40":0.0,"41":0.0,"42":0.3060184409,"43":0.0,"44":0.0,"45":0.8828993227,"46":0.0,"47":0.2725689308,"48":0.7908971949,"49":0.0},"systemic_leverage":{"0":0.0,"1":0.0936890822,"2":0.0,"3":0.035085873,"4":0.0,"5":0.011412457,"6":0.0237607851,"7":-0.0745635722,"8":0.0317602113,"9":0.0119652539,"10":0.0053512356,"11":-0.1176706249,"12":0.0095366256,"13":0.0386540293,"14":0.0294695673,"15":0.0,"16":0.0,"17":0.0014179079,"18":0.0,"19":0.0,"20":0.0,"21":0.0160041068,"22":0.0056301942,"23":0.0,"24":0.0,"25":-0.0988780979,"26":0.0180122026,"27":0.0193261312,"28":0.0009003489,"29":0.0,"30":0.2160268998,"31":0.0,"32":-4.1798603623,"33":0.0,"34":0.0,"35":0.0,"36":0.0198338549,"37":0.0,"38":0.0,"39":0.0861973964,"40":0.0,"41":0.0,"42":0.0061203688,"43":0.0,"44":0.0,"45":0.0529739594,"46":0.0,"47":0.0054513786,"48":0.0316358878,"49":0.0},"loans":{"0":null,"1":10.3943466348,"2":6.7145566961,"3":4.556049399,"4":22.1373411242,"5":4.8970580856,"6":12.2716110715,"7":12.9631370978,"8":12.2332342178,"9":8.1441407502,"10":14.1148342544,"11":14.4046044163,"12":7.2254546791,"13":9.436026165,"14":5.1878342636,"15":12.6782449906,"16":18.8876250744,"17":6.1660506946,"18":10.5560236101,"19":18.4834656012,"20":null,"21":17.4319342371,"22":12.1431894829,"23":20.1291473007,"24":15.0099954292,"25":12.7058240412,"26":10.485948644,"27":15.3579213721,"28":13.228410197,"29":29.1687193114,"30":5.0594565633,"31":3.5361035103,"32":10.0906162031,"33":null,"34":null,"35":11.8913034366,"36":13.9252215823,"37":null,"38":9.8588278001,"39":15.9562179859,"40":17.8360791322,"41":19.09612617,"42":4.1707051721,"43":12.9563809604,"44":7.5956984198,"45":10.1382873401,"46":18.2742853597,"47":7.7784828165,"48":5.6572054721,"49":2.4496039577},"reserves":{"0":138.5390070659,"1":149.3749740931,"2":151.9954880194,"3":158.3328041351,"4":159.6248613565,"5":164.8772774785,"6":168.207643321,"7":171.6100970663,"8":181.3902664365,"9":178.5330371621,"10":183.2799633931,"11":191.6858357754,"12":197.229705394,"13":214.864928565,"14":224.4317321116,"15":241.5153536591,"16":254.793471322,"17":261.0159044939,"18":253.5277500098,"19":257.0598875335,"20":254.42312748,"21":267.1919931192,"22":262.1416404753,"23":245.0633544181,"24":230.345461442,"25":222.0686208295,"26":225.0489625575,"27":236.9183501181,"28":263.162316076,"29":261.7278795683,"30":278.8553697706,"31":306.1214467461,"32":305.850264499,"33":288.0411269924,"34":305.207371112,"35":334.2371971151,"36":303.9438002787,"37":294.8845495766,"38":295.1896573233,"39":288.3214677352,"40":273.964970835,"41":258.4420799992,"42":253.5494601765,"43":235.0247416066,"44":228.0299979266,"45":240.4265560343,"46":258.7790940675,"47":252.7454355966,"48":254.0467764685,"49":266.6395254705},"deposits":{"0":6926.950353294,"1":7468.7487046546,"2":7599.7744009712,"3":7916.6402067574,"4":7981.243067823,"5":8243.8638739263,"6":8410.3821660479,"7":8580.5048533172,"8":9069.5133218236,"9":8926.6518581036,"10":9163.9981696542,"11":9584.2917887677,"12":9861.4852696986,"13":10743.2464282477,"14":11221.5866055793,"15":12075.7676829534,"16":12739.6735660977,"17":13050.7952246961,"18":12676.3875004901,"19":12852.9943766748,"20":12721.1563740017,"21":13359.5996559582,"22":13107.0820237641,"23":12253.1677209074,"24":11517.2730720979,"25":11103.4310414754,"26":11252.448127874,"27":11845.9175059035,"28":13158.1158038007,"29":13086.3939784134,"30":13942.7684885281,"31":15306.0723373069,"32":15292.5132249492,"33":14402.0563496177,"34":15260.368555598,"35":16711.8598557557,"36":15197.1900139358,"37":14744.2274788324,"38":14759.4828661643,"39":14416.0733867578,"40":13698.248541751,"41":12922.1039999619,"42":12677.4730088251,"43":11751.2370803295,"44":11401.4998963316,"45":12021.3278017163,"46":12938.9547033766,"47":12637.2717798313,"48":12702.3388234245,"49":13331.9762735227},"active_lenders":{"0":0,"1":5,"2":1,"3":3,"4":3,"5":2,"6":4,"7":4,"8":6,"9":2,"10":2,"11":1,"12":2,"13":4,"14":3,"15":2,"16":2,"17":3,"18":2,"19":1,"20":0,"21":4,"22":4,"23":2,"24":3,"25":5,"26":3,"27":3,"28":3,"29":1,"30":2,"31":1,"32":3,"33":0,"34":0,"35":1,"36":5,"37":0,"38":2,"39":3,"40":3,"41":3,"42":3,"43":4,"44":2,"45":4,"46":2,"47":6,"48":3,"49":3},"active_borrowers":{"0":0,"1":5,"2":2,"3":3,"4":5,"5":2,"6":4,"7":4,"8":8,"9":3,"10":2,"11":1,"12":2,"13":4,"14":4,"15":2,"16":2,"17":3,"18":3,"19":1,"20":0,"21":5,"22":5,"23":3,"24":3,"25":5,"26":4,"27":3,"28":3,"29":1,"30":2,"31":2,"32":3,"33":1,"34":0,"35":1,"36":5,"37":0,"38":2,"39":3,"40":3,"41":3,"42":3,"43":4,"44":2,"45":4,"46":3,"47":6,"48":4,"49":4},"prob_bankruptcy":{"0":0.0,"1":0.2138166745,"2":0.9509293708,"3":0.4199763477,"4":1.0383641717,"5":0.0,"6":0.4313855397,"7":0.1542610773,"8":0.3551456913,"9":0.8049058845,"10":0.3373348324,"11":0.3065610687,"12":0.6207112312,"13":0.4047396955,"14":0.3392811656,"15":0.4579860688,"16":0.4366235129,"17":0.3065610687,"18":0.6233692301,"19":0.7710090516,"20":0.0,"21":0.2272055145,"22":0.6435643549,"23":0.4061401031,"24":0.2272055145,"25":0.2973352807,"26":1.0074972685,"27":0.4657676811,"28":0.3243305217,"29":0.2272055145,"30":0.1653000448,"31":1.3402943131,"32":0.258893519,"33":1.7648188186,"34":0.0,"35":0.3959496808,"36":0.2199529005,"37":0.0,"38":0.176005715,"39":0.1770794627,"40":0.2684087752,"41":0.5558958605,"42":0.1770794627,"43":0.3707372716,"44":0.1770794627,"45":0.1600708486,"46":0.2481550848,"47":0.3358434845,"48":0.151446625,"49":1.0775903136},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'


    def setUp(self):
        model = interbank.Model()
        model.config.lender_change = self.ALGORITHM()
        model.log.define_log('ERROR')
        model.config.lender_change.set_parameter("p", self.P)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED)
        model.simulate_full()
        self.generated_now_values = model.finish()
        ## self.results.to_dict() and save the json to self.RESULTS_TO_COMPARE
        ## also        json.dumps(separators=(',', ':'), obj=self.results.to_json())

        # we also create a gdt file with a whole execution:
        model.configure(T=self.T_LONG)
        model.statistics.define_output_format('gdt')
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_shockedmarket')
        model.simulate_full(interactive=True)
        model.finish()
        os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.json')
        os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.png')

    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
