# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50


    ALGORITHM = interbank_lenderchange.ShockedMarket3
    P = 0.5

    SEED = 39393

    CONFIG = 'C_i0=30 D_i0=135 E_i0=15 L_i0=120 alfa=0.1 allow_replacement_of_bankrupted=True beta=5 chi=0.0015 mu=0.7 omega=0.55 phi=0.25 psi=0.0 r_i0=0.02 reintroduce_with_median=False reserves=0.02 rho=0.3 xi=0.9 '

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":18.9338636144,"1":9.8140351708,"2":134.046759783,"3":54.7412232756,"4":57.0999179422,"5":84.9728134305,"6":49.5702028896,"7":50.3310538253,"8":44.9633177484,"9":27.087219575,"10":26.3732588155,"11":74.7053011431,"12":149.7030422208,"13":70.2578439332,"14":92.9843781246,"15":36.6892793704,"16":91.9125574507,"17":49.6043906312,"18":138.6175617561,"19":40.9734226945,"20":54.9881394624,"21":29.4042036108,"22":47.6943065103,"23":23.0285719104,"24":59.2939139317,"25":38.4773511153,"26":48.850328031,"27":131.5430759932,"28":14.0353977084,"29":57.5027277078,"30":14.8064952708,"31":83.1659019348,"32":16.6952223263,"33":84.8081959825,"34":51.7332012329,"35":75.2675480324,"36":25.5311230675,"37":29.9680582663,"38":57.6361189054,"39":35.3299242105,"40":64.7084687118,"41":62.7597758684,"42":75.1437758613,"43":75.6285842153,"44":78.5242434206,"45":56.060965496,"46":33.0039092519,"47":30.2323897225,"48":49.4119195619,"49":61.9799564693},"liquidity":{"0":1139.9352212898,"1":1343.5742892631,"2":1382.3156286836,"3":1671.7685981461,"4":1759.821434595,"5":1965.7206308051,"6":2124.146241361,"7":1827.6910491794,"8":1991.645619579,"9":1963.069056704,"10":1808.7203048784,"11":1347.1494970262,"12":1435.6719775937,"13":1702.192399149,"14":1406.7907039142,"15":1346.9397263942,"16":1431.7695231995,"17":1522.657879901,"18":1015.2061378499,"19":1664.9627669011,"20":1994.023602344,"21":2389.4895405001,"22":1759.4694177861,"23":1977.4150800348,"24":1856.1303357523,"25":1974.2270576521,"26":2229.3879237964,"27":2238.4575366076,"28":2674.2998417059,"29":2634.0941641019,"30":2579.8368349088,"31":2403.5322272611,"32":2689.6803879406,"33":2205.9716709952,"34":2179.1724945274,"35":2379.2173262558,"36":2366.2347739894,"37":2275.968873623,"38":2147.6486199788,"39":2057.1365229846,"40":1699.1588600633,"41":1899.4536511632,"42":2061.1415527246,"43":2006.3267679696,"44":2339.2902127562,"45":2172.8774600207,"46":2671.2824218415,"47":2482.419946773,"48":2567.2708822254,"49":2718.1701987391},"interest_rate":{"0":0.02,"1":0.02,"2":0.02,"3":0.02,"4":0.02,"5":0.02,"6":0.02,"7":0.02,"8":0.02,"9":0.02,"10":0.02,"11":0.02,"12":0.02,"13":0.02,"14":0.02,"15":0.02,"16":0.02,"17":0.02,"18":0.02,"19":0.02,"20":0.02,"21":0.02,"22":0.02,"23":0.02,"24":0.02,"25":0.02,"26":0.02,"27":0.02,"28":0.02,"29":0.02,"30":0.02,"31":0.02,"32":0.02,"33":0.02,"34":0.02,"35":0.02,"36":0.02,"37":0.02,"38":0.02,"39":0.02,"40":0.02,"41":0.02,"42":0.02,"43":0.02,"44":0.02,"45":0.02,"46":0.02,"47":0.02,"48":0.02,"49":0.02},"asset_i":{"0":0.0,"1":143.864813974,"2":155.1855996729,"3":163.387624935,"4":145.023187433,"5":203.8311683964,"6":144.260406699,"7":171.5169001172,"8":161.1746090403,"9":185.7638290413,"10":162.3509459642,"11":175.097260247,"12":168.9327406439,"13":143.4482209663,"14":156.6312846183,"15":163.6728292601,"16":147.7268330005,"17":169.2108608343,"18":160.1524194739,"19":165.2852535465,"20":149.7038941224,"21":143.7805939208,"22":170.1090451017,"23":168.9108931597,"24":147.8423486886,"25":159.0488279329,"26":181.7272859448,"27":161.2428881003,"28":144.2488816855,"29":155.1169717546,"30":233.5220488031,"31":179.5129248765,"32":137.1689986859,"33":181.1063014708,"34":138.2765369902,"35":165.8145079581,"36":174.7372145808,"37":150.0049741063,"38":145.6014974123,"39":185.7610747806,"40":189.2800801177,"41":145.5219011535,"42":159.5266556489,"43":156.1376902995,"44":155.7298913232,"45":161.3579187676,"46":160.6337482785,"47":122.8792257009,"48":160.0841614816,"49":156.1575051338},"asset_j":{"0":0.0,"1":148.4552255958,"2":151.8933751298,"3":159.9098121659,"4":140.0677631795,"5":163.2897366829,"6":168.1068992686,"7":168.6030982922,"8":165.7329230753,"9":166.0613851719,"10":164.8594008111,"11":160.9219025325,"12":155.0561991984,"13":160.7945129764,"14":162.5933195731,"15":158.5577486014,"16":152.3160036581,"17":156.9003204542,"18":156.9632674369,"19":153.4682671669,"20":161.1005319513,"21":168.3405164031,"22":175.5388498734,"23":165.1718793369,"24":161.8053327474,"25":167.4339775744,"26":166.3551395709,"27":170.8370863552,"28":175.1434131725,"29":180.5818026214,"30":180.754276646,"31":179.9145304093,"32":177.6700112426,"33":180.1466546195,"34":173.6689604836,"35":160.1125061326,"36":177.6705065441,"37":162.7687970418,"38":168.3831985714,"39":173.5485969394,"40":170.068845433,"41":159.6254630566,"42":164.2052556134,"43":166.7599712806,"44":170.1199006751,"45":175.7852389636,"46":173.8707969277,"47":180.6616210144,"48":178.7420062081,"49":180.447592815},"equity":{"0":750.0,"1":713.2726743575,"2":668.1473832756,"3":705.0363083255,"4":667.1984886618,"5":662.3767308465,"6":649.422978346,"7":614.9729379985,"8":606.5111882216,"9":605.8163696924,"10":602.6077394522,"11":581.3141646718,"12":618.4900590487,"13":625.3713265414,"14":626.3160220433,"15":633.2253148351,"16":631.2461090479,"17":657.9822868984,"18":610.8030012713,"19":675.0377052973,"20":641.471722768,"21":622.9488269217,"22":638.3704680987,"23":644.6131555187,"24":629.1422413757,"25":644.1468602202,"26":621.8088426827,"27":629.7129138519,"28":618.7401712874,"29":624.7587120719,"30":627.3120214373,"31":664.0607612507,"32":659.4629799553,"33":664.6573117915,"34":680.9388540763,"35":660.7404628448,"36":665.488893161,"37":642.6278301191,"38":604.3517592568,"39":642.129529246,"40":629.5190942359,"41":651.0275901211,"42":624.1211862345,"43":640.770159747,"44":595.1731998869,"45":618.4611508852,"46":658.0261309714,"47":639.1548175446,"48":671.5286559725,"49":658.6636600758},"equity_borrowers":{"0":45.0,"1":56.0661363856,"2":124.8219254664,"3":160.8275665286,"4":149.4160514906,"5":102.2663850551,"6":72.6761998677,"7":95.3367500621,"8":61.4328377571,"9":44.888473692,"10":78.9508454147,"11":139.6642968346,"12":194.3150564721,"13":66.6160321511,"14":127.5953987649,"15":157.2900325711,"16":82.1621962255,"17":125.6037278658,"18":101.8075995491,"19":79.902856892,"20":97.5972514997,"21":30.5075834623,"22":103.3366484899,"23":72.2845052619,"24":89.1042413815,"25":91.8683776944,"26":62.219717985,"27":145.7983646849,"28":59.9427746065,"29":77.2909143744,"30":-10.4682696608,"31":178.4167140387,"32":59.960726051,"33":118.8191434056,"34":120.0038707893,"35":109.5201167527,"36":78.172219173,"37":130.7901409869,"38":74.7786051304,"39":47.354718879,"40":106.7641319962,"41":152.3568858313,"42":140.5649148744,"43":130.7454805549,"44":106.058710356,"45":81.123511366,"46":51.149371399,"47":-35.457509913,"48":71.9377165783,"49":112.332528046},"bankruptcies":{"0":11,"1":6,"2":14,"3":10,"4":8,"5":10,"6":7,"7":12,"8":6,"9":5,"10":5,"11":9,"12":15,"13":10,"14":12,"15":9,"16":16,"17":7,"18":15,"19":10,"20":10,"21":7,"22":11,"23":6,"24":14,"25":8,"26":8,"27":12,"28":7,"29":9,"30":10,"31":10,"32":7,"33":13,"34":11,"35":9,"36":8,"37":8,"38":11,"39":10,"40":13,"41":10,"42":11,"43":12,"44":9,"45":11,"46":6,"47":9,"48":9,"49":12},"potential_credit_channels":{"0":622,"1":586,"2":602,"3":574,"4":559,"5":596,"6":595,"7":602,"8":606,"9":592,"10":601,"11":602,"12":625,"13":625,"14":623,"15":641,"16":590,"17":612,"18":622,"19":629,"20":610,"21":628,"22":600,"23":606,"24":649,"25":617,"26":624,"27":627,"28":579,"29":641,"30":615,"31":632,"32":582,"33":623,"34":609,"35":601,"36":598,"37":619,"38":621,"39":579,"40":643,"41":624,"42":647,"43":589,"44":611,"45":622,"46":647,"47":627,"48":583,"49":598},"prob_change_lender":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"best_lender":{"0":49,"1":49,"2":49,"3":49,"4":49,"5":49,"6":49,"7":49,"8":48,"9":49,"10":48,"11":49,"12":49,"13":48,"14":49,"15":48,"16":49,"17":49,"18":49,"19":49,"20":49,"21":49,"22":49,"23":49,"24":49,"25":49,"26":49,"27":49,"28":49,"29":49,"30":49,"31":49,"32":49,"33":49,"34":49,"35":49,"36":48,"37":49,"38":49,"39":48,"40":49,"41":49,"42":49,"43":49,"44":48,"45":49,"46":49,"47":49,"48":49,"49":49},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.2949565809,"2":0.3860737664,"3":0.4227409954,"4":0.3476829036,"5":0.2998474685,"6":0.2040018545,"7":0.3307988925,"8":0.239084503,"9":0.2379699584,"10":0.3765186262,"11":0.3249861845,"12":0.3562015199,"13":0.259432446,"14":0.312139159,"15":0.241332003,"16":0.3295836703,"17":0.2101481289,"18":0.3289156506,"19":0.2660986956,"20":0.2526855854,"21":0.1941746154,"22":0.2435487249,"23":0.1940227257,"24":0.2613971599,"25":0.2179741689,"26":0.2131536168,"27":0.2287893494,"28":0.1855773951,"29":0.1825294183,"30":0.2031966952,"31":0.2968257945,"32":0.2096003762,"33":0.1772260801,"34":0.1718406647,"35":0.1157766248,"36":0.1560036847,"37":0.1229221433,"38":0.1265608737,"39":0.1063962909,"40":0.0972896521,"41":0.2126161943,"42":0.1884814226,"43":0.2992581338,"44":0.1892345079,"45":0.1720478747,"46":0.1909968257,"47":0.1976382389,"48":0.1410051239,"49":0.1801280433},"best_lender_clients":{"0":11,"1":13,"2":17,"3":13,"4":10,"5":11,"6":12,"7":9,"8":12,"9":13,"10":9,"11":13,"12":18,"13":9,"14":11,"15":7,"16":10,"17":14,"18":11,"19":9,"20":15,"21":15,"22":10,"23":13,"24":11,"25":13,"26":14,"27":12,"28":16,"29":14,"30":19,"31":10,"32":8,"33":12,"34":11,"35":11,"36":7,"37":13,"38":10,"39":9,"40":13,"41":11,"42":11,"43":11,"44":8,"45":8,"46":13,"47":10,"48":11,"49":14},"rationing":{"0":0.0,"1":0.0,"2":7.6298760957,"3":0.0,"4":0.0,"5":0.0,"6":4.3553865412,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":3.0423187848,"13":0.0,"14":10.0212292219,"15":0.0,"16":9.648176828,"17":0.0,"18":22.5992541227,"19":16.097530003,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":34.4652327411,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":3.9690224368,"37":0.0,"38":0.0,"39":0.0,"40":32.1875702031,"41":0.0,"42":0.0061496656,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":22.370013474,"48":12.8952151699,"49":0.0},"leverage":{"0":0.125108501,"1":0.0,"2":0.161805279,"3":0.0550549191,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0036936524,"12":0.0,"13":0.0266184078,"14":0.4725905921,"15":0.0546152689,"16":0.0040176362,"17":0.0,"18":0.0,"19":0.0307114289,"20":0.0,"21":0.0,"22":0.0025089786,"23":0.0083533339,"24":0.0,"25":0.0185550787,"26":0.0,"27":1.6655190367,"28":0.0,"29":0.0,"30":0.0,"31":0.0488536145,"32":0.0735601005,"33":0.1464649574,"34":0.128379787,"35":0.700752974,"36":0.0159321714,"37":0.0159663748,"38":0.3963797004,"39":0.0348179884,"40":0.0879564186,"41":0.1537226665,"42":0.1513935524,"43":0.1024140984,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0851398444,"49":0.0},"systemic_leverage":{"0":0.117601991,"1":0.0,"2":0.122972012,"3":0.0429428369,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0028071758,"12":0.0,"13":0.0234241988,"14":0.3686206618,"15":0.0415076044,"16":0.0032141089,"17":0.0,"18":0.0,"19":0.0251833717,"20":0.0,"21":0.0,"22":0.0021577216,"23":0.0071838672,"24":0.0,"25":0.0159573677,"26":0.0,"27":1.2991048486,"28":0.0,"29":0.0,"30":0.0,"31":0.037128747,"32":0.0676752925,"33":0.1230305642,"34":0.107839021,"35":0.5886324981,"36":0.0140203108,"37":0.0127730998,"38":0.3488141363,"39":0.0313361896,"40":0.0721242633,"41":0.1199036799,"42":0.1120312288,"43":0.0839795606,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0732202662,"49":0.0},"num_of_rationed":{"0":0,"1":0,"2":1,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":1,"15":0,"16":2,"17":0,"18":3,"19":2,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":2,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":3,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":1,"48":1,"49":0},"loans":{"0":8.9840603931,"1":9.5666114317,"2":20.0570426929,"3":11.4135102207,"4":9.0955471239,"5":16.9945626861,"6":8.2617004816,"7":9.4599432954,"8":11.9312351378,"9":11.7172889882,"10":14.8580131618,"11":14.0617688275,"12":15.6748719145,"13":16.2421954074,"14":14.9291395338,"15":11.1443558442,"16":16.2645360408,"17":13.3439826523,"18":15.3386571485,"19":8.1677290503,"20":8.4492949918,"21":12.8755574585,"22":8.7172583047,"23":6.2059487847,"24":12.5772820833,"25":11.480697137,"26":13.4296695064,"27":14.7258198972,"28":7.4027793501,"29":15.4716118193,"30":7.6711605348,"31":12.1437714945,"32":8.5446851052,"33":11.9400576162,"34":11.2452208514,"35":12.7377246255,"36":8.9789414883,"37":5.5616027474,"38":11.0627760971,"39":7.0659848421,"40":16.5246227848,"41":11.5366275481,"42":11.5172825134,"43":12.6532802905,"44":10.9446142912,"45":12.0938908338,"46":14.019699537,"47":16.577995818,"48":10.904334049,"49":12.3861103527},"c":{"0":138.4758851859,"1":148.440845158,"2":156.2955096341,"3":137.2503968972,"4":159.5409083449,"5":164.2746511997,"6":164.7585907029,"7":161.8266220832,"8":162.1104114699,"9":160.8923851333,"10":157.20565741,"11":151.5071796926,"12":157.045787158,"13":158.822654018,"14":154.9369765109,"15":148.3383757996,"16":150.8852599902,"17":153.2508714569,"18":150.0908974214,"19":157.3457798477,"20":164.1773322977,"21":171.2798597374,"22":161.2669590092,"23":155.162985309,"24":163.5289997483,"25":162.2755166457,"26":166.7277844037,"27":171.1550122672,"28":176.1929743668,"29":176.0874336257,"30":175.6396656155,"31":173.2412032786,"32":175.6452482953,"33":167.5075651831,"34":153.0826273526,"35":173.4067121369,"36":159.0434867088,"37":164.4242233282,"38":169.4101588124,"39":165.9676755557,"40":143.6162554578,"41":136.2865482952,"42":150.4401021401,"43":166.0128290879,"44":171.6225275651,"45":169.6390496899,"46":175.9563914511,"47":174.4153619062,"48":175.9458316991,"49":181.3166449655},"reserves":{"0":106.7245784464,"1":121.2441896586,"2":95.6900295672,"3":115.4860847089,"4":118.5355679472,"5":120.7150054294,"6":131.8596616512,"7":113.055592631,"8":133.2695099419,"9":134.2978470304,"10":130.8688960911,"11":107.4296029865,"12":95.387945677,"13":115.4645278443,"14":101.8234921768,"15":107.5886239613,"16":96.3162427504,"17":120.8319750489,"18":84.2709656238,"19":118.4682470228,"20":122.7667062309,"21":134.6016577224,"22":110.844421594,"23":132.9857216472,"24":110.5227594435,"25":125.4073908522,"26":132.0468358559,"27":119.7582570817,"28":143.4232715028,"29":137.0769731875,"30":133.6536176619,"31":125.8814947746,"32":144.3415342496,"33":117.0780018097,"34":126.868805828,"35":128.8794095018,"36":137.0513968974,"37":134.5510075829,"38":115.9411090785,"39":123.198483189,"40":107.8528159381,"41":116.8412364254,"42":119.9623366322,"43":114.6293943387,"44":128.8143548052,"45":124.4784996602,"46":147.5429942707,"47":136.8423542344,"48":139.2029461648,"49":133.848654762},"deposits":{"0":5336.2289223197,"1":6062.2094829306,"2":4784.5014783602,"3":5774.3042354463,"4":5926.778397361,"5":6035.7502714682,"6":6592.9830825582,"7":5652.7796315495,"8":6663.4754970931,"9":6714.8923515181,"10":6543.4448045537,"11":5371.4801493241,"12":4769.3972838495,"13":5773.2263922157,"14":5091.1746088421,"15":5379.4311980641,"16":4815.8121375211,"17":6041.5987524454,"18":4213.5482811907,"19":5923.4123511406,"20":6138.3353115427,"21":6730.08288612,"22":5542.2210797001,"23":6649.2860823583,"24":5526.137972174,"25":6270.3695426103,"26":6602.3417927967,"27":5987.912854085,"28":7171.1635751395,"29":6853.8486593742,"30":6682.6808830938,"31":6294.0747387291,"32":7217.0767124782,"33":5853.9000904868,"34":6343.4402914,"35":6443.9704750875,"36":6852.5698448706,"37":6727.550379143,"38":5797.0554539273,"39":6159.9241594502,"40":5392.6407969057,"41":5842.0618212691,"42":5998.1168316122,"43":5731.4697169332,"44":6440.7177402594,"45":6223.9249830098,"46":7377.149713537,"47":6842.1177117185,"48":6960.1473082406,"49":6692.4327381009},"psi":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"psi_lenders":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"potential_lenders":{"0":21,"1":26,"2":25,"3":29,"4":21,"5":24,"6":30,"7":20,"8":22,"9":20,"10":22,"11":22,"12":24,"13":20,"14":19,"15":16,"16":21,"17":19,"18":25,"19":21,"20":26,"21":30,"22":17,"23":22,"24":24,"25":22,"26":27,"27":23,"28":26,"29":21,"30":26,"31":18,"32":24,"33":21,"34":20,"35":26,"36":22,"37":21,"38":22,"39":20,"40":21,"41":20,"42":19,"43":20,"44":22,"45":19,"46":27,"47":25,"48":24,"49":21},"active_lenders":{"0":3,"1":5,"2":8,"3":8,"4":9,"5":5,"6":6,"7":6,"8":4,"9":3,"10":6,"11":8,"12":12,"13":5,"14":10,"15":9,"16":7,"17":8,"18":10,"19":9,"20":7,"21":3,"22":7,"23":6,"24":6,"25":5,"26":4,"27":10,"28":4,"29":4,"30":4,"31":8,"32":3,"33":8,"34":8,"35":8,"36":5,"37":10,"38":6,"39":5,"40":6,"41":9,"42":10,"43":7,"44":8,"45":5,"46":4,"47":2,"48":6,"49":7},"active_borrowers":{"0":3,"1":5,"2":12,"3":11,"4":10,"5":7,"6":6,"7":7,"8":5,"9":3,"10":6,"11":12,"12":16,"13":6,"14":11,"15":12,"16":10,"17":10,"18":10,"19":9,"20":7,"21":3,"22":7,"23":7,"24":7,"25":7,"26":5,"27":11,"28":4,"29":6,"30":4,"31":12,"32":4,"33":8,"34":8,"35":8,"36":6,"37":10,"38":6,"39":5,"40":8,"41":11,"42":13,"43":9,"44":10,"45":7,"46":4,"47":3,"48":7,"49":8},"prob_bankruptcy":{"0":0.1351939284,"1":0.4406793794,"2":0.0288835337,"3":0.0307555097,"4":0.0917275704,"5":0.0264403561,"6":0.0160264012,"7":0.0035322662,"8":0.0037941807,"9":0.0141846256,"10":0.3435568967,"11":0.1710192453,"12":0.1735714685,"13":0.0252302564,"14":0.0627519087,"15":0.203478142,"16":0.1187488337,"17":0.3459847145,"18":0.0761570873,"19":0.0773407341,"20":0.0280438648,"21":0.0297830472,"22":0.0200204254,"23":0.311548951,"24":0.0190228352,"25":0.0739178809,"26":0.0919998842,"27":0.0162102219,"28":0.0240417419,"29":0.1258970747,"30":0.0201788829,"31":0.0195325709,"32":0.0439372049,"33":0.0160924486,"34":0.1118437364,"35":0.0772716607,"36":0.0377689054,"37":0.1090624325,"38":0.131322962,"39":0.0127709902,"40":0.1418057864,"41":0.1590398513,"42":0.1150902409,"43":0.1750724971,"44":0.1186672318,"45":0.0408807372,"46":0.3955106085,"47":0.0244607662,"48":0.0095943817,"49":0.1124366933},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'
    maxDiff = None

    def setUp(self):
        model = interbank.Model()
        model.config.lender_change = self.ALGORITHM()
        model.log.define_log('ERROR')
        model.config.lender_change.set_parameter("p", self.P)
        model.configure_json(self.CONFIG)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_shockedmarket')
        model.simulate_full()
        self.generated_now_values = model.finish()
        os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.json')
        os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.png')


    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
