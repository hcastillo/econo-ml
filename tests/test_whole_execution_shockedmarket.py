# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange


class WholeExecution(unittest.TestCase):
    N = 50
    T = 50
    T_LONG = 1000

    maxDiff = None

    ALGORITHM = interbank_lenderchange.ShockedMarket
    P = 0.5

    SEED = 39393

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":0.0,"1":49.577988429,"2":0.0,"3":8.7054840914,"4":21.6136941256,"5":2.8846433151,"6":43.7295841394,"7":37.0552886917,"8":18.5820420527,"9":0.0,"10":24.9208096794,"11":14.6695351428,"12":0.0,"13":9.2294790311,"14":17.1980717926,"15":20.7368393677,"16":12.7082551664,"17":14.1712567518,"18":1.034455847,"19":0.0,"20":0.0,"21":36.9067657494,"22":40.1463250044,"23":8.0430516406,"24":34.7498816761,"25":37.8360691597,"26":0.8442434323,"27":43.6585032312,"28":33.5624608233,"29":29.1687193114,"30":0.0,"31":14.3862248316,"32":19.7516507994,"33":0.0,"34":0.0,"35":0.0,"36":42.297277643,"37":0.0,"38":4.8347087237,"39":0.0,"40":14.4399295485,"41":21.5900867599,"42":0.0,"43":2.1961112064,"44":52.1674756256,"45":0.0,"46":5.6914828955,"47":17.4152246283,"48":26.0774451434,"49":2.6599612048},"liquidity":{"0":1720.5021386348,"1":2415.3819978925,"2":2602.6577287047,"3":2964.1842959655,"4":3009.2206183215,"5":3364.3644019167,"6":3671.8789292601,"7":3983.5654639025,"8":4481.8119292585,"9":4778.4079725199,"10":4945.7628094065,"11":5481.0489605703,"12":5430.8024194497,"13":6404.4787371469,"14":6857.282777406,"15":7671.9076291816,"16":8638.1045350457,"17":9187.6223145531,"18":8954.1116883185,"19":10756.293270386,"20":10510.6724031671,"21":11260.1117808203,"22":10807.0886403488,"23":10473.7328824846,"24":10211.985046718,"25":9197.1479653787,"26":8926.7874002748,"27":9459.6944527676,"28":10852.4624093899,"29":11183.0101390883,"30":12585.6410280278,"31":14721.1409421312,"32":16110.8232346301,"33":13877.2460869129,"34":15260.5995581204,"35":15971.2740473432,"36":14840.2551525118,"37":14367.2195451481,"38":14674.894418275,"39":15321.1724068093,"40":13309.2125335859,"41":13291.7631462269,"42":13675.7415727,"43":13710.9933624412,"44":12437.0947262766,"45":12558.0778899968,"46":13948.1650121409,"47":13365.8750239584,"48":13641.597413166,"49":14129.8190089743},"interest_rate":{"0":null,"1":0.0718778375,"2":null,"3":0.4142350917,"4":0.065779106,"5":0.02,"6":0.9611589341,"7":0.6433592906,"8":0.3973561423,"9":null,"10":1.1097665287,"11":0.2308057669,"12":0.034149259,"13":0.03831654,"14":1.0617417275,"15":0.4233317599,"16":0.7171467205,"17":0.4218904675,"18":0.4183722388,"19":null,"20":null,"21":0.8841593044,"22":5.4121137063,"23":0.4319187302,"24":0.4273369607,"25":0.8213020505,"26":0.4323959819,"27":0.5205526192,"28":10.3940395354,"29":0.1889320525,"30":0.0519519951,"31":0.0533412472,"32":0.1553036433,"33":null,"34":null,"35":0.2239773192,"36":0.0485402123,"37":null,"38":0.0603921242,"39":0.0150877233,"40":0.0409500733,"41":0.0644910594,"42":0.0642404476,"43":0.047225262,"44":0.037297818,"45":0.0679598902,"46":0.0323051818,"47":0.0196609628,"48":0.525264956,"49":0.0581761281},"asset_i":{"0":0.0,"1":2.3045522186,"2":0.0,"3":2.4843617581,"4":2.7246126902,"5":2.7045032814,"6":2.8429601577,"7":2.8211960431,"8":3.0650943706,"9":0.0,"10":3.1210798052,"11":3.778356279,"12":3.3696544056,"13":3.6654081334,"14":3.8651751055,"15":4.5886499762,"16":4.6384547722,"17":3.348335117,"18":4.1362615025,"19":0.0,"20":0.0,"21":5.3407671755,"22":4.6977068954,"23":4.199760335,"24":3.788492503,"25":3.82566744,"26":4.4051518322,"27":4.2981353072,"28":5.2635351746,"29":6.0549452649,"30":5.986307399,"31":5.6639088819,"32":7.3168715058,"33":0.0,"34":0.0,"35":5.9908100803,"36":4.7675828412,"37":0.0,"38":8.8237734549,"39":6.1297748048,"40":5.9578224209,"41":5.5863857979,"42":6.6941090734,"43":6.435606588,"44":3.6467318041,"45":6.2307811785,"46":5.8511280277,"47":6.0529173439,"48":5.0780338646,"49":5.6298382486},"asset_j":{"0":null,"1":3.8746320687,"2":null,"3":4.3730824835,"4":4.5299738093,"5":4.524864563,"6":4.7907542898,"7":4.9416722127,"8":5.4294759635,"9":null,"10":5.5472180587,"11":5.711464672,"12":5.8859446588,"13":5.9392024303,"14":6.3713790262,"15":6.9430051809,"16":7.3464338382,"17":7.7654826904,"18":8.0540149361,"19":null,"20":null,"21":8.7499779779,"22":9.1212113756,"23":8.9133153211,"24":8.6504012196,"25":8.5828074543,"26":8.1420114175,"27":7.9839641778,"28":8.1104437921,"29":8.8469160558,"30":8.9127651086,"31":9.5063326789,"32":10.6891425225,"33":null,"34":null,"35":10.8703704754,"36":11.163741359,"37":null,"38":10.5229943059,"39":10.5757206873,"40":10.8893825323,"41":9.8883069772,"42":9.9336011653,"43":10.1262966583,"44":10.0181905513,"45":9.5703193569,"46":9.5845554917,"47":10.2818662935,"48":9.9954603104,"49":10.1369967587},"equity":{"0":null,"1":681.2671489094,"2":null,"3":620.0686660229,"4":646.4944222679,"5":618.1367838382,"6":641.4169374497,"7":507.1949140474,"8":524.5916464378,"9":null,"10":528.3443327797,"11":495.2242140269,"12":524.2148576608,"13":597.7850614941,"14":558.5217846673,"15":544.7969655903,"16":541.7348552295,"17":571.5155344006,"18":595.9971758453,"19":null,"20":null,"21":586.4896197178,"22":542.0866383639,"23":545.0849599172,"24":575.3995991955,"25":551.971314677,"26":440.5943863395,"27":500.3272259678,"28":537.0734931501,"29":538.6651762788,"30":491.5113755401,"31":416.9533833621,"32":559.5949706918,"33":null,"34":null,"35":584.8279164848,"36":581.8070333746,"37":null,"38":501.278953631,"39":586.1819646106,"40":577.9635559862,"41":531.3158568083,"42":534.1089394438,"43":513.5464254415,"44":412.8910157541,"45":509.1276078424,"46":538.8016854492,"47":518.4541884675,"48":428.7955116165,"49":480.6888783211},"equity_borrowers":{"0":null,"1":54.567993061,"2":null,"3":21.9202774706,"4":57.2240729104,"5":30.0,"6":26.4402867446,"7":32.8094930196,"8":60.0,"9":null,"10":15.9170666482,"11":25.3699025553,"12":1.4664139913,"13":45.0,"14":19.9833306199,"15":20.1765007725,"16":38.485426771,"17":15.0,"18":15.0,"19":null,"20":null,"21":53.5254202244,"22":22.0158262606,"23":30.0,"24":54.2418193642,"25":23.677385968,"26":15.0,"27":42.2969117636,"28":-15.5020669009,"29":15.0,"30":15.0,"31":15.0697425257,"32":27.2930963035,"33":null,"34":null,"35":11.920548515,"36":4.878015778,"37":null,"38":15.0,"39":30.0,"40":44.7320642791,"41":30.0,"42":20.2167093424,"43":30.0,"44":30.0,"45":15.0,"46":30.0,"47":15.0,"48":44.4363728343,"49":15.0},"bankruptcies":{"0":6,"1":12,"2":4,"3":8,"4":8,"5":6,"6":7,"7":7,"8":7,"9":8,"10":6,"11":7,"12":5,"13":5,"14":2,"15":4,"16":4,"17":6,"18":4,"19":4,"20":2,"21":5,"22":6,"23":5,"24":5,"25":4,"26":5,"27":7,"28":3,"29":4,"30":3,"31":6,"32":6,"33":3,"34":3,"35":2,"36":3,"37":3,"38":6,"39":2,"40":4,"41":5,"42":6,"43":3,"44":8,"45":3,"46":1,"47":2,"48":8,"49":3},"potential_credit_channels":{"0":20,"1":27,"2":28,"3":29,"4":20,"5":26,"6":20,"7":26,"8":23,"9":27,"10":25,"11":25,"12":24,"13":22,"14":25,"15":25,"16":26,"17":26,"18":28,"19":24,"20":21,"21":29,"22":24,"23":25,"24":23,"25":23,"26":24,"27":25,"28":26,"29":19,"30":23,"31":23,"32":31,"33":24,"34":25,"35":23,"36":27,"37":27,"38":21,"39":21,"40":25,"41":28,"42":29,"43":30,"44":22,"45":29,"46":29,"47":24,"48":25,"49":28},"prob_change_lender":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"best_lender":{"0":7,"1":24,"2":10,"3":31,"4":38,"5":37,"6":37,"7":2,"8":29,"9":27,"10":21,"11":33,"12":33,"13":32,"14":17,"15":29,"16":18,"17":10,"18":41,"19":15,"20":22,"21":48,"22":37,"23":5,"24":7,"25":44,"26":39,"27":44,"28":6,"29":23,"30":39,"31":37,"32":22,"33":32,"34":3,"35":35,"36":26,"37":45,"38":45,"39":4,"40":24,"41":25,"42":24,"43":16,"44":16,"45":16,"46":49,"47":49,"48":8,"49":32},"potential_lenders":{"0":23,"1":27,"2":18,"3":23,"4":23,"5":31,"6":33,"7":26,"8":23,"9":25,"10":24,"11":20,"12":26,"13":29,"14":26,"15":26,"16":28,"17":24,"18":32,"19":33,"20":27,"21":27,"22":26,"23":21,"24":22,"25":27,"26":20,"27":22,"28":28,"29":25,"30":22,"31":24,"32":28,"33":22,"34":26,"35":29,"36":28,"37":28,"38":23,"39":29,"40":27,"41":27,"42":20,"43":26,"44":20,"45":27,"46":29,"47":24,"48":24,"49":25},"potential_borrowers":{"0":27,"1":23,"2":32,"3":27,"4":27,"5":19,"6":17,"7":24,"8":27,"9":25,"10":26,"11":30,"12":24,"13":21,"14":24,"15":24,"16":22,"17":26,"18":18,"19":17,"20":23,"21":23,"22":24,"23":29,"24":28,"25":23,"26":30,"27":28,"28":22,"29":25,"30":28,"31":26,"32":22,"33":28,"34":24,"35":21,"36":22,"37":22,"38":27,"39":21,"40":23,"41":23,"42":30,"43":24,"44":30,"45":23,"46":21,"47":26,"48":26,"49":25},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.287574377,"2":0.2261796609,"3":0.2310780982,"4":0.1760023425,"5":0.162026087,"6":0.1230644572,"7":0.2053316813,"8":0.2061556424,"9":0.2132823706,"10":0.1655282367,"11":0.1370672753,"12":0.0880303222,"13":0.1009439206,"14":0.1063494169,"15":0.0971365993,"16":0.0752071337,"17":0.0785685709,"18":0.0874581679,"19":0.1265979458,"20":0.1334152501,"21":0.112193742,"22":0.1236104883,"23":0.1126870363,"24":0.1264781755,"25":0.1109370388,"26":0.1638687055,"27":0.1306721035,"28":0.1425122049,"29":0.1083569392,"30":0.1151560068,"31":0.0923628891,"32":0.0838331722,"33":0.0825364603,"34":0.094499719,"35":0.0859653254,"36":0.0670121373,"37":0.0874891484,"38":0.1174525024,"39":0.1377082026,"40":0.1017378099,"41":0.152795848,"42":0.1210699497,"43":0.0936522039,"44":0.0672293071,"45":0.0715346425,"46":0.0911728299,"47":0.0814000978,"48":0.0667794482,"49":0.0706803923},"best_lender_clients":{"0":2,"1":3,"2":4,"3":3,"4":4,"5":3,"6":3,"7":4,"8":3,"9":4,"10":4,"11":5,"12":4,"13":4,"14":3,"15":3,"16":3,"17":4,"18":4,"19":3,"20":4,"21":4,"22":5,"23":5,"24":4,"25":4,"26":4,"27":4,"28":6,"29":4,"30":3,"31":3,"32":4,"33":4,"34":3,"35":4,"36":3,"37":4,"38":4,"39":4,"40":4,"41":3,"42":5,"43":4,"44":4,"45":4,"46":3,"47":3,"48":4,"49":4},"rationing":{"0":23.3619380212,"1":19.6049595571,"2":34.7442094476,"3":25.7935874784,"4":26.5437648885,"5":24.8935017148,"6":4.7455387482,"7":43.4021612474,"8":25.4588671737,"9":24.5631034258,"10":28.4195014702,"11":44.4344144296,"12":37.675642513,"13":1.7403919449,"14":8.9606333281,"15":16.1780229145,"16":20.5710226554,"17":12.3032551763,"18":0.0,"19":17.0844482037,"20":9.4584126442,"21":10.4084446918,"22":12.911348567,"23":0.0,"24":0.0,"25":4.3367656047,"26":38.7979987486,"27":21.518459939,"28":0.0,"29":10.7186620161,"30":21.6848731362,"31":54.2562737992,"32":0.0,"33":36.4922465702,"34":1.3197649221,"35":0.0,"36":2.5164296673,"37":54.3903195936,"38":35.2900437515,"39":0.0,"40":0.0,"41":21.5583471863,"42":11.1084174454,"43":19.9593548375,"44":44.9985026241,"45":0.0,"46":0.0,"47":0.0,"48":26.7059140705,"49":19.1272472524},"leverage":{"0":null,"1":0.3147502751,"2":null,"3":0.5852943083,"4":1.1839219652,"5":0.3782468392,"6":3.5634560849,"7":1.1652276052,"8":0.7216203439,"9":null,"10":3.5331844659,"11":1.1874665466,"12":7.3401734446,"13":0.4072919212,"14":0.199009786,"15":0.3457527009,"16":0.6292605557,"17":0.9447504501,"18":0.0689637231,"19":null,"20":null,"21":1.282258926,"22":5.916870941,"23":0.4651818319,"24":0.6863017427,"25":1.6337201381,"26":0.0562828955,"27":1.3147624604,"28":3.4559776372,"29":1.9445812874,"30":0.4846628991,"31":0.2422768625,"32":0.7644381346,"33":null,"34":null,"35":0.9975466667,"36":0.2639313518,"37":null,"38":0.3223139149,"39":0.6067619518,"40":0.37769163,"41":0.7196695587,"42":0.4224420109,"43":0.9114421693,"44":0.1183582185,"45":0.3778816641,"46":0.5705655487,"47":1.1610149752,"48":1.5897742592,"49":0.177330747},"loans":{"0":null,"1":10.3943466348,"2":null,"3":4.3527420457,"4":17.3504935054,"5":5.6737025874,"6":19.1356819859,"7":13.5125622129,"8":10.824305159,"9":null,"10":15.557155912,"11":14.5370697795,"12":10.7637330377,"13":6.1093788184,"14":5.9598744744,"15":8.1510616398,"16":7.4312648101,"17":14.1712567518,"18":1.034455847,"19":null,"20":null,"21":16.6253958316,"22":18.1490918715,"23":6.9777274783,"24":9.0000612239,"25":18.9180345798,"26":0.8442434323,"27":18.7900243323,"28":9.2623967772,"29":29.1687193114,"30":7.2699434858,"31":13.6343551142,"32":9.8758253997,"33":null,"34":null,"35":11.8913034366,"36":21.1486388215,"37":null,"38":4.8347087237,"39":9.1014292763,"40":5.6244342996,"41":10.79504338,"42":3.6398348635,"43":13.6716325401,"44":18.456385796,"45":5.6682249611,"46":8.5584832309,"47":17.4152246283,"48":10.9068960115,"49":2.6599612048},"reserves":{"0":142.054084939,"1":157.2192858276,"2":160.8593320942,"3":168.1273027758,"4":169.4136830537,"5":176.5380493464,"6":183.9835080784,"7":190.9260407043,"8":200.4265640044,"9":206.0757652827,"10":210.2548789546,"11":221.2258179676,"12":219.9841818727,"13":240.1995415999,"14":249.69770124,"15":266.3883099527,"16":285.8995269708,"17":297.3130009243,"18":292.6485878178,"19":329.4278037783,"20":324.2447243888,"21":340.2479609068,"22":331.4350635748,"23":324.3441695906,"24":319.2156892256,"25":299.1367158174,"26":293.0379828058,"27":304.5995710951,"28":332.4805111385,"29":339.4389625542,"30":367.5926568572,"31":411.3680418775,"32":440.0888047846,"33":394.5055976884,"34":422.3836765841,"35":436.912171578,"36":413.8306818842,"37":404.1416425469,"38":410.3538281256,"39":423.4725692004,"40":382.3375695239,"41":382.4220735934,"42":390.2565379449,"43":391.4320423059,"44":365.0080595292,"45":366.9353790052,"46":395.292469947,"47":383.6663346044,"48":388.9305314967,"49":398.8853047378},"deposits":{"0":7102.7042469491,"1":7860.9642913815,"2":8042.9666047086,"3":8406.3651387906,"4":8470.6841526849,"5":8826.9024673184,"6":9199.1754039213,"7":9546.3020352168,"8":10021.3282002201,"9":10303.7882641334,"10":10512.7439477278,"11":11061.2908983815,"12":10999.2090936331,"13":12009.9770799932,"14":12484.8850620013,"15":13319.415497635,"16":14294.9763485382,"17":14865.6500462129,"18":14632.4293908887,"19":16471.3901889168,"20":16212.2362194422,"21":17012.3980453402,"22":16571.753178742,"23":16217.2084795316,"24":15960.7844612818,"25":14956.8357908694,"26":14651.89914029,"27":15229.9785547571,"28":16624.0255569232,"29":16971.9481277089,"30":18379.632842862,"31":20568.4020938757,"32":22004.4402392321,"33":19725.2798844186,"34":21119.183829204,"35":21845.608578898,"36":20691.5340942079,"37":20207.0821273447,"38":20517.6914062786,"39":21173.6284600208,"40":19116.8784761974,"41":19121.1036796678,"42":19512.8268972466,"43":19571.6021152963,"44":18250.4029764605,"45":18346.7689502612,"46":19764.6234973484,"47":19183.3167302182,"48":19446.5265748367,"49":19944.2652368905},"active_lenders":{"0":0,"1":5,"2":0,"3":2,"4":3,"5":2,"6":3,"7":3,"8":3,"9":0,"10":2,"11":2,"12":1,"13":3,"14":3,"15":3,"16":3,"17":1,"18":1,"19":0,"20":0,"21":3,"22":3,"23":2,"24":4,"25":2,"26":1,"27":3,"28":4,"29":1,"30":1,"31":1,"32":2,"33":0,"34":0,"35":1,"36":2,"37":0,"38":1,"39":2,"40":3,"41":2,"42":2,"43":2,"44":2,"45":1,"46":2,"47":1,"48":4,"49":1},"active_borrowers":{"0":0,"1":5,"2":0,"3":2,"4":4,"5":2,"6":3,"7":3,"8":4,"9":0,"10":2,"11":2,"12":1,"13":3,"14":3,"15":3,"16":3,"17":1,"18":1,"19":0,"20":0,"21":4,"22":3,"23":2,"24":4,"25":2,"26":1,"27":3,"28":4,"29":1,"30":1,"31":1,"32":2,"33":0,"34":0,"35":1,"36":2,"37":0,"38":1,"39":2,"40":3,"41":2,"42":2,"43":2,"44":2,"45":1,"46":2,"47":1,"48":4,"49":1},"prob_bankruptcy":{"0":0.0,"1":0.2724267592,"2":0.0,"3":0.2693240843,"4":0.0462654515,"5":0.0,"6":0.4124380723,"7":0.2709001551,"8":0.0,"9":0.0,"10":0.3431036716,"11":0.1543365815,"12":0.0,"13":0.0,"14":0.5559259862,"15":0.5516333162,"16":0.144768294,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.1079096629,"22":0.5107594164,"23":0.0,"24":0.0959696773,"25":0.2107538011,"26":0.0,"27":0.0600686275,"28":1.2583677817,"29":0.0,"30":0.0,"31":1.8396561743,"32":0.0902301232,"33":0.0,"34":0.0,"35":0.0,"36":0.8373994741,"37":0.0,"38":0.0,"39":0.0,"40":0.0059541271,"41":0.0,"42":0.3261096886,"43":0.0,"44":1.3537248231,"45":0.0,"46":0.0,"47":0.0,"48":0.2854082966,"49":0.0},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'

    def setUp(self):
        model = interbank.Model()
        model.config.lender_change = self.ALGORITHM()
        model.config.lender_change.set_parameter("p", self.P)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED)
        model.simulate_full()
        self.generated_now_values = model.finish()
        ## self.results.to_dict() and save the json to self.RESULTS_TO_COMPARE
        ## also        json.dumps(separators=(',', ':'), obj=self.results.to_json())

        # we also create a gdt file with a whole execution:
        model.configure(T=self.T_LONG)
        model.statistics.define_output_format('gdt')
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_shockedmarket')
        model.simulate_full(interactive=True)
        model.finish()

    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
