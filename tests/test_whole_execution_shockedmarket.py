# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50
    T_LONG = 1000

    maxDiff = None

    ALGORITHM = interbank_lenderchange.ShockedMarket
    P = 0.5

    SEED = 39393

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":0.0,"1":46.1101033865,"2":44.1195657071,"3":11.0417155226,"4":96.8584671946,"5":1.3313543116,"6":37.1027879109,"7":43.6062897346,"8":52.2773141612,"9":18.9107754308,"10":24.9208096794,"11":0.0,"12":19.0800009521,"13":31.9988219917,"14":8.5730663189,"15":30.8248435537,"16":22.5534234071,"17":17.5771149817,"18":21.1120472202,"19":27.4390487884,"20":0.0,"21":60.0630233808,"22":83.0326265316,"23":8.0430516406,"24":59.4196446182,"25":22.4983575815,"26":36.9765610027,"27":39.0142937704,"28":34.7049495086,"29":40.5022364631,"30":7.2699434858,"31":3.5361035103,"32":26.0182056218,"33":0.0,"34":0.0,"35":11.8913034366,"36":58.7740392056,"37":0.0,"38":25.1143765883,"39":22.5260156021,"40":59.3142571364,"41":59.8179633256,"42":7.06884402,"43":24.6522359175,"44":57.1103628791,"45":0.0,"46":49.3272608624,"47":41.2805554871,"48":2.5339494931,"49":14.1957044993},"liquidity":{"0":1611.3021386348,"1":2232.9713736965,"2":2429.6599694111,"3":2718.8345447826,"4":2945.038001687,"5":3271.6561324957,"6":3488.8412378571,"7":3818.6564853546,"8":4309.477894278,"9":4568.3173700942,"10":4708.9736367918,"11":5131.4207204943,"12":5132.3800611746,"13":6085.789863529,"14":6524.4169869806,"15":7346.1392698231,"16":8332.733358624,"17":8700.2883388826,"18":8340.4540354614,"19":10113.7658304025,"20":9883.1238152075,"21":10680.2250554382,"22":10240.7095266734,"23":9898.6294948847,"24":9596.6995964354,"25":8527.6356649076,"26":8420.837571928,"27":9005.1283827905,"28":10379.7026971865,"29":10696.6927354665,"30":12026.6918585193,"31":14051.8643281693,"32":15099.4451250603,"33":12898.7709784266,"34":14246.9320978097,"35":14870.0405942569,"36":13697.0718647939,"37":13304.1705222261,"38":13545.1714530383,"39":14190.1177253255,"40":12385.8702559417,"41":12372.2366686157,"42":12686.9074774021,"43":12780.9312004987,"44":11685.0522290114,"45":11849.6696311415,"46":13330.9457855048,"47":12896.9420820554,"48":12974.4228621146,"49":13582.9025522172},"interest_rate":{"0":0.0,"1":0.02,"2":0.0146303474,"3":1.1942424889,"4":0.0433328496,"5":0.02,"6":0.0128006051,"7":0.1795535085,"8":0.2628671103,"9":0.1032326003,"10":0.346385857,"11":0.3059549546,"12":0.7291300365,"13":4.0351907309,"14":0.2902567275,"15":0.2870967265,"16":0.537686704,"17":0.3013861695,"18":0.3782536591,"19":2.9633047083,"20":0.0,"21":0.2139340571,"22":0.0641326898,"23":0.2021651084,"24":0.1154407931,"25":0.4799236836,"26":0.7901642001,"27":7.2784021777,"28":2.2763097252,"29":0.02,"30":0.1755974844,"31":0.3154589246,"32":0.3481382037,"33":0.0,"34":0.0,"35":0.6903601646,"36":0.2965564273,"37":0.1922411093,"38":0.2610580208,"39":0.0353983073,"40":0.1639985178,"41":2.8023294294,"42":0.0825089966,"43":0.2955140145,"44":0.0365025729,"45":0.0377686271,"46":0.0124700604,"47":0.8251843609,"48":0.0101586835,"49":0.0212154645},"asset_i":{"0":0.0,"1":2.2783039381,"2":2.0993520966,"3":2.4699558006,"4":2.6676500442,"5":2.7588282738,"6":2.7888070127,"7":2.7530768835,"8":2.9583994751,"9":3.3623185731,"10":3.0169711685,"11":3.6399692836,"12":3.3881978015,"13":3.4681371032,"14":3.8086308732,"15":4.4052822036,"16":4.470062525,"17":3.2532645268,"18":3.9228627314,"19":4.708354253,"20":4.555645119,"21":5.2009322927,"22":4.4331837618,"23":4.0482707328,"24":3.5076579775,"25":3.5791601815,"26":4.3706893646,"27":4.1736952929,"28":5.1752304254,"29":5.8657976585,"30":5.8167479047,"31":5.4759020681,"32":6.9763938461,"33":3.9027115301,"34":6.205919027,"35":5.7735482124,"36":4.4484050575,"37":4.3574135546,"38":8.3124472949,"39":5.7139277813,"40":5.5212753267,"41":5.1634825257,"42":6.6102711114,"43":6.0246117226,"44":3.6800192602,"45":6.2670103677,"46":5.5826427486,"47":5.9640941296,"48":4.8359504899,"49":5.3407433127},"asset_j":{"0":0.0,"1":3.8148562312,"2":4.1492986858,"3":4.3283789874,"4":4.4082052268,"5":4.7069044298,"6":4.769669062,"7":4.9407780261,"8":5.3493615269,"9":5.6163077181,"10":5.8051147733,"11":5.8118637816,"12":6.0727798636,"13":6.0201388347,"14":6.598544617,"15":6.7117591928,"16":7.1369154725,"17":7.6666591659,"18":7.8674619562,"19":7.7202274962,"20":8.5946163264,"21":8.5056022716,"22":8.8632081672,"23":8.7241033995,"24":8.4768962964,"25":8.3889945664,"26":7.957956229,"27":7.8879359076,"28":8.0982136231,"29":8.8791278806,"30":9.0394965699,"31":9.5920809312,"32":10.7148612896,"33":11.055035841,"34":10.1076800197,"35":10.6903510116,"36":10.9512484588,"37":10.3032302446,"38":10.2489481641,"39":10.2336634404,"40":10.5104191795,"41":9.7465849456,"42":9.7656277199,"43":9.8643627546,"44":9.9011219707,"45":9.4336833883,"46":9.4098844207,"47":10.1657066555,"48":9.8634575883,"49":9.8910285019},"equity":{"0":735.5046480856,"1":673.4271954672,"2":656.3880657676,"3":657.5307291968,"4":574.2120102324,"5":610.8292417157,"6":565.3169213719,"7":520.0258610221,"8":497.8871867815,"9":492.9388007535,"10":479.9916311429,"11":487.3170662571,"12":458.1001899901,"13":437.7281480646,"14":493.4792910184,"15":499.1730197393,"16":478.6879811721,"17":458.2571971767,"18":427.8039151243,"19":410.9201345342,"20":410.9201345342,"21":351.8915670004,"22":331.2159182596,"23":337.5933136656,"24":327.4540439307,"25":293.2757451032,"26":317.467796477,"27":379.8477264618,"28":349.6671440426,"29":346.7493127337,"30":370.1600531912,"31":366.6239496809,"32":374.9793857275,"33":374.9793857275,"34":433.0206203463,"35":411.3418596059,"36":426.0414028201,"37":430.3842067458,"38":413.6861270137,"39":383.9734014356,"40":330.2939463733,"41":347.5387889814,"42":324.333594913,"43":341.6412323119,"44":332.4080130191,"45":356.6042866542,"46":382.328986666,"47":378.897753736,"48":391.8665102182,"49":387.9257262256},"equity_borrowers":{"0":0.0,"1":4.4691520834,"2":0.0,"3":4.2361788594,"4":0.0,"5":14.8307447628,"6":28.4657274525,"7":12.1365407413,"8":38.2440817375,"9":-6.9401512273,"10":12.3671332379,"11":-2.4385713225,"12":7.7205305138,"13":0.0,"14":4.5987856547,"15":20.2110846463,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":12.8781254913,"22":0.0,"23":13.7692817207,"24":0.0,"25":-0.2943810139,"26":-0.608513428,"27":10.8395018566,"28":0.0,"29":0.0,"30":22.0665502385,"31":0.0,"32":14.0906901709,"33":0.0,"34":0.0,"35":0.0,"36":23.8127180157,"37":16.3486811354,"38":0.0,"39":14.4896845128,"40":0.0,"41":0.0,"42":14.4048022455,"43":-0.1235055817,"44":0.0,"45":28.9250758498,"46":0.0,"47":14.0585437856,"48":19.7450794932,"49":0.0},"bankruptcies":{"0":2,"1":10,"2":6,"3":7,"4":12,"5":4,"6":5,"7":7,"8":9,"9":6,"10":3,"11":4,"12":4,"13":7,"14":6,"15":6,"16":5,"17":3,"18":4,"19":4,"20":1,"21":7,"22":9,"23":2,"24":6,"25":2,"26":7,"27":7,"28":3,"29":4,"30":4,"31":5,"32":4,"33":2,"34":1,"35":1,"36":4,"37":3,"38":5,"39":2,"40":5,"41":8,"42":2,"43":4,"44":8,"45":2,"46":4,"47":6,"48":3,"49":7},"potential_credit_channels":{"0":20,"1":27,"2":28,"3":29,"4":20,"5":26,"6":20,"7":26,"8":23,"9":27,"10":25,"11":25,"12":24,"13":22,"14":25,"15":25,"16":26,"17":26,"18":28,"19":24,"20":21,"21":29,"22":24,"23":25,"24":23,"25":23,"26":24,"27":25,"28":26,"29":19,"30":23,"31":23,"32":31,"33":24,"34":25,"35":23,"36":27,"37":27,"38":21,"39":21,"40":25,"41":28,"42":29,"43":30,"44":22,"45":29,"46":29,"47":24,"48":25,"49":28},"prob_change_lender":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"best_lender":{"0":7,"1":24,"2":10,"3":31,"4":38,"5":37,"6":37,"7":2,"8":29,"9":27,"10":21,"11":33,"12":33,"13":32,"14":17,"15":29,"16":18,"17":10,"18":41,"19":15,"20":22,"21":48,"22":37,"23":5,"24":7,"25":44,"26":39,"27":44,"28":6,"29":23,"30":39,"31":37,"32":22,"33":32,"34":3,"35":35,"36":26,"37":45,"38":45,"39":4,"40":24,"41":25,"42":24,"43":16,"44":16,"45":16,"46":49,"47":49,"48":8,"49":32},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.2910140794,"2":0.2101320256,"3":0.2218326534,"4":0.1685817332,"5":0.1654487816,"6":0.1231184885,"7":0.200072763,"8":0.1973884073,"9":0.215788226,"10":0.160035104,"11":0.1330367389,"12":0.0838123131,"13":0.0975735419,"14":0.1003334433,"15":0.0925708291,"16":0.0719085735,"17":0.0762207698,"18":0.0827601095,"19":0.1180113592,"20":0.1265943252,"21":0.1054303821,"22":0.1170449625,"23":0.1072580805,"24":0.1208994992,"25":0.1055504926,"26":0.154500864,"27":0.1255594977,"28":0.1363728545,"29":0.1041287413,"30":0.1106531904,"31":0.0882307856,"32":0.0807161436,"33":0.0778326902,"34":0.0882982101,"35":0.080325769,"36":0.0624271145,"37":0.0808344034,"38":0.108986369,"39":0.1278247585,"40":0.0949724409,"41":0.1419488015,"42":0.114031184,"43":0.0874771532,"44":0.0629574265,"45":0.067802101,"46":0.0864032478,"47":0.0779941837,"48":0.0652808674,"49":0.067483873},"best_lender_clients":{"0":2,"1":3,"2":4,"3":3,"4":4,"5":3,"6":3,"7":4,"8":3,"9":4,"10":4,"11":5,"12":4,"13":4,"14":3,"15":3,"16":3,"17":4,"18":4,"19":3,"20":4,"21":4,"22":5,"23":5,"24":4,"25":4,"26":4,"27":4,"28":6,"29":4,"30":3,"31":3,"32":4,"33":4,"34":3,"35":4,"36":3,"37":4,"38":4,"39":4,"40":4,"41":3,"42":5,"43":4,"44":4,"45":4,"46":3,"47":3,"48":4,"49":4},"rationing":{"0":23.3619380212,"1":33.024465565,"2":40.9825207927,"3":39.2290432685,"4":84.6467669472,"5":39.1137242292,"6":34.0968058675,"7":55.2739828524,"8":29.3499965495,"9":39.7568040481,"10":24.9175813484,"11":67.2117674933,"12":45.7520115239,"13":8.533039745,"14":2.1520289101,"15":23.6708907405,"16":14.1198469532,"17":20.8424606761,"18":3.8914639787,"19":33.1474534212,"20":9.4584126442,"21":12.9749154333,"22":43.5676736032,"23":13.4790692554,"24":0.0,"25":3.7167768253,"26":56.8637679993,"27":25.7761736382,"28":4.9899446347,"29":24.6660502849,"30":32.58851162,"31":36.7625305541,"32":0.0,"33":30.070661748,"34":10.0243145785,"35":5.7450230822,"36":0.8619497524,"37":61.5089881973,"38":36.1388459851,"39":14.1532266925,"40":0.0,"41":30.2867402029,"42":6.9155785922,"43":27.9345440748,"44":38.4583917751,"45":14.5666610036,"46":13.5352007278,"47":0.0,"48":25.1303700063,"49":27.5604846499},"leverage":{"0":0.0,"1":4.6844541121,"2":0.0,"3":1.7417222804,"4":0.0,"5":0.570622851,"6":0.5940192369,"7":-1.8727131748,"8":0.5311114443,"9":-0.0777136364,"10":0.2675526143,"11":-5.9069850791,"12":0.4775806939,"13":0.0,"14":1.4248472951,"15":0.1178752062,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.8001320439,"22":0.0,"23":0.4293908307,"24":0.0,"25":-30.6239095629,"26":-25.811461149,"27":1.1727079283,"28":0.0,"29":0.0,"30":0.2901277327,"31":0.0,"32":0.2043238071,"33":0.0,"34":0.0,"35":0.0,"36":0.5470136762,"37":0.2438216867,"38":0.0,"39":0.996328961,"40":0.0,"41":0.0,"42":0.3057080885,"43":-203.6114766917,"44":0.0,"45":0.4564128927,"46":0.0,"47":0.1754408185,"48":0.6504230601,"49":0.0},"systemic_leverage":{"0":0.0,"1":0.0936890822,"2":0.0,"3":0.0348344456,"4":0.0,"5":0.011412457,"6":0.0237607695,"7":-0.074908527,"8":0.0318666867,"9":-0.0015542727,"10":0.0053510523,"11":-0.1181397016,"12":0.0095516139,"13":0.0,"14":0.0284969459,"15":0.0023575041,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0160026409,"22":0.0,"23":0.0085878166,"24":0.0,"25":-0.6124781913,"26":-0.516229223,"27":0.0234541586,"28":0.0,"29":0.0,"30":0.0058025547,"31":0.0,"32":0.0040864761,"33":0.0,"34":0.0,"35":0.0,"36":0.021880547,"37":0.0048764337,"38":0.0,"39":0.0199265792,"40":0.0,"41":0.0,"42":0.0061141618,"43":-4.0722295338,"44":0.0,"45":0.0182565157,"46":0.0,"47":0.0035088164,"48":0.0260169224,"49":0.0},"loans":{"0":null,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":null,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":null,"34":null,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"reserves":{"0":138.5390070659,"1":150.1588560704,"2":153.6102594544,"3":159.8598711203,"4":165.5461808823,"5":172.2847164917,"6":175.4083700861,"7":181.7970203593,"8":192.6416829263,"9":197.5077643055,"10":200.1343826161,"11":206.9056133993,"12":207.2742554518,"13":227.1598436652,"14":236.3546293076,"15":254.4310660523,"16":274.4168547665,"17":281.0780528483,"18":273.33528872,"19":309.6049028588,"20":304.5769942345,"21":322.4604831632,"22":312.8735977581,"23":305.7458598144,"24":299.6301309939,"25":277.039398706,"26":275.7267083937,"27":288.5463774565,"28":317.5609487214,"29":323.6441175775,"30":352.3492590042,"31":393.7551562799,"32":414.4536584874,"33":369.3982046989,"34":396.1226973106,"35":408.5655483815,"36":384.6681559494,"37":377.1085515963,"38":382.7329613431,"39":395.8562169608,"40":358.7316078331,"41":360.2015568774,"42":365.0521161932,"43":369.0341897804,"44":345.9226338718,"45":348.4157324965,"46":379.762993638,"47":372.2768109039,"48":371.8985740996,"49":383.3852758324},"deposits":{"0":6926.950353294,"1":7507.9428035209,"2":7680.5129727178,"3":7992.9935560144,"4":8277.309044115,"5":8614.2358245845,"6":8770.4185043068,"7":9089.8510179627,"8":9632.0841463127,"9":9875.388215273,"10":10006.7191308071,"11":10345.280669963,"12":10363.7127725902,"13":11357.9921832577,"14":11817.7314653821,"15":12721.5533026166,"16":13720.8427383237,"17":14053.9026424134,"18":13666.7644359978,"19":15480.2451429397,"20":15228.8497117258,"21":16123.0241581583,"22":15643.6798879049,"23":15287.2929907222,"24":14981.506549694,"25":13851.9699353023,"26":13786.3354196873,"27":14427.3188728245,"28":15878.0474360681,"29":16182.205878877,"30":17617.4629502116,"31":19687.7578139953,"32":20722.6829243681,"33":18469.9102349429,"34":19806.13486553,"35":20428.2774190771,"36":19233.4077974719,"37":18855.4275798137,"38":19136.6480671551,"39":19792.8108480399,"40":17936.5803916569,"41":18010.0778438683,"42":18252.6058096581,"43":18451.7094890223,"44":17296.1316935891,"45":17420.7866248264,"46":18988.1496819003,"47":18613.8405451954,"48":18594.9287049823,"49":19169.2637916223},"active_lenders":{"0":0,"1":5,"2":1,"3":3,"4":3,"5":2,"6":4,"7":4,"8":5,"9":2,"10":2,"11":1,"12":2,"13":4,"14":3,"15":3,"16":2,"17":1,"18":2,"19":1,"20":0,"21":4,"22":3,"23":2,"24":4,"25":2,"26":3,"27":3,"28":2,"29":1,"30":2,"31":1,"32":3,"33":0,"34":0,"35":1,"36":4,"37":1,"38":2,"39":2,"40":3,"41":3,"42":2,"43":3,"44":2,"45":2,"46":2,"47":5,"48":3,"49":2},"active_borrowers":{"0":0,"1":5,"2":2,"3":3,"4":5,"5":2,"6":4,"7":4,"8":7,"9":3,"10":2,"11":1,"12":2,"13":4,"14":4,"15":3,"16":3,"17":1,"18":2,"19":1,"20":0,"21":5,"22":4,"23":2,"24":4,"25":2,"26":3,"27":3,"28":2,"29":1,"30":2,"31":1,"32":3,"33":0,"34":0,"35":1,"36":4,"37":1,"38":2,"39":2,"40":3,"41":3,"42":2,"43":3,"44":3,"45":2,"46":2,"47":5,"48":3,"49":3},"prob_bankruptcy":{"0":0.0,"1":0.2138166745,"2":0.9509293708,"3":0.4199763477,"4":1.0370149851,"5":0.0,"6":0.4357310322,"7":0.1542610773,"8":0.3623852608,"9":1.1427704702,"10":0.3372190567,"11":0.3064399165,"12":0.6206449648,"13":0.6829781047,"14":1.1669595716,"15":0.2247058077,"16":0.8461020136,"17":0.3064399165,"18":0.305896263,"19":0.7709746413,"20":0.0,"21":0.2270893871,"22":1.4198927433,"23":0.2270893871,"24":0.8619114664,"25":0.3769297652,"26":0.6894047664,"27":0.5386275911,"28":0.7307782524,"29":1.522765391,"30":0.1620798528,"31":0.3202381053,"32":0.839480145,"33":0.0,"34":0.0,"35":0.5010327597,"36":1.1992267657,"37":0.2243923337,"38":0.3343641033,"39":0.0571558313,"40":0.1752167264,"41":1.5590189847,"42":0.0571558313,"43":0.2077324445,"44":1.3699124975,"45":0.0281359102,"46":0.7192465884,"47":0.5239254714,"48":0.0175634836,"49":1.1630461552},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'


    def setUp(self):
        model = interbank.Model()
        model.config.lender_change = self.ALGORITHM()
        model.log.define_log('ERROR')
        model.config.lender_change.set_parameter("p", self.P)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED)
        model.simulate_full()
        self.generated_now_values = model.finish()
        ## self.results.to_dict() and save the json to self.RESULTS_TO_COMPARE
        ## also        json.dumps(separators=(',', ':'), obj=self.results.to_json())

        # we also create a gdt file with a whole execution:
        model.configure(T=self.T_LONG)
        model.statistics.define_output_format('gdt')
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_shockedmarket')
        model.simulate_full(interactive=True)
        model.finish()
        os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.json')
        os.remove('tests\\test_whole_execution_shockedmarket_erdos_renyi.png')

    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
