# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os


class WholeExecution(unittest.TestCase):
    N = 50
    T = 50


    ALGORITHM = interbank_lenderchange.RestrictedMarket
    P = 0.5

    SEED = 39393

    CONFIG = 'C_i0=30 D_i0=135 E_i0=15 L_i0=120 alfa=0.1 allow_replacement_of_bankrupted=True beta=5 chi=0.0015 mu=0.7 omega=0.55 phi=0.25 psi=0.0 r_i0=0.02 reintroduce_with_median=False reserves=0.02 rho=0.3 xi=0.9 '

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":0.809979206,"1":11.1739594398,"2":16.9897114958,"3":0.2942748792,"4":14.1296760108,"5":5.4057825216,"6":8.0427148189,"7":1.7983122264,"8":19.7881611874,"9":0.0,"10":23.8239834766,"11":19.3275916814,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":12.3345146071,"17":9.9985922501,"18":0.0,"19":0.0,"20":14.2528468603,"21":26.5774744702,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.9954959864,"27":14.9874522595,"28":0.0,"29":24.9474162678,"30":16.1366601474,"31":22.2944537964,"32":20.1489350241,"33":17.097371325,"34":6.2350950366,"35":0.0,"36":0.6022342098,"37":13.0207350864,"38":24.3685863943,"39":12.9302847407,"40":20.0258553198,"41":0.0,"42":27.2984793719,"43":0.0,"44":13.2117485271,"45":2.7095166352,"46":26.3893467182,"47":15.2322474437,"48":12.8641446744,"49":0.0},"liquidity":{"0":1282.156580603,"1":1467.195984608,"2":1888.2573060759,"3":2007.9768294767,"4":2184.2502174517,"5":2038.5795403093,"6":1844.1703842268,"7":1980.3724170736,"8":2242.7525604724,"9":2544.439898945,"10":2582.4599637931,"11":2480.1547608701,"12":2607.1736968173,"13":2714.3903141769,"14":2693.1499588457,"15":2807.7180528679,"16":2791.5040837543,"17":2704.4828992077,"18":2681.8527537069,"19":2461.33981776,"20":2863.5551111221,"21":2794.9569089804,"22":2894.4887433245,"23":3060.0601392301,"24":2711.0611617471,"25":2987.4791380868,"26":3150.2705218927,"27":3314.979990641,"28":3105.9644842098,"29":2718.8560973422,"30":2479.3170540716,"31":2782.0076414251,"32":2762.4373036252,"33":2660.5999711323,"34":2420.3049779394,"35":2617.9499636626,"36":2891.8022144486,"37":2873.4125039818,"38":2408.3637208027,"39":2262.6495663801,"40":2373.8945596255,"41":3098.2523238759,"42":3352.0283426513,"43":3529.8951787984,"44":3548.9995457045,"45":3433.0399706752,"46":3539.618741672,"47":3953.9312681037,"48":3782.8460832496,"49":3897.3576101476},"interest_rate":{"0":0.02,"1":0.02,"2":0.02,"3":0.02,"4":0.02,"5":0.02,"6":0.02,"7":0.02,"8":0.02,"9":0.02,"10":0.02,"11":0.02,"12":0.0,"13":0.0,"14":0.0,"15":0.02,"16":0.02,"17":0.02,"18":0.02,"19":0.0,"20":0.02,"21":0.02,"22":0.0,"23":0.02,"24":0.0,"25":0.02,"26":0.02,"27":0.0,"28":0.02,"29":0.02,"30":0.02,"31":0.02,"32":0.02,"33":0.02,"34":0.02,"35":0.0,"36":0.02,"37":0.02,"38":0.02,"39":0.02,"40":0.02,"41":0.0,"42":0.02,"43":0.02,"44":0.02,"45":0.02,"46":0.02,"47":0.02,"48":0.02,"49":0.0},"asset_i":{"0":0.0,"1":142.4215608253,"2":154.7806108602,"3":141.248949997,"4":120.8270126587,"5":150.0,"6":156.3199884218,"7":161.8974837914,"8":160.751916371,"9":161.6106119243,"10":146.2918097705,"11":201.5322034162,"12":null,"13":null,"14":null,"15":143.4017498036,"16":177.6556535969,"17":151.5334768504,"18":212.4525291707,"19":null,"20":133.0928155677,"21":170.8661889431,"22":null,"23":170.0593374499,"24":null,"25":149.5219830109,"26":153.3583236602,"27":null,"28":186.2169814162,"29":161.5076018668,"30":207.4379731429,"31":143.08603023,"32":150.0,"33":148.6153222545,"34":150.0,"35":null,"36":207.1052645611,"37":167.9281759252,"38":167.0172445795,"39":138.3657907874,"40":162.9034428543,"41":null,"42":128.7934559015,"43":150.0,"44":182.8968536689,"45":136.1616775942,"46":209.1214003754,"47":299.710088173,"48":160.0904622586,"49":null},"asset_j":{"0":0.0,"1":151.618784755,"2":158.3642503097,"3":164.9969083531,"4":166.3512276509,"5":172.3775056339,"6":169.310256104,"7":166.3825988138,"8":165.0702745147,"9":169.5734039294,"10":175.247946596,"11":176.3157227855,"12":179.3865252784,"13":178.8064739349,"14":181.9495367581,"15":180.6361779297,"16":177.9720339216,"17":179.6387322384,"18":178.6429630725,"19":175.0393904553,"20":176.9237747065,"21":185.0016320026,"22":180.3233614835,"23":183.5379424659,"24":184.1198441633,"25":182.6410924389,"26":181.2212623248,"27":184.5840244812,"28":191.9086793474,"29":187.3491674993,"30":182.1587073058,"31":172.3083821762,"32":182.218760381,"33":181.3746569673,"34":178.978771806,"35":174.6221461174,"36":176.7270878928,"37":183.6405376633,"38":184.4924298939,"39":178.040994488,"40":171.5962663288,"41":178.4697637217,"42":188.3290259224,"43":194.689608891,"44":195.3644586499,"45":199.3545492684,"46":192.5207154452,"47":202.1518215661,"48":207.2820453362,"49":196.1296608522},"equity":{"0":701.0670247363,"1":640.1323623244,"2":607.018295464,"3":632.2049147364,"4":643.2491286653,"5":603.9525629153,"6":540.1714453044,"7":560.0837282354,"8":645.2146651954,"9":573.5445138335,"10":595.5859187502,"11":512.889474942,"12":593.5637323619,"13":558.5079563067,"14":546.8236809976,"15":615.3035659771,"16":587.5528356376,"17":547.1524052636,"18":579.2444368685,"19":572.2455035911,"20":604.1908112181,"21":629.1961991511,"22":635.6822532411,"23":615.5660559871,"24":601.542327543,"25":644.6924996485,"26":624.9023255214,"27":600.4106628396,"28":639.4318612626,"29":567.9870140445,"30":661.0515444434,"31":581.1638545399,"32":604.8444385539,"33":583.8761965555,"34":557.8849987174,"35":581.0293474575,"36":619.7496921632,"37":608.1573818092,"38":576.4418737738,"39":663.1046206629,"40":557.2188967075,"41":644.9424709164,"42":653.9641419006,"43":668.4076096429,"44":604.8495984498,"45":641.5408893306,"46":542.6700857292,"47":657.5226525659,"48":649.6635162093,"49":612.2500925893},"equity_borrowers":{"0":15.0,"1":30.0,"2":29.9851894508,"3":15.0,"4":15.0,"5":15.0,"6":15.0,"7":53.0956477504,"8":28.7534537718,"9":15.0,"10":29.9316451673,"11":18.9876819412,"12":0.0,"13":0.0,"14":0.0,"15":45.0,"16":14.9212994069,"17":14.9683082557,"18":26.286039567,"19":0.0,"20":30.0,"21":30.0,"22":0.0,"23":20.8048446744,"24":0.0,"25":15.0,"26":22.4345641176,"27":0.0,"28":15.0,"29":15.0,"30":15.0,"31":30.0,"32":30.0,"33":24.0841035021,"34":6.7046772353,"35":0.0,"36":15.0,"37":30.0,"38":14.7581078187,"39":30.0,"40":10.2675648969,"41":0.0,"42":15.0,"43":15.0,"44":29.9996135308,"45":19.4707279214,"46":15.0,"47":30.0,"48":32.3459238425,"49":0.0},"bankruptcies":{"0":7,"1":14,"2":10,"3":8,"4":11,"5":13,"6":15,"7":13,"8":6,"9":7,"10":7,"11":14,"12":9,"13":11,"14":9,"15":7,"16":6,"17":7,"18":9,"19":12,"20":9,"21":8,"22":5,"23":8,"24":11,"25":8,"26":11,"27":6,"28":5,"29":9,"30":2,"31":9,"32":8,"33":9,"34":10,"35":6,"36":8,"37":9,"38":13,"39":8,"40":14,"41":6,"42":7,"43":4,"44":9,"45":6,"46":13,"47":7,"48":8,"49":5},"potential_credit_channels":{"0":20,"1":20,"2":20,"3":20,"4":20,"5":20,"6":20,"7":20,"8":20,"9":20,"10":20,"11":20,"12":20,"13":20,"14":20,"15":20,"16":20,"17":20,"18":20,"19":20,"20":20,"21":20,"22":20,"23":20,"24":20,"25":20,"26":20,"27":20,"28":20,"29":20,"30":20,"31":20,"32":20,"33":20,"34":20,"35":20,"36":20,"37":20,"38":20,"39":20,"40":20,"41":20,"42":20,"43":20,"44":20,"45":20,"46":20,"47":20,"48":20,"49":20},"prob_change_lender":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"best_lender":{"0":7,"1":7,"2":7,"3":7,"4":7,"5":7,"6":7,"7":7,"8":7,"9":7,"10":7,"11":7,"12":7,"13":7,"14":7,"15":7,"16":7,"17":7,"18":7,"19":7,"20":7,"21":7,"22":7,"23":7,"24":7,"25":7,"26":7,"27":7,"28":7,"29":7,"30":7,"31":7,"32":7,"33":7,"34":7,"35":7,"36":7,"37":7,"38":7,"39":7,"40":7,"41":7,"42":7,"43":7,"44":7,"45":7,"46":7,"47":7,"48":7,"49":7},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.3812910383,"2":0.2858374199,"3":0.2408988751,"4":0.2050678223,"5":0.1493721417,"6":0.1597452041,"7":0.1728990513,"8":0.1033054746,"9":0.1040522323,"10":0.0954097559,"11":0.1278234724,"12":0.1070671753,"13":0.1189912384,"14":0.1523202848,"15":0.1376657855,"16":0.2438321942,"17":0.269985932,"18":0.2336142898,"19":0.2098046489,"20":0.2497588321,"21":0.1990366709,"22":0.2070333698,"23":0.2937680511,"24":0.2648204648,"25":0.2021458229,"26":0.1604955689,"27":0.1449315828,"28":0.2067449033,"29":0.2711690808,"30":0.1819132963,"31":0.2671619966,"32":0.2656774292,"33":0.2075236987,"34":0.1999473904,"35":0.1958917802,"36":0.2294169394,"37":0.2151807495,"38":0.1956965046,"39":0.2509478429,"40":0.2980908348,"41":0.2264483894,"42":0.2034778037,"43":0.1882813944,"44":0.2362959803,"45":0.2519552906,"46":0.2266250332,"47":0.153379283,"48":0.1744830607,"49":0.2261017314},"best_lender_clients":{"0":2,"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":2,"10":2,"11":2,"12":2,"13":2,"14":2,"15":2,"16":2,"17":2,"18":2,"19":2,"20":2,"21":2,"22":2,"23":2,"24":2,"25":2,"26":2,"27":2,"28":2,"29":2,"30":2,"31":2,"32":2,"33":2,"34":2,"35":2,"36":2,"37":2,"38":2,"39":2,"40":2,"41":2,"42":2,"43":2,"44":2,"45":2,"46":2,"47":2,"48":2,"49":2},"rationing":{"0":26.6145449151,"1":54.4111712614,"2":54.4798171342,"3":29.0351432699,"4":27.2903039992,"5":79.2146365257,"6":103.8917983686,"7":61.9687259031,"8":12.498677489,"9":76.8358338031,"10":13.8617993218,"11":81.7076747549,"12":17.036117869,"13":67.0710831161,"14":52.4514215302,"15":31.9302863943,"16":29.6995325795,"17":71.837594227,"18":42.2386229226,"19":42.6484638832,"20":23.0876024545,"21":28.5009520709,"22":49.3023345643,"23":58.933040607,"24":59.8053685946,"25":14.9104351829,"26":38.4111956968,"27":43.1161959681,"28":19.8458577318,"29":99.6313999806,"30":7.4975820025,"31":61.3580568767,"32":47.5125505894,"33":40.4179083235,"34":56.6621186138,"35":40.162809517,"36":25.4279676387,"37":30.3871510462,"38":53.0915408097,"39":10.6677367734,"40":108.2964520133,"41":51.8648189355,"42":17.8183437967,"43":15.6021472291,"44":50.5814350499,"45":24.6014759216,"46":99.8323086017,"47":12.99811551,"48":43.0272327132,"49":59.1233070616},"leverage":{"0":0.0011489067,"1":0.0338604832,"2":0.0,"3":0.0004174112,"4":0.0,"5":0.0,"6":0.0,"7":0.0232177852,"8":0.0280683137,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0058296736,"16":0.0178761081,"17":0.0,"18":0.0225496565,"19":0.0,"20":0.0167250745,"21":0.0009091465,"22":0.0,"23":0.0118525262,"24":0.0,"25":0.0011411787,"26":0.0240415417,"27":0.0,"28":0.0,"29":0.056154027,"30":0.0219546397,"31":0.0087362757,"32":0.0004363473,"33":0.0566681395,"34":0.0,"35":0.0,"36":0.0017084658,"37":0.0,"38":0.0,"39":0.0121180688,"40":0.0479053524,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0469497066,"46":0.012540613,"47":0.0216060247,"48":0.0170253112,"49":0.0},"systemic_leverage":{"0":0.0010799723,"1":0.0297972252,"2":0.0,"3":0.0003923665,"4":0.0,"5":0.0,"6":0.0,"7":0.0185742281,"8":0.0263842149,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0052467062,"16":0.0164460195,"17":0.0,"18":0.0202946908,"19":0.0,"20":0.0150525671,"21":0.0008182319,"22":0.0,"23":0.0101931725,"24":0.0,"25":0.0010955316,"26":0.0216373876,"27":0.0,"28":0.0,"29":0.0482924632,"30":0.0215155469,"31":0.0080373737,"32":0.0003839856,"33":0.0510013256,"34":0.0,"35":0.0,"36":0.0016059579,"37":0.0,"38":0.0,"39":0.0113909846,"40":0.040240496,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0441327242,"46":0.0100324904,"47":0.0203096633,"48":0.0153227801,"49":0.0},"num_of_rationed":{"0":6,"1":6,"2":7,"3":4,"4":3,"5":10,"6":11,"7":9,"8":3,"9":6,"10":2,"11":11,"12":5,"13":8,"14":6,"15":4,"16":6,"17":5,"18":6,"19":7,"20":3,"21":7,"22":5,"23":6,"24":6,"25":3,"26":3,"27":5,"28":3,"29":8,"30":2,"31":5,"32":4,"33":6,"34":5,"35":5,"36":2,"37":4,"38":7,"39":2,"40":8,"41":3,"42":4,"43":3,"44":5,"45":4,"46":9,"47":2,"48":4,"49":7},"loans":{"0":0.809979206,"1":5.9572434499,"2":14.2829011807,"3":0.2942748792,"4":14.1296760108,"5":5.4057825216,"6":8.0427148189,"7":3.9203595304,"8":11.5305532602,"9":3.4177416372,"10":11.9119917383,"11":11.2235057047,"12":null,"13":null,"14":null,"15":2.4831221236,"16":12.3345146071,"17":9.9985922501,"18":8.4228867542,"19":null,"20":7.1264234302,"21":13.5955741946,"22":null,"23":5.4087658434,"24":null,"25":0.6593225827,"26":7.9914741229,"27":null,"28":3.0127295476,"29":21.9346867202,"30":16.1366601474,"31":11.1472268982,"32":10.074467512,"33":9.4496919192,"34":6.2350950366,"35":null,"36":0.6022342098,"37":7.8381494396,"38":24.3685863943,"39":6.4651423704,"40":20.6896907345,"41":null,"42":27.2984793719,"43":0.0193234588,"44":13.740151609,"45":10.7872477798,"46":7.5243677938,"47":8.4355091265,"48":7.101209436,"49":null},"c":{"0":148.1983620516,"1":154.8928309276,"2":161.0427479636,"3":162.2903194859,"4":168.2295861512,"5":165.2967704446,"6":162.6203249183,"7":159.4538067895,"8":165.3742856724,"9":171.0032835148,"10":171.9809396989,"11":174.9964724459,"12":174.4366401164,"13":177.5293369758,"14":176.130110207,"15":173.6406551009,"16":175.0951834621,"17":174.1397574691,"18":170.5991871787,"19":172.6489334396,"20":180.3851092077,"21":175.6983425894,"22":178.8145553757,"23":179.4800017022,"24":178.236239475,"25":176.6590158826,"26":180.0827307018,"27":186.9131688849,"28":182.5340493041,"29":177.6274616715,"30":168.1183276815,"31":177.4407200198,"32":176.9776258592,"33":174.5030152043,"34":170.4665918594,"35":172.1910585624,"36":178.9442210403,"37":179.8643030804,"38":173.732614248,"39":167.4283030159,"40":174.0501896168,"41":183.5377457001,"42":189.7580243294,"43":190.2764852037,"44":194.2031935698,"45":187.5778798675,"46":196.8845517653,"47":201.6311515055,"48":191.1157106442,"49":198.3724765873},"reserves":{"0":117.2543328542,"1":105.2891028146,"2":120.2432533458,"3":128.6108790058,"4":123.1141519657,"5":118.4980905919,"6":111.0215653083,"7":118.5252362413,"8":134.4473577833,"9":140.3651084347,"10":142.0668855941,"11":123.4261219129,"12":138.6645696847,"13":136.5075439993,"14":141.0519804135,"15":147.350001789,"16":148.0048884918,"17":144.4343900783,"18":140.4030256692,"19":128.2309682793,"20":141.9425371192,"21":142.7951736475,"22":153.4229109723,"23":149.4897540814,"24":136.0891206609,"25":147.1322592146,"26":144.4026267154,"27":158.4813842408,"28":156.4647785589,"29":137.4310111564,"30":146.8175165335,"31":140.9914874211,"32":139.8497530163,"33":134.7157197431,"34":130.2240446682,"35":142.6872322621,"36":144.5234990047,"37":142.8952977996,"38":122.124878706,"39":131.9805468643,"40":121.0390200013,"41":155.1314879585,"42":156.4512605418,"43":166.5360909735,"44":157.2490968456,"45":161.932335694,"46":146.3568705342,"47":167.5707485087,"48":163.9193528673,"49":172.2598883651},"deposits":{"0":5862.7166427119,"1":5264.4551407296,"2":6012.1626672902,"3":6430.5439502921,"4":6155.7075982871,"5":5924.9045295967,"6":5551.0782654163,"7":5926.2618120645,"8":6722.3678891641,"9":7018.2554217335,"10":7103.3442797062,"11":6171.3060956447,"12":6933.2284842346,"13":6825.3771999673,"14":7052.5990206756,"15":7367.5000894516,"16":7400.2444245882,"17":7221.7195039137,"18":7020.1512834613,"19":6411.5484139643,"20":7097.1268559579,"21":7139.7586823737,"22":7671.1455486155,"23":7474.4877040689,"24":6804.4560330474,"25":7356.6129607318,"26":7220.1313357712,"27":7924.06921204,"28":7823.2389279436,"29":6871.5505578185,"30":7340.8758266739,"31":7049.5743710565,"32":6992.4876508162,"33":6735.7859871527,"34":6511.2022334078,"35":7134.3616131029,"36":7226.1749502349,"37":7144.7648899819,"38":6106.2439353021,"39":6599.0273432169,"40":6051.9510000642,"41":7756.5743979258,"42":7822.5630270878,"43":8326.8045486742,"44":7862.4548422815,"45":8096.6167847,"46":7317.8435267075,"47":8378.5374254327,"48":8195.9676433627,"49":8612.9944182542},"psi":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"psi_lenders":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"potential_lenders":{"0":21,"1":23,"2":25,"3":22,"4":28,"5":19,"6":24,"7":23,"8":29,"9":21,"10":30,"11":21,"12":21,"13":19,"14":27,"15":28,"16":21,"17":25,"18":23,"19":22,"20":25,"21":20,"22":29,"23":22,"24":21,"25":21,"26":20,"27":26,"28":24,"29":18,"30":27,"31":23,"32":27,"33":24,"34":24,"35":26,"36":27,"37":20,"38":21,"39":24,"40":23,"41":28,"42":24,"43":27,"44":24,"45":23,"46":19,"47":24,"48":18,"49":21},"active_lenders":{"0":1,"1":2,"2":2,"3":1,"4":1,"5":1,"6":1,"7":3,"8":2,"9":1,"10":2,"11":2,"12":0,"13":0,"14":0,"15":3,"16":1,"17":1,"18":2,"19":0,"20":2,"21":2,"22":0,"23":2,"24":0,"25":1,"26":2,"27":0,"28":1,"29":1,"30":1,"31":2,"32":2,"33":2,"34":1,"35":0,"36":1,"37":2,"38":1,"39":2,"40":2,"41":0,"42":1,"43":1,"44":2,"45":2,"46":1,"47":2,"48":3,"49":0},"active_borrowers":{"0":1,"1":2,"2":2,"3":1,"4":1,"5":1,"6":1,"7":4,"8":2,"9":1,"10":2,"11":2,"12":0,"13":0,"14":0,"15":3,"16":1,"17":1,"18":2,"19":0,"20":2,"21":2,"22":0,"23":2,"24":0,"25":1,"26":2,"27":0,"28":1,"29":1,"30":1,"31":2,"32":2,"33":2,"34":1,"35":0,"36":1,"37":2,"38":1,"39":2,"40":2,"41":0,"42":1,"43":1,"44":2,"45":2,"46":1,"47":2,"48":3,"49":0},"prob_bankruptcy":{"0":0.0,"1":0.001479594,"2":0.1174839612,"3":0.0152001763,"4":0.0,"5":0.0,"6":0.0,"7":0.0163869317,"8":0.0152629044,"9":0.0176067942,"10":0.0,"11":0.0762236024,"12":null,"13":null,"14":null,"15":0.0085128712,"16":0.0041419988,"17":0.0041419988,"18":0.3210352124,"19":null,"20":0.0041419988,"21":0.0012263444,"22":null,"23":0.3206416818,"24":null,"25":0.0050877775,"26":0.2648431453,"27":null,"28":0.0082124355,"29":0.0042123838,"30":0.0042123838,"31":0.0042123838,"32":0.0042123838,"33":0.3650145333,"34":0.0042123838,"35":null,"36":0.0042123838,"37":0.0059753022,"38":0.0042123838,"39":0.0042123838,"40":0.0042123838,"41":null,"42":0.0042123838,"43":0.0000515279,"44":0.0280043342,"45":0.3791683564,"46":0.0186695561,"47":0.0197416733,"48":0.0223504105,"49":null},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'
    maxDiff = None

    def setUp(self):
        model = interbank.Model()
        model.config.lender_change = self.ALGORITHM()
        model.log.define_log('ERROR')
        model.config.lender_change.set_parameter("p", self.P)
        model.configure_json(self.CONFIG)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_restrictedmarket')
        model.simulate_full()
        self.generated_now_values = model.finish()
        os.remove('tests\\test_whole_execution_restrictedmarket_erdos_renyi_0.json')
        os.remove('tests\\test_whole_execution_restrictedmarket_erdos_renyi_0.png')


    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
