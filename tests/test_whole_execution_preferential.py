# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50
    T_LONG = 1000

    maxDiff = None

    ALGORITHM = interbank_lenderchange.Preferential
    M = 25

    SEED = 39393

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":7.5295017655,"5":3.301827781,"6":12.0092390911,"7":15.1010677919,"8":4.8750812445,"9":7.4480217684,"10":1.4971181954,"11":20.3695859893,"12":0.0,"13":0.0,"14":4.9669919251,"15":0.0,"16":11.6191285601,"17":0.0,"18":6.7741240554,"19":0.0,"20":0.0,"21":0.6620063356,"22":14.9110279826,"23":7.467976694,"24":0.0,"25":12.5190623383,"26":0.0,"27":0.0,"28":0.0,"29":8.0105324962,"30":9.0156432321,"31":0.0,"32":5.1229275149,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":14.7764600756,"39":0.4378766924,"40":4.1685184235,"41":0.1819039006,"42":18.6812600675,"43":0.0,"44":5.3298751747,"45":2.8399408852,"46":0.0,"47":0.0,"48":0.0,"49":5.2660715865},"liquidity":{"0":3052.1979474361,"1":2928.0801133594,"2":2877.4414307579,"3":2993.3983632628,"4":3289.489567311,"5":3303.5207244013,"6":3382.142651054,"7":3451.3102645807,"8":3261.6449569685,"9":3304.2393182111,"10":3516.5092514729,"11":3621.4331946238,"12":4283.7687541843,"13":4154.767164585,"14":3900.7487508457,"15":4123.3896097185,"16":4923.8940536172,"17":4577.9219616026,"18":4642.4324274129,"19":4880.3953914858,"20":4901.3017037617,"21":4585.9926388657,"22":5247.8935008269,"23":5601.3623550589,"24":6862.3004118915,"25":6779.5665108728,"26":7054.7694310597,"27":6960.9274033643,"28":5957.0757850249,"29":6242.3056092059,"30":6454.7336073217,"31":6041.8816819531,"32":5982.692968106,"33":5300.1872272161,"34":5222.4010487974,"35":5034.0714476524,"36":5251.0997794599,"37":4971.1659291521,"38":4814.3997007821,"39":4684.6182636658,"40":4755.5366852152,"41":4462.1897372118,"42":4824.520020898,"43":4335.0924367634,"44":3768.1534671016,"45":4226.1209202208,"46":4528.3517393967,"47":4798.7298365408,"48":5368.2206198169,"49":5449.1513124972},"interest_rate":{"0":0.0,"1":0.0,"2":0.0,"3":0.02,"4":0.0006741812,"5":0.0141209005,"6":0.0404294895,"7":0.0532605624,"8":0.0434947988,"9":0.0089190734,"10":0.011313481,"11":0.0156141379,"12":0.3411853455,"13":1.7403491664,"14":0.02,"15":0.1591794664,"16":2.6402221724,"17":0.1974990385,"18":0.8970621828,"19":0.0,"20":0.1558862071,"21":0.0899015063,"22":2.9206585082,"23":1.1726669524,"24":3.92113972,"25":0.0358939828,"26":0.0,"27":0.1524611175,"28":0.0757646089,"29":0.394827275,"30":0.3795497996,"31":0.0308676037,"32":0.1241854512,"33":0.0380360202,"34":0.0,"35":0.0416968143,"36":1.6682660596,"37":0.0810093344,"38":0.0509182184,"39":5.5789864548,"40":0.1342390404,"41":0.1022758779,"42":0.1207087957,"43":0.1409296397,"44":0.0909930178,"45":0.1041106555,"46":0.1257900831,"47":0.1096885362,"48":0.1770393159,"49":1.2316664869},"asset_i":{"0":0.0,"1":2.7624109998,"2":2.6782885575,"3":2.7192758047,"4":2.7972837155,"5":2.9109359669,"6":2.6599300192,"7":2.8400999036,"8":2.7444921999,"9":2.8897898116,"10":2.7903478808,"11":2.8921560629,"12":3.0549037961,"13":2.9246705793,"14":2.6984593979,"15":2.790748734,"16":3.2770122086,"17":3.3464075051,"18":3.1148454474,"19":3.2103818534,"20":3.209308575,"21":3.114579163,"22":3.3373554652,"23":3.8278373609,"24":3.4868003309,"25":4.2624765492,"26":4.6094633079,"27":3.7018114149,"28":4.0002273667,"29":3.1139828836,"30":3.510314155,"31":2.5385014448,"32":3.471218016,"33":2.7004243901,"34":3.2643789275,"35":3.3457766654,"36":3.1095079902,"37":3.4804514159,"38":3.5580888291,"39":3.4328829042,"40":3.0476853522,"41":3.472804052,"42":3.1045665067,"43":2.8860441916,"44":3.1960551939,"45":2.9303746596,"46":3.1568618813,"47":2.5576287736,"48":3.7394768435,"49":2.7750911233},"asset_j":{"0":0.0,"1":4.5832215622,"2":4.5194846949,"3":4.4952649842,"4":4.497828172,"5":4.7280158771,"6":4.6552139011,"7":4.7563981573,"8":4.7693278458,"9":4.738439007,"10":4.705417455,"11":4.8141947514,"12":4.8987807569,"13":5.234217623,"14":5.4513486038,"15":5.2211425283,"16":5.2866417859,"17":5.761045206,"18":5.5183867815,"19":5.5532893931,"20":5.73472319,"21":5.6857085413,"22":5.5922427819,"23":5.8890773341,"24":6.0392898815,"25":6.6409802091,"26":6.6943486938,"27":6.8047200842,"28":6.6923988119,"29":6.2195816017,"30":6.3273473594,"31":6.400885655,"32":6.2387616423,"33":6.2503531408,"34":5.9265563288,"35":5.8879284965,"36":5.6945883162,"37":5.8614280718,"38":5.6546780767,"39":5.598466067,"40":5.5793003446,"41":5.5940991969,"42":5.5256627882,"43":5.7836270554,"44":5.3908754776,"45":5.115063341,"46":5.3662373465,"47":5.4837521435,"48":5.669610791,"49":5.9299993693},"equity":{"0":750.0,"1":750.0,"2":750.0,"3":750.0,"4":729.3614348714,"5":744.8900761398,"6":727.5999927505,"7":706.1391810562,"8":714.4779662697,"9":707.0299445013,"10":705.5328263059,"11":684.5829434721,"12":668.1467734319,"13":687.7395131872,"14":703.7361257945,"15":703.7361257945,"16":704.097530975,"17":698.6230550267,"18":701.4601648081,"19":701.4601648081,"20":689.8489353041,"21":639.8036034491,"22":631.0813488565,"23":650.8011388967,"24":640.09810025,"25":645.8672025345,"26":627.6206499204,"27":625.6863281816,"28":625.0214592541,"29":616.3153371291,"30":615.3396655429,"31":613.9034364003,"32":610.8537932342,"33":607.6854587784,"34":609.053087085,"35":633.4713931922,"36":650.2725677891,"37":658.4498030551,"38":639.9160631644,"39":653.4575429665,"40":637.0254105573,"41":636.0393959007,"42":623.7660333409,"43":648.4236206434,"44":659.7956014875,"45":646.3248122542,"46":644.4690076311,"47":644.4714913523,"48":618.3012157225,"49":643.2291196887},"equity_borrowers":{"0":0.0,"1":0.0,"2":0.0,"3":14.9796146602,"4":0.0,"5":14.908686398,"6":24.1807971655,"7":18.4322260143,"8":0.0,"9":14.9835234497,"10":14.8947996003,"11":29.9532402028,"12":4.4421764074,"13":3.4636110571,"14":0.0,"15":26.20008705,"16":0.0,"17":9.4385887031,"18":13.6304948782,"19":0.0,"20":10.2125286609,"21":0.0,"22":17.0198202497,"23":0.0,"24":1.2361079693,"25":0.0,"26":0.0,"27":11.9163475104,"28":0.0,"29":6.960028354,"30":4.1988678861,"31":14.66852486,"32":0.0,"33":0.0,"34":0.0,"35":9.0648622894,"36":0.0,"37":14.8120785901,"38":41.2580277703,"39":0.0,"40":25.1712559844,"41":12.6233578191,"42":0.0,"43":0.0,"44":37.6447203507,"45":14.7577748868,"46":6.9644004445,"47":14.9617998788,"48":0.0,"49":0.0},"bankruptcies":{"0":0,"1":1,"2":0,"3":1,"4":2,"5":5,"6":1,"7":5,"8":6,"9":3,"10":1,"11":8,"12":1,"13":3,"14":5,"15":1,"16":4,"17":3,"18":2,"19":1,"20":1,"21":4,"22":6,"23":6,"24":0,"25":5,"26":3,"27":1,"28":2,"29":1,"30":6,"31":5,"32":4,"33":2,"34":1,"35":4,"36":3,"37":2,"38":3,"39":3,"40":5,"41":4,"42":6,"43":10,"44":6,"45":5,"46":4,"47":2,"48":3,"49":6},"potential_credit_channels":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"prob_change_lender":{"0":0.5197481744,"1":0.5008938328,"2":0.4553928682,"3":0.4033935354,"4":0.3566350229,"5":0.3496632496,"6":0.3691964436,"7":0.3419606799,"8":0.3075829209,"9":0.313343567,"10":0.3140412404,"11":0.319262764,"12":0.3167327559,"13":0.3778531693,"14":0.3236104953,"15":0.264543006,"16":0.3162207427,"17":0.3204836944,"18":0.3246387463,"19":0.3272852501,"20":0.3145267724,"21":0.3445229569,"22":0.4030220855,"23":0.4218081037,"24":0.439385813,"25":0.4493540932,"26":0.4551651602,"27":0.4330372531,"28":0.4134328293,"29":0.4019827114,"30":0.3997237942,"31":0.3813313777,"32":0.3554281226,"33":0.3520655484,"34":0.3502949092,"35":0.3322138709,"36":0.3220844136,"37":0.3558184702,"38":0.3835784878,"39":0.3781334593,"40":0.386452135,"41":0.4002114396,"42":0.3887482081,"43":0.416052859,"44":0.4341639269,"45":0.4397871544,"46":0.4389908403,"47":0.4353938812,"48":0.4205725314,"49":0.4298515025},"best_lender":{"0":38,"1":33,"2":29,"3":27,"4":27,"5":27,"6":27,"7":0,"8":48,"9":45,"10":27,"11":27,"12":27,"13":27,"14":48,"15":37,"16":37,"17":37,"18":37,"19":37,"20":37,"21":37,"22":37,"23":37,"24":37,"25":37,"26":34,"27":34,"28":34,"29":34,"30":34,"31":34,"32":34,"33":34,"34":34,"35":34,"36":34,"37":34,"38":34,"39":34,"40":34,"41":0,"42":43,"43":32,"44":32,"45":0,"46":0,"47":0,"48":28,"49":0},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.5371630566,"2":0.3305320437,"3":0.2904811671,"4":0.2248581495,"5":0.2565425933,"6":0.2374447537,"7":0.1604622488,"8":0.1454329972,"9":0.2984361617,"10":0.3217096525,"11":0.2268702253,"12":0.1903827542,"13":0.1230321427,"14":0.2038625616,"15":0.1952154783,"16":0.2096661805,"17":0.1747618633,"18":0.2167171461,"19":0.1763112754,"20":0.175574947,"21":0.1964432387,"22":0.126611075,"23":0.0929519662,"24":0.0780985255,"25":0.0616066799,"26":0.0668433584,"27":0.0681372961,"28":0.0760424225,"29":0.0742776868,"30":0.0741266986,"31":0.0685995006,"32":0.1014677546,"33":0.1084140756,"34":0.1471190983,"35":0.1557867294,"36":0.1521494015,"37":0.1567095646,"38":0.1320688091,"39":0.1576190091,"40":0.1647592975,"41":0.1380474216,"42":0.1557931751,"43":0.1252441545,"44":0.0995119354,"45":0.0938896431,"46":0.093738775,"47":0.0942000094,"48":0.0993980706,"49":0.1196731719},"best_lender_clients":{"0":4,"1":6,"2":8,"3":6,"4":7,"5":5,"6":7,"7":5,"8":4,"9":5,"10":7,"11":12,"12":12,"13":12,"14":6,"15":8,"16":9,"17":10,"18":12,"19":12,"20":12,"21":13,"22":9,"23":9,"24":8,"25":8,"26":7,"27":10,"28":11,"29":11,"30":11,"31":11,"32":12,"33":11,"34":11,"35":13,"36":13,"37":14,"38":12,"39":11,"40":6,"41":5,"42":5,"43":4,"44":4,"45":8,"46":8,"47":6,"48":7,"49":8},"rationing":{"0":0.0,"1":6.4409382259,"2":0.0,"3":11.4369504155,"4":5.6181700128,"5":4.650097061,"6":0.8043523243,"7":28.2370794097,"8":10.9617232395,"9":12.0866904564,"10":0.0,"11":35.4865262239,"12":29.5425125328,"13":0.0,"14":25.5232054611,"15":20.3866504864,"16":20.2343187694,"17":12.3747587496,"18":8.0035291686,"19":10.6579169015,"20":10.500013643,"21":35.7843489143,"22":49.7981896789,"23":6.6803537411,"24":4.5870165629,"25":47.8929776895,"26":39.0493139618,"27":0.0,"28":11.1766651301,"29":0.0,"30":3.7686360334,"31":75.7496692786,"32":23.735181748,"33":1.2400555226,"34":24.7848088913,"35":20.4803888051,"36":8.7487716845,"37":7.7403400327,"38":29.9695324532,"39":40.3148427471,"40":38.1669609003,"41":25.2434815296,"42":58.4005059508,"43":21.7355732069,"44":22.2703937062,"45":44.8786531204,"46":30.1442945793,"47":0.0,"48":5.5740834097,"49":19.8295125242},"leverage":{"0":0.0,"1":0.0,"2":0.0,"3":0.0680436054,"4":0.0,"5":0.237875626,"6":0.6329449589,"7":0.7266702114,"8":0.0,"9":0.3518292766,"10":0.2978349885,"11":0.3239376777,"12":1.0299180481,"13":-0.2450118887,"14":0.0,"15":0.8999772352,"16":0.0,"17":0.0688135613,"18":0.7014523679,"19":0.0,"20":0.5616808883,"21":0.0,"22":1.5901396498,"23":0.0,"24":0.2550113591,"25":0.0,"26":0.0,"27":0.039285437,"28":0.0,"29":0.2599603553,"30":0.1149611663,"31":0.7320851631,"32":0.0,"33":0.0,"34":0.0,"35":1.0917187354,"36":0.0,"37":0.1303884173,"38":0.5769736129,"39":0.0,"40":0.4999221483,"41":-2.8717606971,"42":0.0,"43":0.0,"44":0.3357146774,"45":0.1537422749,"46":1.3180460464,"47":0.0228030763,"48":0.674875072,"49":0.0},"systemic_leverage":{"0":0.0,"1":0.0,"2":0.0,"3":0.0013608721,"4":0.0,"5":0.0047575125,"6":0.0253177984,"7":0.0436002127,"8":0.0,"9":0.0070365855,"10":0.0059566998,"11":0.0129575071,"12":0.020598361,"13":-0.0098004755,"14":0.0,"15":0.0359990894,"16":0.0,"17":0.0013762712,"18":0.0140290474,"19":0.0,"20":0.0112336178,"21":0.0,"22":0.063605586,"23":0.0,"24":0.0051002272,"25":0.0,"26":0.0,"27":0.0007857087,"28":0.0,"29":0.0051992071,"30":0.0022992233,"31":0.0146417033,"32":0.0,"33":0.0,"34":0.0,"35":0.0218343747,"36":0.0,"37":0.0026077683,"38":0.0346184168,"39":0.0,"40":0.0199968859,"41":-0.1148704279,"42":0.0,"43":0.0,"44":0.0201428806,"45":0.0030748455,"46":0.0263609209,"47":0.0004560615,"48":0.0269950029,"49":0.0},"loans":{"0":null,"1":null,"2":null,"3":1.0192669885,"4":7.5295017655,"5":6.3221704166,"6":9.0518240762,"7":7.6906067571,"8":17.8404749509,"9":6.3598319921,"10":2.9666553313,"11":7.5189473403,"12":4.5750776547,"13":4.9647209831,"14":4.7555869964,"15":11.6523152662,"16":1.9779773448,"17":8.5855924503,"18":8.167633482,"19":null,"20":5.7361821697,"21":8.112400097,"22":12.7595204768,"23":12.7541282659,"24":0.3152215732,"25":12.2038407651,"26":null,"27":10.4553199809,"28":20.7274056212,"29":4.9099319699,"30":13.2539096225,"31":10.7386094141,"32":5.1229275149,"33":13.4256245753,"34":null,"35":12.2231086582,"36":27.3254445062,"37":12.167703608,"38":12.549771886,"39":3.3624926932,"40":9.594574788,"41":10.2271627388,"42":16.9339618429,"43":18.7006876956,"44":7.1807762754,"45":2.5544173847,"46":12.0107064288,"47":6.1030653073,"48":23.2917589258,"49":7.7820318564},"reserves":{"0":113.7183254579,"1":112.2995941502,"2":110.9505789598,"3":114.4678056609,"4":120.864724802,"5":124.5992695099,"6":126.3380398912,"7":130.005088357,"8":130.8948528578,"9":132.4735700387,"10":137.4415584926,"11":142.3849472414,"12":155.5466170899,"13":153.3160470231,"14":150.2797084585,"15":154.4064962313,"16":171.549442624,"17":165.1008238895,"18":167.8914003695,"19":172.6742151888,"20":172.290140948,"21":166.1869968116,"22":184.0042360935,"23":192.3361480876,"24":217.167676733,"25":217.2106299269,"26":221.8317935794,"27":221.0842621021,"28":200.5734277221,"29":206.7121647711,"30":212.2282795103,"31":204.3739797804,"32":204.5587871293,"33":190.4029302875,"34":188.1593477122,"35":188.0185195244,"36":193.7652333532,"37":187.1947403055,"38":184.263753656,"39":182.4767962155,"40":183.6367009896,"41":178.4366020494,"42":187.9316739508,"43":179.8134126037,"44":169.8591368768,"45":178.7731788423,"46":185.022135074,"47":189.4946837486,"48":201.5044666132,"49":207.4613602555},"deposits":{"0":5685.916272894,"1":5614.9797075096,"2":5547.5289479914,"3":5723.3902830473,"4":6043.2362401016,"5":6229.9634754964,"6":6316.9019945592,"7":6500.2544178485,"8":6544.7426428901,"9":6623.6785019336,"10":6872.0779246292,"11":7119.2473620706,"12":7777.3308544935,"13":7665.802351154,"14":7513.9854229233,"15":7720.3248115653,"16":8577.4721312021,"17":8255.0411944749,"18":8394.5700184733,"19":8633.7107594387,"20":8614.5070473988,"21":8309.3498405796,"22":9200.2118046733,"23":9616.8074043797,"24":10858.3838366483,"25":10860.5314963454,"26":11091.5896789685,"27":11054.2131051066,"28":10028.6713861039,"29":10335.6082385557,"30":10611.4139755145,"31":10218.6989890203,"32":10227.9393564648,"33":9520.1465143725,"34":9407.9673856103,"35":9400.925976218,"36":9688.2616676599,"37":9359.7370152774,"38":9213.1876827979,"39":9123.8398107746,"40":9181.8350494822,"41":8921.830102468,"42":9396.5836975393,"43":8990.6706301853,"44":8492.956843841,"45":8938.6589421127,"46":9251.1067536999,"47":9474.7341874282,"48":10075.2233306617,"49":10373.0680127732},"active_lenders":{"0":0,"1":0,"2":0,"3":1,"4":1,"5":3,"6":3,"7":4,"8":2,"9":2,"10":2,"11":4,"12":1,"13":3,"14":1,"15":2,"16":1,"17":2,"18":2,"19":0,"20":1,"21":2,"22":4,"23":3,"24":1,"25":1,"26":0,"27":2,"28":1,"29":2,"30":4,"31":1,"32":1,"33":1,"34":0,"35":3,"36":1,"37":2,"38":3,"39":1,"40":4,"41":4,"42":2,"43":2,"44":6,"45":2,"46":2,"47":2,"48":2,"49":2},"active_borrowers":{"0":0,"1":0,"2":0,"3":1,"4":1,"5":3,"6":3,"7":5,"8":3,"9":2,"10":2,"11":5,"12":1,"13":4,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":1,"21":2,"22":4,"23":3,"24":1,"25":2,"26":0,"27":2,"28":1,"29":2,"30":5,"31":1,"32":2,"33":1,"34":0,"35":3,"36":2,"37":2,"38":4,"39":2,"40":4,"41":4,"42":3,"43":4,"44":6,"45":2,"46":2,"47":2,"48":4,"49":3},"prob_bankruptcy":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0013571782,"5":0.001809571,"6":0.0446971111,"7":0.137171731,"8":0.3538870005,"9":0.0047062968,"10":0.0052529304,"11":0.0069645153,"12":0.3188514161,"13":0.4164402683,"14":1.3521743675,"15":0.1775855098,"16":1.8030559436,"17":0.1771435543,"18":0.4399251469,"19":0.0,"20":0.1771435543,"21":0.2859946366,"22":0.4513264695,"23":0.3835940712,"24":0.8444629428,"25":0.5405820528,"26":0.0,"27":0.1373556941,"28":0.0562590221,"29":0.2849921381,"30":0.3937937705,"31":0.0562590221,"32":1.895231356,"33":0.0562590221,"34":0.0,"35":0.0562590221,"36":0.6268755983,"37":0.0562590221,"38":0.0421942666,"39":1.916756887,"40":0.1282927926,"41":0.1215132033,"42":1.0232475572,"43":0.4227332484,"44":0.0866310244,"45":0.1425880786,"46":0.1495109686,"47":0.1425880786,"48":0.1593370193,"49":1.0171896872},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'

    def setUp(self):
        model = interbank.Model()
        model.log.define_log('ERROR')
        model.config.lender_change = self.ALGORITHM()
        model.config.lender_change.set_parameter("m", self.M)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED)
        model.simulate_full()
        self.generated_now_values = model.finish()

        # we also create a gdt file with a whole execution:
        model.configure(T=self.T_LONG)
        model.statistics.define_output_format('gdt')
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_preferential')
        model.simulate_full(interactive=True)
        model.finish()
        os.remove('tests\\test_whole_execution_preferential_barabasi_pref.json')
        os.remove('tests\\test_whole_execution_preferential_barabasi_pref.png')


    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
