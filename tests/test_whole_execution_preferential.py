# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50

    ALGORITHM = interbank_lenderchange.Preferential
    M = 25

    SEED = 39393

    CONFIG = 'C_i0=30 D_i0=135 E_i0=15 L_i0=120 alfa=0.1 allow_replacement_of_bankrupted=True beta=5 chi=0.0015 mu=0.7 omega=0.55 phi=0.25 psi=0.0 r_i0=0.02 reintroduce_with_median=False reserves=0.02 rho=0.3 xi=0.9 '

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":0.0,"1":0.0,"2":0.0,"3":11.9486377974,"4":10.9269629497,"5":1.3320557381,"6":24.4880077623,"7":2.3217805236,"8":0.0,"9":5.4666676625,"10":5.7839190103,"11":21.5042656961,"12":0.0,"13":0.0,"14":23.4022580342,"15":21.0424548962,"16":6.5039963031,"17":8.1583181471,"18":48.7017123416,"19":10.7478824545,"20":13.8077789604,"21":15.7626021343,"22":24.4914011689,"23":0.0,"24":9.5546783144,"25":2.9019726075,"26":0.0,"27":33.1010577974,"28":15.5394018629,"29":0.0,"30":32.5067977632,"31":41.0678250461,"32":0.0,"33":56.8935871734,"34":0.0,"35":18.1354646066,"36":0.0,"37":82.6201093813,"38":30.7633839167,"39":17.0844965371,"40":22.3546336032,"41":28.4134633118,"42":58.0916976003,"43":29.8813569698,"44":0.0,"45":7.2601880531,"46":27.552496073,"47":34.784283313,"48":42.7864777364,"49":2.0758926431},"liquidity":{"0":2261.7337225266,"1":1916.0769342075,"2":1733.755053658,"3":1741.2689006789,"4":1819.7123946201,"5":2116.0861216488,"6":1944.4626963381,"7":2030.5557060448,"8":2001.3959067359,"9":2032.4446806624,"10":2120.6227405803,"11":2153.0093568117,"12":1998.9906880625,"13":2000.6861253088,"14":1879.3125713445,"15":2248.8854296846,"16":2589.2837408547,"17":2355.7838572018,"18":2307.5435151054,"19":2166.8823790413,"20":1837.9257756413,"21":1852.4749850247,"22":2261.364365017,"23":2565.0588418842,"24":2826.4843072917,"25":2642.7299946958,"26":2398.7334495317,"27":2774.6021690765,"28":2490.4329274659,"29":2588.4199949267,"30":2038.3894647886,"31":2085.4061094768,"32":2383.3217677747,"33":1682.7697116566,"34":1730.422597606,"35":1608.6692928417,"36":1643.9256280939,"37":1571.7170418611,"38":1676.4730548567,"39":1471.0103612833,"40":1741.1504629741,"41":1622.8740169643,"42":1830.5103562372,"43":1721.3857478422,"44":1805.3643149633,"45":1986.0095485304,"46":2002.3874428438,"47":2006.3310909585,"48":2471.5463004048,"49":2530.6746516925},"interest_rate":{"0":0.0,"1":0.02,"2":0.0,"3":0.02,"4":0.02,"5":0.02,"6":0.02,"7":0.02,"8":0.02,"9":0.02,"10":0.02,"11":0.02,"12":0.02,"13":0.02,"14":0.02,"15":0.02,"16":0.0,"17":0.02,"18":0.02,"19":0.02,"20":0.02,"21":0.02,"22":0.02,"23":0.02,"24":0.02,"25":0.02,"26":0.0,"27":0.02,"28":0.02,"29":0.0,"30":0.02,"31":0.02,"32":0.02,"33":0.02,"34":0.02,"35":0.02,"36":0.02,"37":0.02,"38":0.02,"39":0.02,"40":0.02,"41":0.02,"42":0.02,"43":0.02,"44":0.02,"45":0.02,"46":0.02,"47":0.02,"48":0.02,"49":0.02},"asset_i":{"0":null,"1":174.8126364648,"2":null,"3":205.6226709142,"4":230.5057280542,"5":236.5102481284,"6":176.9893259307,"7":159.4476165321,"8":198.1433741504,"9":173.9899702956,"10":251.1087891676,"11":234.69977647,"12":150.0,"13":270.8109225348,"14":194.1807736849,"15":142.1863883854,"16":null,"17":203.1873464275,"18":202.6907118398,"19":184.2189822366,"20":158.1361180887,"21":172.3569646337,"22":171.2386449855,"23":104.8927045706,"24":245.37576365,"25":238.4042766119,"26":null,"27":155.5860198507,"28":146.279769894,"29":null,"30":236.2592687574,"31":255.2933355087,"32":308.8128938737,"33":283.5759234755,"34":154.709998209,"35":160.8873138939,"36":162.2887495787,"37":142.5774015501,"38":199.7528528364,"39":243.0096752153,"40":158.991530086,"41":168.0766671972,"42":169.1628649857,"43":144.4124636882,"44":182.383859305,"45":266.8567215141,"46":148.2967038207,"47":214.5882907501,"48":202.5977598078,"49":154.3541783133},"asset_j":{"0":null,"1":168.5312268882,"2":160.3182721331,"3":158.1319292504,"4":159.1027919512,"5":160.2230395186,"6":166.82034589,"7":163.4771388578,"8":166.9643757706,"9":164.7391586465,"10":163.031522346,"11":167.9475841936,"12":170.0523285681,"13":164.2622665857,"14":165.1856847512,"15":161.5900661353,"16":170.2871415516,"17":175.3269729506,"18":173.8818243491,"19":172.636910548,"20":165.8629371271,"21":160.8774716253,"22":166.2261345736,"23":170.2937152882,"24":176.6885503896,"25":182.4757443127,"26":178.09932199,"27":174.3610537673,"28":174.7236033868,"29":176.1328749082,"30":178.0473849505,"31":164.9488906009,"32":171.4667069227,"33":168.1288415802,"34":158.8423249992,"35":156.7734337653,"36":156.3732338648,"37":154.657812094,"38":160.784970415,"39":158.8692356195,"40":155.0597212995,"41":152.398807473,"42":160.1353352657,"43":166.0834633161,"44":163.902569108,"45":160.254716999,"46":167.8913225631,"47":163.7592925894,"48":169.2692768755,"49":175.098348614},"equity":{"0":750.0,"1":750.0,"2":702.694637816,"3":692.2061265774,"4":678.6147736545,"5":641.2221244549,"6":672.9671102419,"7":651.3683668324,"8":596.3003674957,"9":614.4770695907,"10":616.4903754139,"11":616.1888486307,"12":600.9371473221,"13":621.8298367557,"14":613.660511352,"15":562.4763322337,"16":577.1430724218,"17":573.3306137798,"18":619.581002809,"19":649.5947519326,"20":566.0171956171,"21":519.85409956,"22":591.0984813707,"23":598.2438259106,"24":638.5391161503,"25":579.6646869019,"26":617.1126013139,"27":640.6817105139,"28":636.898851093,"29":620.9474907947,"30":654.5019687728,"31":552.4756296564,"32":614.5366349173,"33":597.3713391278,"34":591.224278021,"35":612.4319681368,"36":562.6573963398,"37":560.7955310489,"38":641.6285484241,"39":599.4424763251,"40":577.8774585579,"41":599.8978764681,"42":601.9281293069,"43":595.3232291646,"44":642.5868546273,"45":596.9793237361,"46":642.4033417355,"47":593.0066159349,"48":649.6714665004,"49":633.6030092097},"equity_borrowers":{"0":0.0,"1":15.0,"2":0.0,"3":45.0,"4":44.9561773672,"5":30.0,"6":45.0,"7":30.0,"8":15.0,"9":19.6372527214,"10":12.7421286779,"11":45.0,"12":15.0,"13":22.4383901682,"14":49.6217642029,"15":45.0,"16":0.0,"17":12.1221947147,"18":30.1033503857,"19":60.0,"20":45.0,"21":36.528184832,"22":47.5716008517,"23":-0.2898499378,"24":45.0,"25":9.3261835065,"26":0.0,"27":34.0671580728,"28":18.2853049906,"29":0.0,"30":67.6248497874,"31":69.5484920041,"32":28.4526254808,"33":65.2874865751,"34":45.0,"35":40.6835402278,"36":16.9185086622,"37":76.0432017319,"38":63.2713009051,"39":15.0,"40":33.4983003837,"41":48.742903929,"42":59.5842452377,"43":22.4453683499,"44":45.0,"45":24.7437667172,"46":35.2187465449,"47":64.6973473042,"48":33.0877768212,"49":21.6139367949},"bankruptcies":{"0":1,"1":0,"2":4,"3":5,"4":5,"5":5,"6":4,"7":9,"8":7,"9":6,"10":8,"11":10,"12":7,"13":8,"14":6,"15":8,"16":5,"17":9,"18":7,"19":3,"20":7,"21":15,"22":10,"23":5,"24":6,"25":6,"26":7,"27":5,"28":7,"29":7,"30":9,"31":13,"32":3,"33":11,"34":8,"35":6,"36":4,"37":14,"38":8,"39":9,"40":9,"41":10,"42":12,"43":12,"44":9,"45":12,"46":8,"47":12,"48":4,"49":6},"potential_credit_channels":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"prob_change_lender":{"0":0.728284386,"1":0.4957884805,"2":0.4367290548,"3":0.3662800295,"4":0.3668757511,"5":0.2812871141,"6":0.3091857717,"7":0.3675381698,"8":0.3213036675,"9":0.3555300484,"10":0.3609350269,"11":0.3633923028,"12":0.3350662247,"13":0.4060406738,"14":0.3251228995,"15":0.3475104127,"16":0.3628612319,"17":0.4009728327,"18":0.4304160164,"19":0.4029129462,"20":0.4242849511,"21":0.4275153192,"22":0.4629960561,"23":0.453063515,"24":0.4421019523,"25":0.4215805672,"26":0.4216912092,"27":0.4530609093,"28":0.38718614,"29":0.3882696021,"30":0.3833454972,"31":0.4017956459,"32":0.3988726198,"33":0.4121895158,"34":0.4464347034,"35":0.4891582023,"36":0.4572911021,"37":0.4478395871,"38":0.4086954595,"39":0.441093371,"40":0.4529282582,"41":0.4622861081,"42":0.4449906215,"43":0.4499503006,"44":0.4365241838,"45":0.4593891984,"46":0.466258812,"47":0.4332728013,"48":0.4669547488,"49":0.4550403706},"best_lender":{"0":-1,"1":32,"2":0,"3":0,"4":31,"5":31,"6":31,"7":31,"8":31,"9":31,"10":31,"11":27,"12":27,"13":31,"14":27,"15":31,"16":27,"17":27,"18":31,"19":27,"20":42,"21":42,"22":29,"23":32,"24":32,"25":32,"26":32,"27":32,"28":32,"29":49,"30":49,"31":49,"32":49,"33":49,"34":49,"35":46,"36":28,"37":28,"38":28,"39":40,"40":32,"41":29,"42":29,"43":29,"44":38,"45":38,"46":38,"47":28,"48":26,"49":26},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.0052833827,"2":0.4285424191,"3":0.3478507321,"4":0.2960334625,"5":0.2932567741,"6":0.3068047307,"7":0.2642921448,"8":0.1608453474,"9":0.2454789065,"10":0.2330116855,"11":0.2124934988,"12":0.1738303929,"13":0.2328239821,"14":0.1417627629,"15":0.1652222414,"16":0.181155517,"17":0.2118600429,"18":0.16889581,"19":0.2359548739,"20":0.2750066536,"21":0.2871318819,"22":0.2465163672,"23":0.1714901264,"24":0.1592726426,"25":0.1311743604,"26":0.1843896825,"27":0.304374505,"28":0.3123726661,"29":0.2432180444,"30":0.2181447571,"31":0.2617299013,"32":0.2207057915,"33":0.127780636,"34":0.2410115604,"35":0.2857886442,"36":0.3622987229,"37":0.3495172424,"38":0.2406442684,"39":0.3149065957,"40":0.2094927004,"41":0.2248029803,"42":0.2818046497,"43":0.2847254233,"44":0.2921537527,"45":0.1729206464,"46":0.1523070484,"47":0.3144995798,"48":0.2284967143,"49":0.1686630483},"best_lender_clients":{"0":-1,"1":5,"2":6,"3":6,"4":8,"5":7,"6":7,"7":7,"8":9,"9":9,"10":7,"11":8,"12":9,"13":12,"14":10,"15":10,"16":10,"17":9,"18":9,"19":9,"20":5,"21":6,"22":7,"23":6,"24":8,"25":8,"26":10,"27":8,"28":6,"29":5,"30":6,"31":7,"32":7,"33":8,"34":6,"35":4,"36":5,"37":5,"38":5,"39":5,"40":4,"41":8,"42":7,"43":6,"44":6,"45":7,"46":4,"47":7,"48":7,"49":5},"rationing":{"0":0.0,"1":0.0,"2":14.6821103193,"3":16.9061742482,"4":13.7712224445,"5":24.3776399229,"6":10.3801043362,"7":8.4229867833,"8":53.9825071509,"9":13.7694680993,"10":9.1977164282,"11":12.7310444199,"12":20.1536830369,"13":0.0,"14":8.5782650218,"15":65.494445198,"16":37.4118105044,"17":36.8203194785,"18":14.2556979829,"19":0.0,"20":25.9529373333,"21":70.5032090067,"22":18.8015514045,"23":38.6573928769,"24":8.4579069443,"25":50.1132154222,"26":7.5279519526,"27":9.7255519289,"28":29.0243089482,"29":14.9101983528,"30":19.0143502883,"31":89.292961953,"32":13.3647851447,"33":18.4835258181,"34":35.717801072,"35":17.4409980442,"36":37.5555747258,"37":50.1987398872,"38":11.7623482159,"39":46.4110254783,"40":76.7464467564,"41":35.8131629455,"42":74.5703794352,"43":50.2953787747,"44":40.6806425177,"45":94.8626611398,"46":37.3414140506,"47":65.3255105865,"48":3.0915069234,"49":28.576626777},"leverage":{"0":0.0,"1":0.0,"2":0.0,"3":0.0055759866,"4":0.0,"5":0.0,"6":0.008562867,"7":0.0032933057,"8":0.0,"9":0.0368532451,"10":0.0,"11":0.0,"12":0.0009348668,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0026041966,"20":0.0030562426,"21":0.0000234618,"22":1.0987585302,"23":0.0045959539,"24":0.0011904274,"25":0.0,"26":0.0,"27":0.0174601661,"28":0.0155101347,"29":0.0,"30":0.0300763322,"31":0.0220976496,"32":0.0248337282,"33":0.0312680775,"34":0.0725644117,"35":0.0466191717,"36":0.0,"37":0.0557541037,"38":0.0,"39":0.0,"40":0.010499652,"41":0.0,"42":0.0158138499,"43":0.0290457294,"44":0.0304715631,"45":0.0,"46":0.009298264,"47":0.0738808798,"48":0.0339618212,"49":0.003616829},"systemic_leverage":{"0":0.0,"1":0.0,"2":0.0,"3":0.005018388,"4":0.0,"5":0.0,"6":0.0078778376,"7":0.0030957074,"8":0.0,"9":0.0346420504,"10":0.0,"11":0.0,"12":0.0008787748,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0023958609,"20":0.0026894935,"21":0.0000192387,"22":0.9669075066,"23":0.0042282776,"24":0.0011190018,"25":0.0,"26":0.0,"27":0.0157141495,"28":0.0145795266,"29":0.0,"30":0.0258656457,"31":0.0167942137,"32":0.0233437046,"33":0.0268905466,"34":0.0653079705,"35":0.042889638,"36":0.0,"37":0.0434882009,"38":0.0,"39":0.0,"40":0.0088197077,"41":0.0,"42":0.0132836339,"43":0.0249793273,"44":0.0268149755,"45":0.0,"46":0.0083684376,"47":0.0591047038,"48":0.0319241119,"49":0.0032551461},"num_of_rationed":{"0":0,"1":0,"2":3,"3":3,"4":4,"5":3,"6":1,"7":2,"8":5,"9":5,"10":1,"11":3,"12":3,"13":0,"14":3,"15":4,"16":5,"17":4,"18":2,"19":0,"20":4,"21":7,"22":2,"23":4,"24":2,"25":5,"26":3,"27":1,"28":4,"29":4,"30":1,"31":8,"32":2,"33":2,"34":3,"35":1,"36":7,"37":6,"38":2,"39":3,"40":6,"41":3,"42":7,"43":5,"44":5,"45":7,"46":3,"47":5,"48":2,"49":3},"loans":{"0":null,"1":0.8355752974,"2":null,"3":4.713256479,"4":9.7142150548,"5":5.7086355451,"6":8.1626692541,"7":5.0767556235,"8":15.0116092737,"9":12.3824884467,"10":2.8919595052,"11":7.1680885654,"12":0.6590811172,"13":9.8551205351,"14":11.7883096681,"15":10.5488442749,"16":null,"17":5.4130641521,"18":24.3508561708,"19":7.5849662879,"20":5.2768349128,"21":5.2542007114,"22":9.0063004072,"23":1.1319434655,"24":7.1382527773,"25":2.9019726075,"26":null,"27":11.0578073993,"28":7.7697009314,"29":null,"30":9.3724736989,"31":11.3339800209,"32":11.1256559675,"33":17.6782567903,"34":9.2621756754,"35":6.7930037874,"36":5.120955707,"37":11.7035601418,"38":9.6913389414,"39":17.0844965371,"40":10.6097934588,"41":10.3979249689,"42":14.5229244001,"43":14.9406784849,"44":2.1012681777,"45":6.3494289857,"46":13.472218118,"47":7.1184337446,"48":14.3713218568,"49":5.9937826093},"c":{"0":164.3886744505,"1":156.4724448172,"2":154.376947589,"3":155.5295423738,"4":156.3181052786,"5":162.8931201782,"6":159.5690863182,"7":163.0225151423,"8":160.7445515172,"9":158.352282565,"10":164.1317030592,"11":166.0829482965,"12":160.3021307033,"13":161.2424276868,"14":157.8400052907,"15":166.0256053186,"16":170.8842348943,"17":169.4980989866,"18":168.4527471004,"19":161.9607585816,"20":157.2344291806,"21":162.4942940099,"22":165.4552077092,"23":172.286225399,"24":177.9047818987,"25":173.6785528325,"26":170.0074587027,"27":170.4253828289,"28":171.6352052598,"29":173.6205715271,"30":158.7720837661,"31":167.3516908682,"32":164.098679215,"33":150.6067653956,"34":153.1630018663,"35":152.988689723,"36":150.9966598232,"37":157.1796223381,"38":155.1443813338,"39":151.5693894968,"40":149.0113244296,"41":156.5302145632,"42":162.1539732573,"43":160.2537946575,"44":150.8199382127,"45":163.9368571153,"46":159.987371383,"47":165.2300013671,"48":170.8324670822,"49":172.1525161707},"reserves":{"0":95.4435453577,"1":89.9006078899,"2":81.4604129254,"3":83.3154799687,"4":87.0640604588,"5":98.8860081231,"6":96.0835878027,"7":98.9907621782,"8":102.3209276489,"9":109.6846255982,"10":108.6065771704,"11":103.1032862685,"12":107.0984561394,"13":106.5974789382,"14":108.1198654494,"15":115.1294304105,"16":129.1768148386,"17":118.5991386222,"18":122.3740569234,"19":127.5520123958,"20":115.1341861422,"21":101.4513791922,"22":123.5604315728,"23":140.886903751,"24":144.2279363803,"25":138.6906456098,"26":133.6525308168,"27":143.6847683751,"28":135.1987300759,"29":137.2326755588,"30":120.3905337691,"31":113.0833786769,"32":142.4891773583,"33":105.4440422263,"34":117.7236689634,"35":116.1721970355,"36":122.49662945,"37":99.1411614354,"38":113.6668667719,"39":106.8349103772,"40":110.6610475634,"41":106.9675534248,"42":106.8883015686,"43":107.4135738027,"44":119.617646868,"45":117.3035950787,"46":123.1879911869,"47":114.8461623893,"48":138.9370561705,"49":139.9352601547},"deposits":{"0":4772.1772678843,"1":4495.0303944947,"2":4073.0206462676,"3":4165.7739984368,"4":4353.20302294,"5":4944.3004061558,"6":4804.1793901359,"7":4949.5381089096,"8":5116.0463824434,"9":5484.231279911,"10":5430.3288585195,"11":5155.1643134268,"12":5354.9228069702,"13":5329.8739469109,"14":5405.9932724676,"15":5756.4715205254,"16":6458.8407419284,"17":5929.9569311104,"18":6118.7028461715,"19":6377.6006197889,"20":5756.7093071122,"21":5072.5689596125,"22":6178.0215786407,"23":7044.3451875521,"24":7211.3968190148,"25":6934.5322804922,"26":6682.6265408382,"27":7184.2384187544,"28":6759.9365037973,"29":6861.6337779386,"30":6019.5266884549,"31":5654.1689338453,"32":7124.4588679149,"33":5272.2021113134,"34":5886.1834481682,"35":5808.6098517766,"36":6124.8314725004,"37":4957.0580717683,"38":5683.3433385946,"39":5341.7455188593,"40":5533.0523781707,"41":5348.3776712394,"42":5344.4150784289,"43":5370.6786901335,"44":5980.8823433979,"45":5865.1797539337,"46":6159.3995593466,"47":5742.3081194626,"48":6946.8528085233,"49":6996.7630077338},"psi":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"psi_lenders":{"0":0.0,"1":0.0,"2":0.0,"3":0.0,"4":0.0,"5":0.0,"6":0.0,"7":0.0,"8":0.0,"9":0.0,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0,"20":0.0,"21":0.0,"22":0.0,"23":0.0,"24":0.0,"25":0.0,"26":0.0,"27":0.0,"28":0.0,"29":0.0,"30":0.0,"31":0.0,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.0,"37":0.0,"38":0.0,"39":0.0,"40":0.0,"41":0.0,"42":0.0,"43":0.0,"44":0.0,"45":0.0,"46":0.0,"47":0.0,"48":0.0,"49":0.0},"potential_lenders":{"0":15,"1":17,"2":23,"3":28,"4":17,"5":24,"6":23,"7":24,"8":19,"9":22,"10":22,"11":19,"12":21,"13":24,"14":16,"15":26,"16":26,"17":22,"18":21,"19":25,"20":22,"21":20,"22":23,"23":29,"24":26,"25":23,"26":23,"27":23,"28":19,"29":27,"30":21,"31":16,"32":18,"33":21,"34":25,"35":25,"36":22,"37":21,"38":28,"39":21,"40":26,"41":26,"42":24,"43":23,"44":22,"45":18,"46":21,"47":16,"48":28,"49":26},"active_lenders":{"0":0,"1":1,"2":0,"3":3,"4":2,"5":1,"6":3,"7":2,"8":1,"9":1,"10":2,"11":3,"12":1,"13":2,"14":4,"15":3,"16":0,"17":2,"18":2,"19":4,"20":3,"21":3,"22":4,"23":1,"24":2,"25":1,"26":0,"27":3,"28":2,"29":0,"30":6,"31":4,"32":2,"33":4,"34":2,"35":3,"36":2,"37":7,"38":5,"39":1,"40":3,"41":4,"42":4,"43":2,"44":3,"45":2,"46":3,"47":4,"48":3,"49":3},"active_borrowers":{"0":0,"1":1,"2":0,"3":3,"4":3,"5":2,"6":3,"7":2,"8":1,"9":2,"10":2,"11":3,"12":1,"13":2,"14":4,"15":3,"16":0,"17":2,"18":3,"19":4,"20":3,"21":3,"22":4,"23":1,"24":3,"25":1,"26":0,"27":4,"28":2,"29":0,"30":6,"31":5,"32":2,"33":5,"34":3,"35":3,"36":2,"37":7,"38":5,"39":1,"40":3,"41":4,"42":4,"43":3,"44":3,"45":2,"46":3,"47":5,"48":3,"49":3},"prob_bankruptcy":{"0":null,"1":0.0022257211,"2":null,"3":0.003883998,"4":0.0149443212,"5":0.0029177199,"6":0.0,"7":0.0155015891,"8":0.0392454417,"9":0.0241427966,"10":0.0196227209,"11":0.0196227209,"12":0.0017560065,"13":0.265838984,"14":0.2301109479,"15":0.0132698426,"16":null,"17":0.3487909424,"18":0.0,"19":0.4387191271,"20":0.0241130183,"21":0.0079423188,"22":0.1886589627,"23":0.0091075497,"24":0.0111870266,"25":0.0091075497,"26":null,"27":0.0091314515,"28":0.0091075497,"29":null,"30":0.0657561842,"31":0.0391471728,"32":0.1824684016,"33":0.1626316559,"34":0.3336542952,"35":0.1407371888,"36":0.4508268059,"37":0.015011072,"38":0.3716333873,"39":0.0142682371,"40":0.0184191521,"41":0.0173831296,"42":0.0087426005,"43":0.0087426005,"44":0.0115197973,"45":0.1934073529,"46":0.022483965,"47":0.2689380166,"48":0.0018699157,"49":0.0060519797},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'
    maxDiff = None

    def setUp(self):
        model = interbank.Model()
        model.log.define_log('ERROR')
        model.config.lender_change = self.ALGORITHM()
        model.config.lender_change.set_parameter("m", self.M)
        model.configure_json(self.CONFIG)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_preferential')
        model.simulate_full()
        self.generated_now_values = model.finish()
        os.remove('tests\\test_whole_execution_preferential_barabasi_pref.json')
        os.remove('tests\\test_whole_execution_preferential_barabasi_pref.png')


    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
