# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange
import os

class WholeExecution(unittest.TestCase):
    N = 50
    T = 50

    ALGORITHM = interbank_lenderchange.Preferential
    M = 25

    SEED = 39393

    CONFIG = 'C_i0=30 D_i0=135 E_i0=15 L_i0=120 alfa=0.1 allow_replacement_of_bankrupted=True beta=5 chi=0.0015 mu=0.7 normalize_interest_rate_max=1 omega=0.55 phi=0.25 psi=0.0 r_i0=0.02 reintroduce_with_median=False reserves=0.02 rho=0.3 xi=0.9 '

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":0.0,"1":0.0,"2":0.0,"3":11.9486377974,"4":13.0742719564,"5":1.3320557381,"6":24.4880077623,"7":2.3217805236,"8":15.0116092737,"9":5.4666676625,"10":5.7839190103,"11":4.6242975875,"12":29.0296558052,"13":27.27217077,"14":30.6311888555,"15":22.1475290448,"16":0.0,"17":2.6303669481,"18":9.2325440866,"19":32.5960798193,"20":16.2491166771,"21":12.931343444,"22":22.6945055019,"23":6.8466113794,"24":2.30831605,"25":16.8424249211,"26":0.0,"27":14.8697056247,"28":11.0055620461,"29":33.505882722,"30":7.700710063,"31":33.1695679038,"32":11.286478842,"33":55.8679101263,"34":39.4435185393,"35":9.8772859223,"36":20.5572642867,"37":39.813849633,"38":63.7437866789,"39":14.4054908006,"40":26.6906821024,"41":30.247287858,"42":35.8727999296,"43":0.0,"44":39.813305313,"45":94.6301593691,"46":4.6298789353,"47":16.4488876275,"48":1.5036088497,"49":17.4919744682},"prob_change_lender":{"0":0.728284386,"1":0.4956624426,"2":0.4367290548,"3":0.3662800295,"4":0.3665292491,"5":0.2794255602,"6":0.3228465476,"7":0.3821680758,"8":0.3573394027,"9":0.356822248,"10":0.3598111774,"11":0.3344867769,"12":0.4079155184,"13":0.4082799054,"14":0.3506332651,"15":0.3813023716,"16":0.3511175004,"17":0.3705084591,"18":0.3737879161,"19":0.4068911774,"20":0.4452674668,"21":0.4391541287,"22":0.4464208495,"23":0.4386759079,"24":0.4188748596,"25":0.3854816467,"26":0.3729560194,"27":0.4222871827,"28":0.3831257901,"29":0.3995238759,"30":0.4359651114,"31":0.4441422005,"32":0.4248580363,"33":0.4104446194,"34":0.4361114638,"35":0.4673324284,"36":0.467729503,"37":0.480378424,"38":0.4442656861,"39":0.4434372265,"40":0.4205615734,"41":0.3681736077,"42":0.3842123473,"43":0.3777926726,"44":0.409306787,"45":0.4094243186,"46":0.3982662799,"47":0.4148129321,"48":0.3999765964,"49":0.4377896552},"P_max":{"0":0.9933071491,"1":0.9918834557,"2":0.9642635813,"3":0.9803067068,"4":0.9920912579,"5":0.9843242545,"6":0.9432855866,"7":0.9902047055,"8":0.9867361413,"9":0.9736301378,"10":0.9907318491,"11":0.949746411,"12":0.9265582204,"13":0.9929653588,"14":0.987190941,"15":0.9758407898,"16":0.9791901512,"17":0.9810074262,"18":0.8473972482,"19":0.9878673959,"20":0.7198529536,"21":0.729315756,"22":0.7271921239,"23":0.7282907814,"24":0.6596427548,"25":0.7055869767,"26":0.6853256773,"27":0.7311065651,"28":0.7264128458,"29":0.7107584862,"30":0.7618445465,"31":0.8485055496,"32":0.6339382487,"33":0.795832817,"34":0.7449450678,"35":0.7876952411,"36":0.7182951558,"37":0.7727175296,"38":0.684520251,"39":0.7439777621,"40":0.7409393663,"41":0.7443967059,"42":0.7555001302,"43":0.7430486683,"44":0.8110584504,"45":0.6697070562,"46":0.7792885119,"47":0.754316806,"48":0.6700464866,"49":0.6535418053},"P_min":{"0":0.5,"1":0.0080869356,"2":0.0267203175,"3":0.0133406894,"4":0.0073713883,"5":0.0108998443,"6":0.0088336453,"7":0.0097952945,"8":0.0069003994,"9":0.0082748963,"10":0.0088756197,"11":0.0095997253,"12":0.0068355314,"13":0.0092938965,"14":0.008803002,"15":0.0098187233,"16":0.0074701737,"17":0.0068687913,"18":0.0071149193,"19":0.0107851908,"20":0.0201615211,"21":0.027734711,"22":0.0200760664,"23":0.0204164218,"24":0.1262465055,"25":0.1000995392,"26":0.0681682203,"27":0.0665459403,"28":0.052348485,"29":0.0315970778,"30":0.1096821943,"31":0.0748516968,"32":0.0663244648,"33":0.1179807635,"34":0.1438349565,"35":0.1235422129,"36":0.1467310094,"37":0.164346972,"38":0.1180116114,"39":0.1586699197,"40":0.0975340746,"41":0.0668489388,"42":0.0653663982,"43":0.052127273,"44":0.0331353277,"45":0.0639169553,"46":0.0525475007,"47":0.0307002058,"48":0.0627674591,"49":0.051465465},"active_borrowers":{"0":0,"1":1,"2":0,"3":3,"4":3,"5":2,"6":3,"7":2,"8":1,"9":2,"10":2,"11":1,"12":2,"13":1,"14":4,"15":1,"16":0,"17":1,"18":1,"19":3,"20":3,"21":3,"22":3,"23":2,"24":3,"25":2,"26":0,"27":3,"28":1,"29":3,"30":2,"31":2,"32":1,"33":3,"34":3,"35":1,"36":3,"37":3,"38":5,"39":4,"40":5,"41":4,"42":4,"43":1,"44":4,"45":7,"46":1,"47":3,"48":1,"49":3},"active_lenders":{"0":0,"1":1,"2":0,"3":3,"4":2,"5":1,"6":3,"7":2,"8":1,"9":1,"10":2,"11":1,"12":2,"13":1,"14":3,"15":1,"16":0,"17":1,"18":1,"19":3,"20":1,"21":3,"22":3,"23":2,"24":3,"25":2,"26":0,"27":3,"28":1,"29":3,"30":2,"31":2,"32":1,"33":3,"34":2,"35":1,"36":2,"37":3,"38":3,"39":3,"40":5,"41":3,"42":3,"43":1,"44":3,"45":7,"46":1,"47":3,"48":1,"49":3},"asset_i":{"0":0.0,"1":174.8126364648,"2":0.0,"3":205.6226709142,"4":230.5057280542,"5":236.5102481284,"6":176.9893259307,"7":159.4476165321,"8":198.1433741504,"9":173.9899702956,"10":251.1087891676,"11":162.9026002145,"12":153.1462703613,"13":163.3074314288,"14":232.2453742738,"15":291.5464097089,"16":0.0,"17":207.1794024762,"18":263.8487061457,"19":266.820229698,"20":233.3512657747,"21":139.1849950664,"22":171.1797039884,"23":133.8715789744,"24":210.6251590569,"25":194.202138306,"26":0.0,"27":142.7131034878,"28":141.4570034488,"29":185.6230592127,"30":153.8415225007,"31":219.6355871467,"32":150.0,"33":284.3562851426,"34":207.8943427987,"35":221.5385848579,"36":180.3121488217,"37":188.0326361873,"38":187.1522205938,"39":175.2098964314,"40":165.4172827154,"41":206.8658870837,"42":189.7619911251,"43":246.5557590487,"44":289.693342341,"45":211.0349976552,"46":234.455956786,"47":204.2347349884,"48":196.2224142217,"49":179.5194157577},"asset_j":{"0":0.0,"1":168.5312268882,"2":160.2930799551,"3":158.0746109571,"4":159.0652296946,"5":160.0091875427,"6":166.5189623179,"7":163.7845736599,"8":168.1992770726,"9":166.1521452583,"10":163.5380580214,"11":170.7684520009,"12":167.0262045529,"13":177.28119444,"14":180.5757732736,"15":176.1443115765,"16":179.6706922148,"17":182.2943026616,"18":182.0522598915,"19":172.0361128607,"20":166.506615543,"21":158.0293656458,"22":166.6284534804,"23":162.0816322994,"24":168.9246677743,"25":178.8824128768,"26":175.7398786089,"27":172.3071122432,"28":173.9757344206,"29":174.7746922627,"30":168.4562071444,"31":162.4146469465,"32":174.5082957398,"33":173.1574563347,"34":160.5779304121,"35":158.2460024313,"36":162.9205466985,"37":164.2815088327,"38":169.220044751,"39":170.9059149747,"40":160.7730096758,"41":164.8785156563,"42":174.4739799645,"43":181.8071773988,"44":174.8389558277,"45":171.7768227355,"46":170.7152536283,"47":169.22364449,"48":168.6564513494,"49":166.8538027882},"bankruptcies":{"0":1,"1":0,"2":4,"3":7,"4":6,"5":6,"6":10,"7":11,"8":10,"9":6,"10":12,"11":6,"12":12,"13":8,"14":12,"15":9,"16":5,"17":8,"18":4,"19":9,"20":11,"21":20,"22":9,"23":8,"24":8,"25":10,"26":8,"27":8,"28":9,"29":12,"30":11,"31":17,"32":4,"33":13,"34":11,"35":14,"36":9,"37":15,"38":13,"39":13,"40":8,"41":16,"42":13,"43":5,"44":17,"45":19,"46":11,"47":16,"48":14,"49":11},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},"best_lender":{"0":-1,"1":32,"2":0,"3":0,"4":31,"5":31,"6":31,"7":31,"8":31,"9":45,"10":45,"11":27,"12":27,"13":31,"14":27,"15":27,"16":27,"17":27,"18":27,"19":27,"20":42,"21":42,"22":29,"23":32,"24":32,"25":32,"26":32,"27":32,"28":32,"29":32,"30":32,"31":32,"32":49,"33":49,"34":33,"35":33,"36":39,"37":39,"38":39,"39":41,"40":41,"41":34,"42":34,"43":34,"44":34,"45":34,"46":34,"47":27,"48":46,"49":46},"best_lender_clients":{"0":-1,"1":5,"2":6,"3":6,"4":8,"5":7,"6":7,"7":6,"8":7,"9":7,"10":7,"11":9,"12":10,"13":7,"14":10,"15":9,"16":10,"17":10,"18":11,"19":11,"20":6,"21":6,"22":6,"23":6,"24":8,"25":8,"26":10,"27":8,"28":8,"29":7,"30":6,"31":5,"32":6,"33":7,"34":7,"35":9,"36":6,"37":6,"38":5,"39":6,"40":6,"41":7,"42":7,"43":8,"44":8,"45":6,"46":6,"47":6,"48":4,"49":4},"c":{"0":164.3886744505,"1":156.4482502494,"2":154.3108894022,"3":155.4874551173,"4":156.1127218408,"5":162.6036713955,"6":159.8643467022,"7":164.2085143527,"8":162.1403411812,"9":159.0210149279,"10":166.7696550592,"11":162.9851211412,"12":172.9156531289,"13":175.9597502141,"14":171.831732141,"15":175.2705653487,"16":177.770800129,"17":177.272181023,"18":167.8147706789,"19":162.5786249898,"20":154.2882834398,"21":162.8767157878,"22":158.1787031825,"23":164.9071047108,"24":174.4251597229,"25":171.3932787881,"26":168.0376744463,"27":169.7082253129,"28":170.4713264156,"29":164.5156547489,"30":158.6447390151,"31":170.389413271,"32":169.0369274945,"33":156.9628743591,"34":154.6204487411,"35":159.1763000252,"36":160.522107346,"37":165.0879497906,"38":166.8805836888,"39":156.9394759797,"40":160.9714026761,"41":170.3709670474,"42":177.5175822801,"43":170.6833388057,"44":167.7406965134,"45":166.8158725737,"46":165.2252598636,"47":164.8055525668,"48":162.8773731098,"49":156.1389987547},"deposits":{"0":4772.1772678843,"1":4495.0303944947,"2":4073.0206462676,"3":4165.7739984368,"4":4353.20302294,"5":4944.3004061558,"6":4700.8817074064,"7":4764.4797321269,"8":4992.7341552391,"9":5727.7410847473,"10":5368.4374812821,"11":5858.4155563834,"12":5694.1107766387,"13":6285.2300220651,"14":6025.2317295629,"15":6409.854858136,"16":6957.3339189979,"17":6730.7930154212,"18":6857.0772717174,"19":6178.8523335355,"20":5644.0920717767,"21":4903.7649013758,"22":6435.2593977247,"23":6623.8872235788,"24":7057.936259394,"25":6758.3124912742,"26":6438.2800758749,"27":7078.7392734586,"28":6597.1434370358,"29":6285.1709939991,"30":6297.4292999463,"31":5902.228895765,"32":7192.8024826206,"33":5627.1438949076,"34":5809.385227777,"35":5546.1865974725,"36":6429.8960666238,"37":5950.510304388,"38":6615.8135682016,"39":6061.0777582481,"40":6758.0018346463,"41":6071.4751739026,"42":6694.5637633436,"43":7165.6084111162,"44":5812.9129066713,"45":6077.7382572842,"46":6311.1888498504,"47":5851.7911787879,"48":5753.6511402513,"49":5756.8005903679},"equity":{"0":735.0,"1":733.7017682127,"2":646.9009051032,"3":636.3043843972,"4":596.0497528632,"5":612.9671102419,"6":576.422523945,"7":527.7336551264,"8":539.7822415972,"9":581.2842802057,"10":525.3822656592,"11":589.5961589589,"12":510.4650980772,"13":564.1275151904,"14":501.7056416321,"15":512.9329966223,"16":540.1833553891,"17":532.850071728,"18":618.1757009002,"19":558.1540899064,"20":503.8954491015,"21":384.7552298858,"22":492.4348598693,"23":525.1977943431,"24":554.729153624,"25":512.7987862284,"26":508.0082863797,"27":569.0699177184,"28":545.4413411678,"29":515.3358018459,"30":506.8631778705,"31":495.4469575206,"32":626.1754534436,"33":525.9581805915,"34":536.7999611298,"35":473.0565696551,"36":529.9299315738,"37":409.2060283624,"38":504.3101648173,"39":514.1833373981,"40":583.1727377186,"41":490.7972577427,"42":508.8984320619,"43":571.8365196554,"44":435.7490152035,"45":457.7911332577,"46":460.861901529,"47":434.7756233117,"48":452.120394691,"49":516.8159844188},"fitness":{"0":0.0,"1":0.0052833827,"2":0.428397124,"3":0.3478507321,"4":0.2960334625,"5":0.2916674947,"6":0.3111658052,"7":0.2667856369,"8":0.1653469345,"9":0.2467909052,"10":0.2467962589,"11":0.2092135007,"12":0.2167437647,"13":0.2014403325,"14":0.2191347048,"15":0.2195308562,"16":0.2249321224,"17":0.2599619264,"18":0.1774403167,"19":0.1701523004,"20":0.2875349623,"21":0.2843846476,"22":0.2750422876,"23":0.2091457443,"24":0.2042228775,"25":0.1640158335,"26":0.2382090654,"27":0.3588481378,"28":0.3051646106,"29":0.2581127196,"30":0.3007600306,"31":0.298518364,"32":0.2246479563,"33":0.1546434122,"34":0.3705764649,"35":0.3332312605,"36":0.2837603574,"37":0.2097077373,"38":0.2024451847,"39":0.1848432102,"40":0.1875108016,"41":0.201033229,"42":0.246779949,"43":0.206122728,"44":0.2155956931,"45":0.195169433,"46":0.2554976567,"47":0.3238207174,"48":0.3056009821,"49":0.2209503732},"incrementD":{"0":-524.8231700497,"1":-412.1468733896,"2":-269.038794895,"3":-144.2767997064,"4":-131.0792939156,"5":118.9487532388,"6":-336.4102759083,"7":-220.1979907195,"8":-392.9869426446,"9":-248.0309576257,"10":-205.6343703454,"11":-409.0548433129,"12":102.5898417501,"13":-91.0936136375,"14":-522.6339760991,"15":-11.0334117397,"16":-76.7575576938,"17":-341.4828923923,"18":-429.8966991781,"19":-109.5983270422,"20":-614.3149482677,"21":-491.8421190091,"22":-149.8816139831,"23":-169.1140644499,"24":13.4328500199,"25":-434.84516133,"26":-537.8223351533,"27":194.7019827246,"28":-544.3718797796,"29":-307.7354536222,"30":-436.37995703,"31":-396.8196021502,"32":-183.1155049634,"33":-546.5126796224,"34":-329.7823015399,"35":-314.9507045701,"36":-225.8936398791,"37":-125.0034221838,"38":-175.2548749705,"39":-692.2202991642,"40":-106.463341435,"41":-214.9416198618,"42":119.6626662085,"43":-565.9070071688,"44":-571.4997389993,"45":-154.3301746638,"46":-509.2602119196,"47":-343.7412978668,"48":-659.0230562053,"49":-806.3274791529},"interest_rate":{"0":0.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"leverage":{"0":0.0,"1":0.0,"2":0.0,"3":0.0055759866,"4":0.0,"5":0.0,"6":0.008562867,"7":0.0032933057,"8":0.0,"9":0.0123484509,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0012582595,"20":0.0,"21":0.1454746561,"22":0.054123878,"23":0.0391848469,"24":0.0013672934,"25":0.0,"26":0.0,"27":0.0173529596,"28":0.0,"29":0.0861834541,"30":0.0013302192,"31":0.0,"32":0.0,"33":0.0372011805,"34":0.030641312,"35":0.0143149071,"36":0.0,"37":0.048370863,"38":0.043873329,"39":0.2203789821,"40":0.1119512585,"41":0.0,"42":0.0698564071,"43":0.0,"44":0.0,"45":0.0776948863,"46":0.0,"47":0.0060599291,"48":0.0,"49":0.0093824543},"liquidity":{"0":2261.7337225266,"1":1915.4361645301,"2":1733.1142839806,"3":1739.1215916721,"4":1809.2336477965,"5":2101.3183266145,"6":1918.7402802281,"7":2018.218954455,"8":1998.5278267227,"9":2085.6161163223,"10":2178.9653570928,"11":2136.1265254095,"12":2484.2473764745,"13":2705.3611857475,"14":2469.945511649,"15":2673.0932158126,"16":2905.0632639217,"17":2788.0156412778,"18":2422.9690202269,"19":2097.7033514325,"20":1763.8739821157,"21":1816.9180985385,"22":2263.4690148366,"23":2379.6574955992,"24":2662.1539162455,"25":2520.081301759,"26":2310.9834400465,"27":2711.6230597702,"28":2403.1132160907,"29":2356.7142285947,"30":2381.41613339,"31":2246.3969215035,"32":2462.9882523219,"33":1651.3231500525,"34":1574.4709322648,"35":1699.7796188743,"36":1949.116562138,"37":2103.4620966953,"38":2256.2731615537,"39":1907.0057558599,"40":2142.8629572169,"41":2231.3989524417,"42":2649.8140900728,"43":2524.6236001761,"44":2130.4873032963,"45":2126.9073479339,"46":2133.816705897,"47":2016.1451457555,"48":1906.7615245497,"49":1641.9461017852},"loans":{"0":0.0,"1":0.8355752974,"2":0.0,"3":14.139769437,"4":21.5757391165,"5":5.7086355451,"6":24.4880077623,"7":10.1535112471,"8":15.0116092737,"9":12.3824884467,"10":5.7839190103,"11":4.6242975875,"12":29.0296558052,"13":27.27217077,"14":32.2386931317,"15":22.1475290448,"16":0.0,"17":2.6303669481,"18":9.2325440866,"19":32.5960798193,"20":24.3379806493,"21":12.931343444,"22":29.5879501975,"23":8.3089571279,"24":1.9436903627,"25":16.8424249211,"26":0.0,"27":14.9420700251,"28":11.0055620461,"29":41.206592785,"30":9.1783431773,"31":23.9912247264,"32":11.286478842,"33":55.8679101263,"34":44.7291448564,"35":9.8772859223,"36":26.1476538258,"37":39.813849633,"38":67.0289322382,"39":16.1758558317,"40":36.1039911244,"41":35.3494405653,"42":46.6233652693,"43":1.3462690584,"44":44.2006179205,"45":98.2416742756,"46":4.6298789353,"47":16.4488876275,"48":1.5036088497,"49":26.0462549352},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"num_loans":{"0":0,"1":1,"2":0,"3":3,"4":3,"5":2,"6":3,"7":2,"8":1,"9":2,"10":2,"11":1,"12":2,"13":1,"14":4,"15":1,"16":0,"17":1,"18":1,"19":3,"20":3,"21":3,"22":3,"23":2,"24":3,"25":2,"26":0,"27":3,"28":1,"29":3,"30":2,"31":2,"32":1,"33":3,"34":3,"35":1,"36":3,"37":3,"38":5,"39":4,"40":5,"41":4,"42":4,"43":1,"44":4,"45":7,"46":1,"47":3,"48":1,"49":3},"num_of_rationed":{"0":0,"1":0,"2":3,"3":3,"4":4,"5":3,"6":1,"7":2,"8":5,"9":5,"10":2,"11":4,"12":4,"13":1,"14":4,"15":6,"16":3,"17":3,"18":0,"19":2,"20":4,"21":6,"22":3,"23":5,"24":3,"25":4,"26":3,"27":2,"28":4,"29":3,"30":5,"31":8,"32":2,"33":2,"34":3,"35":7,"36":3,"37":4,"38":3,"39":4,"40":0,"41":3,"42":4,"43":4,"44":5,"45":2,"46":5,"47":5,"48":8,"49":5},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"potential_credit_channels":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"potential_lenders":{"0":15,"1":17,"2":23,"3":28,"4":17,"5":24,"6":23,"7":24,"8":19,"9":22,"10":22,"11":20,"12":20,"13":26,"14":16,"15":26,"16":26,"17":26,"18":21,"19":25,"20":22,"21":20,"22":23,"23":29,"24":26,"25":23,"26":23,"27":23,"28":19,"29":27,"30":22,"31":17,"32":26,"33":21,"34":25,"35":25,"36":22,"37":23,"38":26,"39":22,"40":26,"41":26,"42":25,"43":23,"44":19,"45":28,"46":22,"47":16,"48":14,"49":20},"prob_bankruptcy":{"0":0.0,"1":0.0733500306,"2":0.1071989595,"3":0.1724752049,"4":0.4289294806,"5":0.4816790947,"6":0.4866098477,"7":0.4780879349,"8":0.491612699,"9":0.5055492375,"10":0.4911606353,"11":0.4992869897,"12":0.5023993699,"13":0.4958730232,"14":0.1510591445,"15":0.1560893378,"16":0.1797555261,"17":0.1495332377,"18":0.1157657321,"19":0.1357945468,"20":0.1481394012,"21":0.1469930268,"22":0.4542340247,"23":0.4243045778,"24":0.4110299566,"25":0.4356312633,"26":0.4263047272,"27":0.397929447,"28":0.3921090533,"29":0.3922054651,"30":0.4504265166,"31":0.0959110268,"32":0.121145629,"33":0.1148830033,"34":0.1203278826,"35":0.1252295755,"36":0.1686064459,"37":0.2284784987,"38":0.1825122412,"39":0.1970026646,"40":0.3359750952,"41":0.2595852866,"42":0.2724317445,"43":0.3016488898,"44":0.302823004,"45":0.3146273837,"46":0.340488556,"47":0.3200685299,"48":0.3013424067,"49":0.4338048361},"profits":{"0":0.0,"1":0.8355752974,"2":0.0,"3":2.1911316396,"4":21.5757391165,"5":4.3765798069,"6":0.0,"7":7.8317307235,"8":15.0116092737,"9":12.3824884467,"10":0.0,"11":0.0,"12":16.6210670477,"13":0.0,"14":16.2313225182,"15":22.1475290448,"16":0.0,"17":0.0,"18":9.2325440866,"19":6.0044282129,"20":4.5270630275,"21":0.0,"22":6.8934446956,"23":1.4623457484,"24":1.0977200611,"25":13.9404523136,"26":0.0,"27":0.0723644005,"28":11.0055620461,"29":23.1225476055,"30":9.1783431773,"31":19.6208861707,"32":11.286478842,"33":0.0,"34":25.2390368745,"35":0.0,"36":15.8482648444,"37":0.0,"38":3.2851455593,"39":5.0555105904,"40":9.4133090219,"41":33.2076413698,"42":37.2415864341,"43":1.3462690584,"44":4.3873126075,"45":41.1755289983,"46":0.0,"47":9.7694368824,"48":0.0,"49":20.1353086954},"psi":{"0":1.0,"1":1.0,"2":0.9266499694,"3":0.8928010405,"4":0.8275247951,"5":0.5710705194,"6":0.5183209053,"7":0.5133901523,"8":0.5219120651,"9":0.508387301,"10":0.4944507625,"11":0.5088393647,"12":0.5007130103,"13":0.4976006301,"14":0.5041269768,"15":0.8489408555,"16":0.8439106622,"17":0.8202444739,"18":0.8504667623,"19":0.8842342679,"20":0.8642054532,"21":0.8518605988,"22":0.8530069732,"23":0.5457659753,"24":0.5756954222,"25":0.5889700434,"26":0.5643687367,"27":0.5736952728,"28":0.602070553,"29":0.6078909467,"30":0.6077945349,"31":0.5495734834,"32":0.9040889732,"33":0.878854371,"34":0.8851169967,"35":0.8796721174,"36":0.8747704245,"37":0.8313935541,"38":0.7715215013,"39":0.8174877588,"40":0.8029973354,"41":0.6640249048,"42":0.7404147134,"43":0.7275682555,"44":0.6983511102,"45":0.697176996,"46":0.6853726163,"47":0.659511444,"48":0.6799314701,"49":0.6986575933},"rationing":{"0":0.0,"1":0.0,"2":14.6821103193,"3":17.5469439256,"4":13.7712224445,"5":24.3776399229,"6":10.3801043362,"7":8.4229867833,"8":53.9825071509,"9":8.3696641829,"10":28.6461589844,"11":36.0524034185,"12":73.214482403,"13":10.2088866609,"14":23.2715483523,"15":65.9833891999,"16":25.5758463289,"17":37.6115522059,"18":0.0,"19":0.3419162744,"20":4.9190183882,"21":42.2986207704,"22":29.6702019185,"23":51.9631766177,"24":20.4417441525,"25":33.0267308127,"26":12.7104917351,"27":25.8658882167,"28":26.907003535,"29":8.808716904,"30":30.9366740676,"31":91.6107896753,"32":7.181690566,"33":16.4217547004,"34":20.9706714865,"35":52.931223456,"36":49.3361133603,"37":21.2757330103,"38":14.6161407773,"39":41.7930704506,"40":0.0,"41":23.3852837606,"42":20.9870577529,"43":16.0694102907,"44":45.0001940342,"45":18.1184553428,"46":36.8987488891,"47":47.8931813626,"48":48.2794884976,"49":83.5948744529},"reserves":{"0":95.4435453577,"1":89.9006078899,"2":81.4604129254,"3":83.3154799687,"4":87.0640604588,"5":98.8860081231,"6":94.0176341481,"7":95.2895946425,"8":99.8546831048,"9":114.5548216949,"10":107.3687496256,"11":117.1683111277,"12":113.8822155328,"13":125.7046004413,"14":120.5046345913,"15":128.1970971627,"16":139.14667838,"17":134.6158603084,"18":137.1415454343,"19":123.5770466707,"20":112.8818414355,"21":98.0752980275,"22":128.7051879545,"23":132.4777444716,"24":141.1587251879,"25":135.1662498255,"26":128.7656015175,"27":141.5747854692,"28":131.9428687407,"29":125.70341988,"30":125.9485859989,"31":118.0445779153,"32":143.8560496524,"33":112.5428778982,"34":116.1877045555,"35":110.9237319495,"36":128.5979213325,"37":119.0102060878,"38":132.316271364,"39":121.221555165,"40":135.1600366929,"41":121.4295034781,"42":133.8912752669,"43":143.3121682223,"44":116.2582581334,"45":121.5547651457,"46":126.223776997,"47":117.0358235758,"48":115.073022805,"49":115.1360118074},"systemic_leverage":{"0":0.0,"1":0.0,"2":0.0,"3":0.005018388,"4":0.0,"5":0.0,"6":0.0078778376,"7":0.0030957074,"8":0.0,"9":0.0118545129,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0,"15":0.0,"16":0.0,"17":0.0,"18":0.0,"19":0.0011827639,"20":0.0,"21":0.1251082042,"22":0.0476290126,"23":0.0344826653,"24":0.0012305641,"25":0.0,"26":0.0,"27":0.0156176636,"28":0.0,"29":0.0792887778,"30":0.0011971973,"31":0.0,"32":0.0,"33":0.034225086,"34":0.028190007,"35":0.0131697146,"36":0.0,"37":0.044501194,"38":0.0377310629,"39":0.1895259246,"40":0.1007561327,"41":0.0,"42":0.0614736383,"43":0.0,"44":0.0,"45":0.0637098068,"46":0.0,"47":0.005211539,"48":0.0,"49":0.0078812617},"grade_avg":{"0":25.0,"1":25.0,"2":25.0,"3":25.0,"4":50.0,"5":50.0,"6":50.0,"7":25.0,"8":50.0,"9":50.0,"10":50.0,"11":16.6666666667,"12":50.0,"13":50.0,"14":50.0,"15":50.0,"16":25.0,"17":50.0,"18":25.0,"19":25.0,"20":50.0,"21":25.0,"22":50.0,"23":50.0,"24":50.0,"25":50.0,"26":25.0,"27":25.0,"28":50.0,"29":50.0,"30":50.0,"31":25.0,"32":25.0,"33":50.0,"34":25.0,"35":50.0,"36":25.0,"37":50.0,"38":25.0,"39":50.0,"40":50.0,"41":50.0,"42":50.0,"43":50.0,"44":50.0,"45":50.0,"46":50.0,"47":50.0,"48":25.0,"49":50.0},"communities":{"0":2,"1":2,"2":2,"3":2,"4":1,"5":1,"6":1,"7":2,"8":1,"9":1,"10":1,"11":3,"12":1,"13":1,"14":1,"15":1,"16":2,"17":1,"18":2,"19":2,"20":1,"21":2,"22":1,"23":1,"24":1,"25":1,"26":2,"27":2,"28":1,"29":1,"30":1,"31":2,"32":2,"33":1,"34":2,"35":1,"36":2,"37":1,"38":2,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":2,"49":1},"communities_not_alone":{"0":2,"1":2,"2":2,"3":2,"4":1,"5":1,"6":1,"7":2,"8":1,"9":1,"10":1,"11":3,"12":1,"13":1,"14":1,"15":1,"16":2,"17":1,"18":2,"19":2,"20":1,"21":2,"22":1,"23":1,"24":1,"25":1,"26":2,"27":2,"28":1,"29":1,"30":1,"31":2,"32":2,"33":1,"34":2,"35":1,"36":2,"37":1,"38":2,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":2,"49":1},"gcs":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'
    maxDiff = None

    def setUp(self):
        model = interbank.Model()
        model.log.define_log('ERROR')
        model.config.lender_change = self.ALGORITHM()
        model.config.lender_change.set_parameter("m", self.M)
        model.configure_json(self.CONFIG)
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_preferential')
        model.simulate_full()
        self.generated_now_values = model.finish()
        if os.path.exists('tests\\test_whole_execution_preferential_barabasi_pref.json'):
            os.remove('tests\\test_whole_execution_preferential_barabasi_pref.json')
        if os.path.exists('tests\\test_whole_execution_preferential_barabasi_pref.png'):
            os.remove('tests\\test_whole_execution_preferential_barabasi_pref.png')


    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
