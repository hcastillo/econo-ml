# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange


class WholeExecution(unittest.TestCase):
    N = 50
    T = 50
    T_LONG = 1000

    maxDiff = None

    ALGORITHM = interbank_lenderchange.Boltzmann
    P = 0.5

    SEED = 39393

    CONFIG = 'C_i0=30 D_i0=135 E_i0=15 L_i0=120 N=50 T=50 alfa=0.1 allow_replacement_of_bankrupted=True beta=5 chi=0.0015 mu=0.7 normalize_interest_rate_max=1 omega=0.55 phi=0.25 psi=0.0 r_i0=0.02 reintroduce_with_median=False reserves=0.02 rho=0.3 xi=0.9'

    RESULTS_TO_COMPARE =  '{"bad_debt":{"0":44.3291870067,"1":36.4000391336,"2":33.2094790748,"3":25.2356864611,"4":14.1205949136,"5":18.517479525,"6":29.4492396967,"7":21.1346298523,"8":9.9160327244,"9":39.4119556928,"10":41.8892045051,"11":13.6665505926,"12":7.4634673988,"13":53.2912660434,"14":23.2040466845,"15":11.3208244104,"16":32.9853665415,"17":24.0063097143,"18":0.0,"19":13.0532278458,"20":64.7022867626,"21":8.4145477967,"22":13.6289236608,"23":63.5019468051,"24":29.970681184,"25":61.536722957,"26":33.0073508032,"27":9.0132418518,"28":22.114300186,"29":56.3420521887,"30":8.3337886728,"31":35.7211398211,"32":42.4781592277,"33":22.8091237349,"34":22.1289536916,"35":0.0,"36":57.9376577514,"37":2.6875912056,"38":11.2238739469,"39":22.5745414711,"40":0.0,"41":13.9553559317,"42":29.1256242766,"43":27.3631475462,"44":15.0756668567,"45":0.0,"46":0.0,"47":8.7078040366,"48":2.2961037548,"49":53.7250049939},"prob_change_lender":{"0":0.5077535685,"1":0.4556166804,"2":0.4850708545,"3":0.4920474241,"4":0.3749387406,"5":0.4344439681,"6":0.4165007501,"7":0.4215609869,"8":0.4019620806,"9":0.4058363304,"10":0.4162148063,"11":0.4190878477,"12":0.4443014013,"13":0.3962368223,"14":0.3614072414,"15":0.434047733,"16":0.4440512405,"17":0.4071120682,"18":0.4095890181,"19":0.4580608253,"20":0.4351906665,"21":0.4473801151,"22":0.4371393358,"23":0.4467126542,"24":0.4364101422,"25":0.4226036147,"26":0.4358533208,"27":0.4618831589,"28":0.4493907116,"29":0.4182350386,"30":0.4106188837,"31":0.4321838492,"32":0.4476461046,"33":0.4362891516,"34":0.4623908106,"35":0.4392708182,"36":0.4339714727,"37":0.4275918309,"38":0.3964186187,"39":0.3767578607,"40":0.3733962096,"41":0.4217954045,"42":0.4055832723,"43":0.4208644605,"44":0.452349103,"45":0.4399692595,"46":0.420745887,"47":0.4551993907,"48":0.4419753089,"49":0.4053158445},"P_max":{"0":0.9922520335,"1":0.9664009101,"2":0.991759677,"3":0.9885488888,"4":0.9269684577,"5":0.9750157954,"6":0.9890560243,"7":0.9092760124,"8":0.9913258926,"9":0.9704827857,"10":0.8513281925,"11":0.9812430571,"12":0.989752323,"13":0.992688247,"14":0.9873022132,"15":0.9920717288,"16":0.9563071293,"17":0.9598382553,"18":0.9917043561,"19":0.9933071491,"20":0.7277222521,"21":0.8000711485,"22":0.6648125464,"23":0.7602014041,"24":0.7370258547,"25":0.6422991601,"26":0.7632539831,"27":0.7914393064,"28":0.6736319432,"29":0.6983907415,"30":0.6907990108,"31":0.7133449929,"32":0.7458018795,"33":0.7676646101,"34":0.7482578404,"35":0.8292114409,"36":0.7913864942,"37":0.8082085497,"38":0.7221141734,"39":0.795117015,"40":0.7258337582,"41":0.775556046,"42":0.749921374,"43":0.7063300355,"44":0.7362638261,"45":0.7167263807,"46":0.6368248467,"47":0.7637612075,"48":0.7427591509,"49":0.6721316352},"P_min":{"0":0.0371094281,"1":0.0121597141,"2":0.0121239052,"3":0.0084614159,"4":0.03398946,"5":0.0249842046,"6":0.0082511292,"7":0.0125478328,"8":0.0078894667,"9":0.007738517,"10":0.0127914738,"11":0.0117876851,"12":0.0086899696,"13":0.0124214072,"14":0.0598046458,"15":0.0116176069,"16":0.0096745305,"17":0.0076924315,"18":0.0081816059,"19":0.0074269556,"20":0.0077901924,"21":0.0083601866,"22":0.008276126,"23":0.1734716247,"24":0.1042623858,"25":0.0848710665,"26":0.0610734674,"27":0.0352983423,"28":0.0227112387,"29":0.0185097263,"30":0.01998332,"31":0.0292950096,"32":0.0756108329,"33":0.0674973354,"34":0.1633966725,"35":0.1751298727,"36":0.1181159447,"37":0.1172892008,"38":0.065475296,"39":0.0368013355,"40":0.0218417203,"41":0.0693443776,"42":0.040867474,"43":0.0672124811,"44":0.0971918134,"45":0.1413293765,"46":0.114115456,"47":0.086264878,"48":0.0510797383,"49":0.036614653},"active_borrowers":{"0":6,"1":6,"2":5,"3":3,"4":3,"5":3,"6":4,"7":4,"8":3,"9":3,"10":2,"11":3,"12":2,"13":4,"14":4,"15":4,"16":5,"17":3,"18":2,"19":4,"20":5,"21":3,"22":1,"23":5,"24":4,"25":7,"26":2,"27":2,"28":2,"29":5,"30":4,"31":4,"32":4,"33":3,"34":3,"35":1,"36":5,"37":5,"38":0,"39":3,"40":2,"41":3,"42":4,"43":3,"44":3,"45":0,"46":0,"47":5,"48":3,"49":3},"active_lenders":{"0":5,"1":5,"2":5,"3":3,"4":3,"5":3,"6":4,"7":4,"8":2,"9":2,"10":2,"11":3,"12":2,"13":3,"14":3,"15":3,"16":3,"17":3,"18":2,"19":3,"20":3,"21":3,"22":1,"23":5,"24":4,"25":4,"26":2,"27":2,"28":2,"29":5,"30":4,"31":4,"32":4,"33":3,"34":3,"35":1,"36":4,"37":5,"38":0,"39":2,"40":2,"41":3,"42":4,"43":1,"44":3,"45":0,"46":0,"47":5,"48":3,"49":3},"asset_i":{"0":0.0,"1":176.1345399825,"2":168.597913169,"3":185.9272282416,"4":169.0876103517,"5":210.1150185816,"6":157.7771465004,"7":209.6130061455,"8":266.3946386171,"9":204.4877408907,"10":150.9299933239,"11":160.8385882263,"12":280.5440308837,"13":260.3066890078,"14":223.9506568986,"15":271.5384316346,"16":227.9455549208,"17":236.9044183965,"18":167.5601568896,"19":189.6323394101,"20":257.505970418,"21":210.3868816683,"22":182.5062777772,"23":232.4378285153,"24":163.3912708442,"25":213.7949280089,"26":213.940399054,"27":144.5113082282,"28":199.1294004915,"29":165.0208047132,"30":165.3333016777,"31":188.8918523257,"32":159.8069264734,"33":186.8289289946,"34":217.7779799463,"35":150.0,"36":195.0244823445,"37":175.4101313008,"38":0.0,"39":276.9429751785,"40":217.6519961139,"41":310.9500586925,"42":194.9077474487,"43":156.5646473167,"44":207.7737714283,"45":0.0,"46":0.0,"47":217.2105166616,"48":175.6290356048,"49":179.9697648237},"asset_j":{"0":0.0,"1":154.4802213968,"2":150.8754247494,"3":158.1292827148,"4":162.2548163174,"5":167.3395771546,"6":159.9260311834,"7":159.0950800173,"8":162.9331600479,"9":163.0424319418,"10":160.7734864257,"11":164.655465857,"12":166.841801809,"13":176.6448752374,"14":173.818192542,"15":174.162784248,"16":164.4895733807,"17":161.6582864194,"18":167.6224570542,"19":165.0108013623,"20":167.297987349,"21":170.2798587578,"22":165.1632389883,"23":168.431036186,"24":166.7220929906,"25":160.0934087053,"26":162.6065456625,"27":163.4367903526,"28":158.8181468352,"29":162.2624645785,"30":160.4464146126,"31":171.3772119185,"32":166.0278492741,"33":166.8162899302,"34":166.0249880025,"35":165.4977460376,"36":164.1397891039,"37":162.8583289606,"38":172.2812134584,"39":177.0227855284,"40":174.8826618494,"41":178.3327340579,"42":168.2146365056,"43":166.0200110837,"44":167.813023514,"45":169.5183740446,"46":177.4282591295,"47":170.8035483296,"48":164.8163330763,"49":157.7389227709},"bankruptcies":{"0":18,"1":15,"2":16,"3":19,"4":17,"5":12,"6":12,"7":18,"8":9,"9":14,"10":13,"11":9,"12":6,"13":13,"14":12,"15":7,"16":13,"17":15,"18":8,"19":15,"20":17,"21":9,"22":12,"23":16,"24":10,"25":15,"26":9,"27":13,"28":15,"29":13,"30":9,"31":11,"32":10,"33":9,"34":8,"35":10,"36":15,"37":8,"38":9,"39":6,"40":9,"41":8,"42":8,"43":13,"44":7,"45":11,"46":8,"47":12,"48":11,"49":17},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},"best_lender":{"0":27,"1":18,"2":36,"3":24,"4":2,"5":1,"6":24,"7":24,"8":24,"9":24,"10":20,"11":11,"12":11,"13":11,"14":11,"15":11,"16":3,"17":3,"18":3,"19":3,"20":3,"21":3,"22":3,"23":3,"24":3,"25":32,"26":42,"27":14,"28":4,"29":4,"30":4,"31":4,"32":4,"33":37,"34":4,"35":10,"36":10,"37":4,"38":4,"39":4,"40":4,"41":4,"42":4,"43":4,"44":17,"45":17,"46":17,"47":17,"48":7,"49":5},"best_lender_clients":{"0":5,"1":3,"2":4,"3":5,"4":6,"5":4,"6":6,"7":7,"8":6,"9":8,"10":6,"11":5,"12":5,"13":8,"14":8,"15":6,"16":6,"17":5,"18":6,"19":6,"20":9,"21":6,"22":8,"23":5,"24":4,"25":6,"26":5,"27":4,"28":5,"29":7,"30":5,"31":4,"32":5,"33":6,"34":5,"35":6,"36":5,"37":4,"38":6,"39":7,"40":6,"41":7,"42":5,"43":4,"44":4,"45":5,"46":5,"47":5,"48":4,"49":5},"c":{"0":151.0436387141,"1":147.6382035713,"2":154.5807775154,"3":158.537685672,"4":163.4492478594,"5":156.2472567926,"6":155.507454521,"7":159.1177851913,"8":159.3389898547,"9":157.030233403,"10":160.9041852236,"11":162.6838897134,"12":172.40684285,"13":169.6200486003,"14":169.8190623993,"15":160.5775924081,"16":157.6544571557,"17":163.736167436,"18":161.1123011379,"19":163.2644160412,"20":166.1499647737,"21":161.1549554628,"22":164.5603768027,"23":163.011098744,"24":156.2696012867,"25":158.843775314,"26":159.5152158482,"27":155.1429967448,"28":158.5022710334,"29":156.8321623303,"30":167.2318626985,"31":162.2163745751,"32":162.4630227273,"33":162.0616538131,"34":161.5781943909,"35":160.3339370738,"36":158.8923670429,"37":162.0841369346,"38":172.8091183508,"39":170.5185115111,"40":173.8563796195,"41":164.2189242572,"42":161.976166611,"43":163.8473783686,"44":165.4486899862,"45":173.136460696,"46":166.8628861459,"47":160.332546907,"48":154.1740514175,"49":155.9525336087},"deposits":{"0":5364.7692778385,"1":5450.428053535,"2":5694.0020071694,"3":5123.1821782327,"4":5784.1918469025,"5":5945.0241213533,"6":5952.5453964511,"7":5344.0477892683,"8":6292.6324187443,"9":5768.3432720809,"10":5980.7473241515,"11":6617.5316902303,"12":7354.1287088272,"13":6619.287780646,"14":6692.5599597852,"15":6774.3435848555,"16":6181.6199636528,"17":5768.7794521078,"18":6644.3928925551,"19":5893.3318445676,"20":6040.3756396425,"21":6510.0066083279,"22":6144.5141682159,"23":6046.6581717876,"24":6076.6214713826,"25":6102.6028442378,"26":6332.97679153,"27":5574.5741526719,"28":5488.5420527681,"29":5971.211171719,"30":6786.6047160921,"31":6260.2742983066,"32":6708.2361305876,"33":6689.2026426096,"34":6647.9577019001,"35":6037.376602681,"36":6110.9035910384,"37":7018.8219887391,"38":6992.4586088426,"39":7565.7745071724,"40":6930.3317798828,"41":6869.8717933434,"42":6606.410085958,"43":6291.3741976428,"44":7189.4405269124,"45":6501.2156262162,"46":6573.5574654133,"47":6290.7073856594,"48":5910.0665353216,"49":5365.4390057675},"equity":{"0":500.4353904867,"1":525.232475759,"2":487.672176281,"3":382.8357965601,"4":430.982431942,"5":448.1262284516,"6":475.2270223596,"7":404.3064382621,"8":516.8961735651,"9":447.2474025266,"10":472.4141810535,"11":513.7297989399,"12":562.0935799347,"13":517.7750298726,"14":487.7890853509,"15":543.2642524002,"16":461.6348106205,"17":445.8560825395,"18":524.9228261763,"19":462.4123021524,"20":483.8725425818,"21":563.710561983,"22":539.6925450248,"23":504.3480808316,"24":483.6982953358,"25":501.3913430532,"26":529.9504181311,"27":470.3221434256,"28":470.4151713656,"29":500.3425693907,"30":536.7580628258,"31":486.0785808341,"32":477.8028752512,"33":446.6410875982,"34":512.2354282934,"35":459.3340113334,"36":497.8266813117,"37":534.4903211911,"38":533.4699849953,"39":574.179632714,"40":495.9126103201,"41":531.6875699069,"42":546.9408699663,"43":516.1360994622,"44":576.9189479047,"45":488.9978436408,"46":545.8821357862,"47":493.4609716054,"48":514.0195512429,"49":455.0538388036},"fitness":{"0":0.0,"1":0.3565613608,"2":0.341197233,"3":0.3520428659,"4":0.4231439597,"5":0.3843739416,"6":0.385973657,"7":0.3340511387,"8":0.212225474,"9":0.1541172159,"10":0.1902681397,"11":0.2317619738,"12":0.2006029821,"13":0.23149153,"14":0.2794047335,"15":0.2488953142,"16":0.2076450988,"17":0.2444437809,"18":0.1842890383,"19":0.1306667046,"20":0.0983406744,"21":0.1405158003,"22":0.1176195588,"23":0.1266528193,"24":0.2717189267,"25":0.1842408039,"26":0.2208108311,"27":0.2613256285,"28":0.2935864226,"29":0.1770932864,"30":0.2516808435,"31":0.221733878,"32":0.2489424003,"33":0.3341942769,"34":0.2229230282,"35":0.3030946754,"36":0.2903224728,"37":0.3590446953,"38":0.3938042387,"39":0.2459066669,"40":0.2389131769,"41":0.196367301,"42":0.2499973068,"43":0.2327583463,"44":0.3007109048,"45":0.3059028332,"46":0.2254211202,"47":0.2524126449,"48":0.2647407449,"49":0.3513831612},"incrementD":{"0":-329.4888104143,"1":-423.7311876066,"2":-174.5486968436,"3":-619.7167052397,"4":-370.2269466606,"5":-663.1074705999,"6":-432.1735510778,"7":-597.1914628797,"8":-342.431285572,"9":-618.1716033975,"10":-232.0314214291,"11":-271.7403482582,"12":211.1964346456,"13":-360.1969364355,"14":-359.8603873698,"15":-499.6354982617,"16":-512.5896231954,"17":-119.431885354,"18":-206.7127496563,"19":-500.8172520269,"20":-82.0637059058,"21":-490.6347705771,"22":-360.6647225765,"23":45.5430045706,"24":-660.5714507996,"25":-150.3807463736,"26":-195.5015228809,"27":-611.4256480185,"28":-428.2447785361,"29":-303.5657786324,"30":107.7617743974,"31":-551.9282657577,"32":-125.3374250991,"33":-261.4709705927,"34":-220.2595680981,"35":-508.0361467838,"36":-130.5477770964,"37":171.6106255822,"38":-238.934076383,"39":-170.13889634,"40":-392.5407666874,"41":-279.4130515967,"42":-455.2720959823,"43":-384.5278548832,"44":51.0437460343,"45":-384.7572748545,"46":-668.8259137851,"47":-491.8968522021,"48":-906.2240163201,"49":-508.5466056656},"interest_rate":{"0":0.02,"1":0.02,"2":0.02,"3":0.02,"4":0.02,"5":0.02,"6":0.02,"7":0.02,"8":0.02,"9":0.02,"10":0.02,"11":0.02,"12":0.02,"13":0.02,"14":0.02,"15":0.02,"16":0.02,"17":0.02,"18":0.02,"19":0.02,"20":0.02,"21":0.02,"22":0.02,"23":0.02,"24":0.02,"25":0.02,"26":0.02,"27":0.02,"28":0.02,"29":0.02,"30":0.02,"31":0.02,"32":0.02,"33":0.02,"34":0.02,"35":0.02,"36":0.02,"37":0.02,"38":0.02,"39":0.02,"40":0.02,"41":0.02,"42":0.02,"43":0.02,"44":0.02,"45":0.02,"46":0.02,"47":0.02,"48":0.02,"49":0.02},"leverage":{"0":0.0497237533,"1":0.0448833994,"2":0.0064961886,"3":0.0251860038,"4":0.0,"5":0.0,"6":0.3485473012,"7":0.0251576909,"8":0.0,"9":0.0136831292,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.026779459,"15":0.0335431834,"16":0.0100842664,"17":0.0,"18":0.0116850016,"19":0.0,"20":0.0,"21":0.0057364232,"22":0.020190998,"23":0.0287204283,"24":0.147940332,"25":0.0,"26":0.0280172152,"27":0.0133529509,"28":0.0086283912,"29":0.0142823904,"30":0.0,"31":0.0241278956,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.13950197,"37":0.034612542,"38":0.0,"39":0.0299653313,"40":0.0,"41":0.0234839872,"42":0.0012156998,"43":0.0,"44":0.0392927473,"45":0.0,"46":0.0,"47":0.0237904419,"48":0.0142581806,"49":0.0},"liquidity":{"0":1275.0633156813,"1":1284.501365501,"2":1553.8997720786,"3":1542.9534261914,"4":1863.7873286119,"5":1682.5524677392,"6":1734.0099004535,"7":1659.1538405187,"8":1842.335197279,"9":1684.5880436228,"10":1849.9497859576,"11":2055.1836788619,"12":2559.4710659865,"13":2324.3444741422,"14":2354.9774559437,"15":2122.172273253,"16":1922.378840053,"17":1952.2650031544,"18":2295.3636876047,"19":2077.472536187,"20":2083.239876475,"21":2054.2567922504,"22":1987.8240842486,"23":1927.4843289561,"24":1777.1794224092,"25":1833.5876334859,"26":1924.0789583363,"27":1695.3590460964,"28":1676.9091597673,"29":1818.6631958417,"30":2306.2299825553,"31":2014.1072263013,"32":2243.0694937441,"33":2257.35063686,"34":2042.1257945081,"35":1870.8549003135,"36":1893.4568910979,"37":2444.0381333406,"38":2524.3915765242,"39":2654.5110048328,"40":2549.4732710688,"41":2302.2824672724,"42":2140.2706693735,"43":2049.5874434478,"44":2419.4592344633,"45":2447.6274115763,"46":2216.1002406055,"47":2131.6761141131,"48":1750.6478765711,"49":1651.5847344243},"loans":{"0":44.3291870067,"1":47.5081309617,"2":36.7765276451,"3":25.563728106,"4":17.7049441974,"5":25.4025292012,"6":43.2384196481,"7":25.9146072512,"8":25.7840542349,"9":39.4119556928,"10":41.8892045051,"11":15.5963000938,"12":7.6965755713,"13":56.8823334767,"14":28.0311789337,"15":25.4717491995,"16":39.6409823852,"17":26.8422032141,"18":4.7054637865,"19":24.5009525278,"20":66.7715615846,"21":16.0577834912,"22":13.6289236608,"23":63.5019468051,"24":46.4298739494,"25":84.8946754819,"26":33.0073508032,"27":21.115731957,"28":22.114300186,"29":87.5410805593,"30":13.0805319656,"31":39.5047119511,"32":47.454061262,"33":32.1187278983,"34":32.0031597686,"35":3.3733845528,"36":59.9304277382,"37":42.2271938853,"38":0.0,"39":33.504373488,"40":17.1021912329,"41":49.3922908255,"42":40.3880132986,"43":18.0038228592,"44":26.2741209308,"45":0.0,"46":0.0,"47":22.2988927001,"48":19.7820088043,"49":52.7637642457},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"num_loans":{"0":6,"1":6,"2":5,"3":3,"4":3,"5":3,"6":4,"7":4,"8":3,"9":3,"10":2,"11":3,"12":2,"13":4,"14":4,"15":4,"16":5,"17":3,"18":2,"19":4,"20":5,"21":3,"22":1,"23":5,"24":4,"25":7,"26":2,"27":2,"28":2,"29":5,"30":4,"31":4,"32":4,"33":3,"34":3,"35":1,"36":5,"37":5,"38":0,"39":3,"40":2,"41":3,"42":4,"43":3,"44":3,"45":0,"46":0,"47":5,"48":3,"49":3},"num_of_rationed":{"0":6,"1":3,"2":4,"3":6,"4":6,"5":4,"6":1,"7":8,"8":3,"9":4,"10":6,"11":2,"12":1,"13":3,"14":5,"15":2,"16":2,"17":5,"18":6,"19":5,"20":4,"21":4,"22":5,"23":3,"24":1,"25":1,"26":0,"27":6,"28":6,"29":3,"30":3,"31":0,"32":2,"33":2,"34":0,"35":3,"36":3,"37":3,"38":5,"39":0,"40":3,"41":4,"42":3,"43":3,"44":2,"45":5,"46":3,"47":2,"48":7,"49":4},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"potential_credit_channels":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"potential_lenders":{"0":28,"1":16,"2":27,"3":21,"4":21,"5":21,"6":27,"7":15,"8":20,"9":19,"10":28,"11":25,"12":26,"13":23,"14":21,"15":24,"16":21,"17":23,"18":22,"19":19,"20":24,"21":19,"22":18,"23":25,"24":24,"25":25,"26":30,"27":20,"28":22,"29":23,"30":26,"31":27,"32":25,"33":22,"34":30,"35":22,"36":25,"37":24,"38":23,"39":27,"40":25,"41":24,"42":21,"43":25,"44":25,"45":21,"46":19,"47":21,"48":19,"49":22},"prob_bankruptcy":{"0":0.0927528127,"1":0.0926706016,"2":0.12232673,"3":0.149924085,"4":0.1497918861,"5":0.2024983621,"6":0.1756100495,"7":0.1702311562,"8":0.1602237488,"9":0.1927242621,"10":0.1595407326,"11":0.1841769308,"12":0.1599634596,"13":0.1392867626,"14":0.1788245791,"15":0.1650126002,"16":0.2133101667,"17":0.1455252233,"18":0.141075674,"19":0.124441878,"20":0.1148366099,"21":0.0930682074,"22":0.065235922,"23":0.1120009292,"24":0.2057399455,"25":0.1627270994,"26":0.1646228628,"27":0.1329038088,"28":0.1127797715,"29":0.1433980918,"30":0.1547052168,"31":0.1722524228,"32":0.228051023,"33":0.264795812,"34":0.197365789,"35":0.1879050942,"36":0.1385200667,"37":0.1604941046,"38":0.1421419736,"39":0.1666329648,"40":0.1709261155,"41":0.1730659084,"42":0.1432931587,"43":0.1379490736,"44":0.1435624384,"45":0.1408313559,"46":0.1184265279,"47":0.1483024185,"48":0.125611722,"49":0.1197216754},"profits":{"0":0.0,"1":0.2221618366,"2":0.0713409714,"3":0.0065608329,"4":0.0782478186,"5":0.4565492134,"6":0.275783599,"7":0.095599548,"8":0.3173604302,"9":0.0,"10":0.0,"11":0.03859499,"12":0.0046621634,"13":0.375193144,"14":0.3129311638,"15":0.2830184958,"16":0.5209426241,"17":0.4149483905,"18":0.0941092757,"19":0.2281965859,"20":0.8718583764,"21":0.1528647139,"22":0.0,"23":0.8026302395,"24":0.3291838553,"25":0.4671590505,"26":0.0,"27":0.2420498021,"28":0.0,"29":1.5378473459,"30":0.0949348659,"31":0.2913550837,"32":0.0995180407,"33":0.1861920833,"34":0.1974841215,"35":0.0674676911,"36":0.6299090572,"37":0.7907920536,"38":0.0,"39":0.2185966403,"40":0.3420438247,"41":0.7087386979,"42":0.2252477804,"43":0.0021195141,"44":0.2239690815,"45":0.0,"46":0.0,"47":0.2718217733,"48":0.349718101,"49":0.142285302},"psi":{"0":1.0,"1":0.9072471873,"2":0.9073293984,"3":0.87767327,"4":0.850075915,"5":0.8502081139,"6":0.7975016379,"7":0.8243899505,"8":0.8297688438,"9":0.8397762512,"10":0.8072757379,"11":0.8404592674,"12":0.8158230692,"13":0.8400365404,"14":0.8607132374,"15":0.8211754209,"16":0.8349873998,"17":0.7866898333,"18":0.8544747767,"19":0.858924326,"20":0.875558122,"21":0.8851633901,"22":0.9069317926,"23":0.934764078,"24":0.8879990708,"25":0.7942600545,"26":0.8372729006,"27":0.8353771372,"28":0.8670961912,"29":0.8872202285,"30":0.8566019082,"31":0.8452947832,"32":0.8277475772,"33":0.771948977,"34":0.735204188,"35":0.802634211,"36":0.8120949058,"37":0.8614799333,"38":0.8395058954,"39":0.8578580264,"40":0.8333670352,"41":0.8290738845,"42":0.8269340916,"43":0.8567068413,"44":0.8620509264,"45":0.8564375616,"46":0.8591686441,"47":0.8815734721,"48":0.8516975815,"49":0.874388278},"rationing":{"0":16.7705615707,"1":28.5225212622,"2":52.1706827834,"3":66.9287382779,"4":50.0531753911,"5":42.5477264926,"6":19.2701621482,"7":62.9499079586,"8":45.0303841055,"9":15.2706887115,"10":76.8652825041,"11":24.1385029056,"12":21.63134695,"13":14.3124736312,"14":35.1176353575,"15":14.4470995378,"16":14.2910621905,"17":37.2895507471,"18":73.9334760423,"19":39.7505322173,"20":44.3219307987,"21":41.3945613174,"22":45.9740526651,"23":21.6975380809,"24":0.8845932204,"25":11.0748737664,"26":0.0,"27":38.3810811821,"28":61.5010958206,"29":27.3357854132,"30":13.2797090972,"31":0.0,"32":11.6823439366,"33":18.0934204823,"34":0.0,"35":62.8623559081,"36":32.4224064453,"37":36.0990567278,"38":76.7342342093,"39":0.0,"40":9.1039981924,"41":41.6260558571,"42":20.053019606,"43":44.8903884087,"44":24.8622601883,"45":75.6460900176,"46":48.5738639416,"47":19.4332029275,"48":83.3608902587,"49":56.1565050542},"reserves":{"0":107.2953855568,"1":109.0085610707,"2":113.8800401434,"3":102.4636435647,"4":115.6838369381,"5":118.9004824271,"6":119.050907929,"7":106.8809557854,"8":125.8526483749,"9":115.3668654416,"10":119.614946483,"11":132.3506338046,"12":147.0825741765,"13":132.3857556129,"14":133.8511991957,"15":135.4868716971,"16":123.6323992731,"17":115.3755890422,"18":132.8878578511,"19":117.8666368914,"20":120.8075127928,"21":130.2001321666,"22":122.8902833643,"23":120.9331634358,"24":121.5324294277,"25":122.0520568848,"26":126.6595358306,"27":111.4914830534,"28":109.7708410554,"29":119.4242234344,"30":135.7320943218,"31":125.2054859661,"32":134.1647226118,"33":133.7840528522,"34":132.959154038,"35":120.7475320536,"36":122.2180718208,"37":140.3764397748,"38":139.8491721769,"39":151.3154901434,"40":138.6066355977,"41":137.3974358669,"42":132.1282017192,"43":125.8274839529,"44":143.7888105382,"45":130.0243125243,"46":131.4711493083,"47":125.8141477132,"48":118.2013307064,"49":107.3087801154},"systemic_leverage":{"0":0.0437569029,"1":0.0377020555,"2":0.0053268747,"3":0.0221636833,"4":0.0,"5":0.0,"6":0.3136925711,"7":0.0211324604,"8":0.0,"9":0.0123148163,"10":0.0,"11":0.0,"12":0.0,"13":0.0,"14":0.0235659239,"15":0.0301888651,"16":0.0088741545,"17":0.0,"18":0.0102828014,"19":0.0,"20":0.0,"21":0.0051627808,"22":0.0181718982,"23":0.0246995683,"24":0.1361051055,"25":0.0,"26":0.0268965266,"27":0.0120176558,"28":0.0075929843,"29":0.0122828557,"30":0.0,"31":0.022197664,"32":0.0,"33":0.0,"34":0.0,"35":0.0,"36":0.1199716942,"37":0.0297667861,"38":0.0,"39":0.0281674114,"40":0.0,"41":0.0206659087,"42":0.0010698159,"43":0.0,"44":0.0353634725,"45":0.0,"46":0.0,"47":0.0209355889,"48":0.0125471989,"49":0.0}}'


    def setUp(self):
        model = interbank.Model()
        model.log.define_log('ERROR')
        model.config.lender_change = self.ALGORITHM()
        model.configure_json(self.CONFIG)
        model.configure(N=self.N, T=self.T)
        model.configure(normalize_interest_rate_max=0)
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_boltzmann')
        model.simulate_full()
        self.generated_now_values = model.finish()

    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
