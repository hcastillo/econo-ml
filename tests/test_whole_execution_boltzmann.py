# -*- coding: utf-8 -*-

import unittest
import interbank
import interbank_lenderchange


class WholeExecution(unittest.TestCase):
    N = 50
    T = 50
    T_LONG = 1000

    maxDiff = None

    ALGORITHM = interbank_lenderchange.Boltzmann
    P = 0.5

    SEED = 39393

    RESULTS_TO_COMPARE = '{"bad_debt":{"0":31.1232705338,"1":0.0,"2":3.1540203253,"3":0.0,"4":1.0147166126,"5":15.518203721,"6":14.6097779444,"7":6.2908989533,"8":9.7674767195,"9":1.4521379933,"10":11.9065472798,"11":8.1001465638,"12":0.0,"13":8.9837570862,"14":29.4289267672,"15":3.8337440886,"16":3.5703948373,"17":2.8992983035,"18":11.305024299,"19":0.0,"20":0.0,"21":10.6245356118,"22":0.0,"23":0.0,"24":11.5831655175,"25":16.0834419043,"26":7.9768108963,"27":13.8109546607,"28":4.9387046006,"29":0.0,"30":9.0232911214,"31":2.1149511315,"32":6.8088513837,"33":14.9496534582,"34":9.506869536,"35":6.7652893981,"36":4.8587782731,"37":29.0447744015,"38":0.0,"39":0.0,"40":0.0,"41":9.4855835862,"42":0.0,"43":13.9382206632,"44":15.0454668014,"45":0.3698314523,"46":23.9221839296,"47":0.0,"48":0.0,"49":9.0640884296},"liquidity":{"0":1715.2846610622,"1":1675.9200980461,"2":2057.52263875,"3":2197.7504521822,"4":2536.046260326,"5":2793.1182942372,"6":3420.7494791315,"7":2940.9126851138,"8":2580.4590721108,"9":2400.6563375817,"10":2638.654003104,"11":2347.0393971199,"12":2645.1145433607,"13":2855.0789108156,"14":3118.3676809789,"15":3286.1124653357,"16":3256.1750772831,"17":4030.4289790005,"18":3891.8865822975,"19":2780.9770026204,"20":2984.6407881702,"21":3243.9275065048,"22":3527.2469319433,"23":4307.6015214195,"24":4809.7352078122,"25":4721.9231786203,"26":4793.8749002819,"27":4923.6888313276,"28":3751.7554941393,"29":3574.5280658913,"30":3343.424280677,"31":2968.9503766882,"32":3014.6398963179,"33":3484.2729541513,"34":3464.8368013051,"35":3331.7320317329,"36":3939.5704194767,"37":4082.9906962657,"38":3714.3471861281,"39":4311.7307738408,"40":4692.5552711341,"41":3185.1407249997,"42":3658.8973198775,"43":3970.8921359113,"44":3609.3690690686,"45":3952.2087008552,"46":3886.355088304,"47":4372.1881953055,"48":4394.9561690455,"49":4656.2670861462},"interest_rate":{"0":0.02,"1":0.0103254984,"2":0.0120064719,"3":0.0,"4":0.0073500047,"5":0.2330632921,"6":0.02,"7":0.0195360074,"8":0.1410162739,"9":6.6729903577,"10":0.0122954859,"11":0.2504652556,"12":0.02,"13":0.1038860809,"14":0.2144859291,"15":0.0250562031,"16":0.0617217975,"17":0.169400226,"18":0.3135369966,"19":1.2459151683,"20":0.0,"21":1.0052357125,"22":0.1518435579,"23":0.2463205551,"24":0.1904856688,"25":0.2169871108,"26":0.2850271417,"27":0.1894006833,"28":0.3911067474,"29":0.1977445368,"30":0.6755476792,"31":2.1590691114,"32":0.0343210517,"33":0.0702386197,"34":0.5175038866,"35":0.0085810522,"36":0.0094728171,"37":0.1448828219,"38":0.0865508952,"39":0.0077102582,"40":0.0549902062,"41":2.3080683607,"42":0.1351063215,"43":0.6175368977,"44":1.049375146,"45":0.8414794003,"46":0.2696764773,"47":0.1730327256,"48":0.3161331114,"49":1.1165863897},"asset_i":{"0":0.0,"1":2.3439581429,"2":2.3215430483,"3":2.4451752305,"4":2.384844137,"5":2.596493833,"6":2.7237098837,"7":2.7014293983,"8":2.7690001933,"9":2.6601380419,"10":2.6995401053,"11":2.4489271241,"12":2.4717686232,"13":2.6311139024,"14":2.6560519049,"15":2.7687234201,"16":2.6537985416,"17":2.8864747507,"18":2.9009970242,"19":3.2888916255,"20":2.7360622234,"21":2.7126632994,"22":2.7936986884,"23":3.1531874095,"24":3.1433270558,"25":3.4481858944,"26":2.8034999806,"27":3.0191006172,"28":3.4540646251,"29":2.8552768225,"30":2.9389112968,"31":2.556747463,"32":2.7273046805,"33":3.0558001572,"34":2.5631158524,"35":2.4601801753,"36":2.8466619288,"37":2.9615037757,"38":3.1037671539,"39":2.9238896669,"40":3.2450043386,"41":3.7714862082,"42":2.536113045,"43":2.9251768955,"44":3.1847146491,"45":2.9068674458,"46":3.0486146942,"47":3.0390869064,"48":3.2055790456,"49":3.1294116869},"asset_j":{"0":0.0,"1":3.9168608215,"2":3.9251451062,"3":4.1471661131,"4":4.23179951,"5":4.3376740696,"6":4.4915840788,"7":4.8370079768,"8":4.6489407486,"9":4.465634208,"10":4.3489044144,"11":4.4023083285,"12":4.2308408087,"13":4.3876176886,"14":4.5212583188,"15":4.6856179227,"16":4.8309218138,"17":4.9432274636,"18":5.3242688772,"19":5.2736390354,"20":4.6800393796,"21":4.8506737235,"22":4.9213122436,"23":5.074445295,"24":5.4520242427,"25":5.7239867273,"26":5.6734218795,"27":5.7881128994,"28":5.8170714852,"29":5.2593201956,"30":4.9674005447,"31":4.8304091934,"32":4.6217326375,"33":4.7024133038,"34":4.8719813268,"35":4.9165013363,"36":4.864530433,"37":5.1068839799,"38":5.2756286123,"39":5.0750794954,"40":5.3198202025,"41":5.5720537939,"42":4.8889173066,"43":5.14192777,"44":5.4994475244,"45":5.2376762911,"46":5.408512884,"47":5.4617151455,"48":5.6079634905,"49":5.6164000174},"equity":{"0":696.9613915341,"1":681.5985336975,"2":709.9286612941,"3":681.0972588811,"4":675.8846856068,"5":672.2079912959,"6":638.2098815619,"7":648.8987349073,"8":649.1102312274,"9":675.1716348837,"10":670.1415192812,"11":684.0183251371,"12":682.8134104972,"13":670.0133853478,"14":653.4314828739,"15":646.0059345574,"16":634.3719154421,"17":632.6307560901,"18":622.457183326,"19":655.7050508096,"20":660.8462262074,"21":660.8929085763,"22":663.0018606741,"23":676.5937509904,"24":656.8866821992,"25":640.6346147711,"26":647.5378517043,"27":624.325160851,"28":657.6143838556,"29":649.0224957268,"30":658.5580271275,"31":684.2650490947,"32":664.4014663193,"33":649.1144602686,"34":653.3856409501,"35":655.4759754034,"36":640.0365508104,"37":631.9264589355,"38":634.7506135768,"39":628.3302099788,"40":612.1807647523,"41":622.6196299197,"42":612.7591809702,"43":599.7214239676,"44":593.744419823,"45":603.4189959892,"46":575.1383844649,"47":624.5838680515,"48":608.309441466,"49":627.8000289379},"equity_borrowers":{"0":14.9369656057,"1":44.493779022,"2":0.0,"3":0.0,"4":30.0060147565,"5":14.9356351734,"6":11.5256137246,"7":0.0,"8":0.0,"9":0.0,"10":14.8379970687,"11":0.0,"12":14.9946237644,"13":14.8309775239,"14":43.5030377733,"15":0.0,"16":-1.3865433206,"17":24.7083995161,"18":0.0,"19":14.5967376698,"20":0.0,"21":28.2439981891,"22":14.9120371514,"23":14.5734312084,"24":5.8513985584,"25":13.414806548,"26":0.0,"27":0.1913486443,"28":0.0,"29":14.7712585143,"30":14.6682418791,"31":14.7518384958,"32":0.0,"33":44.8690566406,"34":0.0,"35":0.0,"36":25.1197454889,"37":0.0,"38":0.0,"39":15.3875869358,"40":19.339008063,"41":37.9910693204,"42":4.0582757674,"43":-1.7564566929,"44":0.6474247118,"45":11.7031094701,"46":-1.7643187745,"47":14.7320434847,"48":12.1026773788,"49":15.7815445243},"bankruptcies":{"0":11,"1":6,"2":8,"3":2,"4":7,"5":12,"6":3,"7":12,"8":10,"9":9,"10":7,"11":9,"12":2,"13":8,"14":7,"15":4,"16":8,"17":9,"18":8,"19":8,"20":5,"21":7,"22":5,"23":9,"24":3,"25":7,"26":6,"27":3,"28":13,"29":2,"30":7,"31":6,"32":4,"33":7,"34":5,"35":4,"36":4,"37":6,"38":4,"39":1,"40":1,"41":12,"42":2,"43":6,"44":4,"45":5,"46":4,"47":7,"48":2,"49":9},"potential_credit_channels":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"prob_change_lender":{"0":0.5017057567,"1":0.4734497862,"2":0.5204765646,"3":0.4184919328,"4":0.3940511476,"5":0.3640115839,"6":0.33811046,"7":0.4288034459,"8":0.4559106595,"9":0.5001226905,"10":0.4621220154,"11":0.4743685227,"12":0.4350331948,"13":0.4371407663,"14":0.4453831216,"15":0.4077171609,"16":0.4524353659,"17":0.4626438005,"18":0.4174601268,"19":0.422086799,"20":0.4350290472,"21":0.4349217473,"22":0.3942573712,"23":0.378053361,"24":0.3479365402,"25":0.3625670326,"26":0.3772825209,"27":0.3840054573,"28":0.4206063853,"29":0.4095611065,"30":0.4185865646,"31":0.4146134251,"32":0.3981119124,"33":0.3705550815,"34":0.4000801423,"35":0.3926403762,"36":0.3870462962,"37":0.3730420039,"38":0.4134293092,"39":0.3720007934,"40":0.371437716,"41":0.3612786214,"42":0.354077234,"43":0.3352164487,"44":0.3450608297,"45":0.3449900206,"46":0.3761621222,"47":0.3829152165,"48":0.4011024694,"49":0.3969619594},"best_lender":{"0":27,"1":18,"2":18,"3":18,"4":33,"5":33,"6":33,"7":33,"8":33,"9":39,"10":16,"11":18,"12":23,"13":18,"14":20,"15":0,"16":10,"17":10,"18":13,"19":13,"20":26,"21":11,"22":11,"23":11,"24":11,"25":11,"26":11,"27":11,"28":43,"29":47,"30":47,"31":11,"32":11,"33":11,"34":11,"35":11,"36":5,"37":38,"38":5,"39":22,"40":10,"41":5,"42":10,"43":9,"44":10,"45":7,"46":10,"47":7,"48":7,"49":7},"policy":{"0":1.0,"1":1.0,"2":1.0,"3":1.0,"4":1.0,"5":1.0,"6":1.0,"7":1.0,"8":1.0,"9":1.0,"10":1.0,"11":1.0,"12":1.0,"13":1.0,"14":1.0,"15":1.0,"16":1.0,"17":1.0,"18":1.0,"19":1.0,"20":1.0,"21":1.0,"22":1.0,"23":1.0,"24":1.0,"25":1.0,"26":1.0,"27":1.0,"28":1.0,"29":1.0,"30":1.0,"31":1.0,"32":1.0,"33":1.0,"34":1.0,"35":1.0,"36":1.0,"37":1.0,"38":1.0,"39":1.0,"40":1.0,"41":1.0,"42":1.0,"43":1.0,"44":1.0,"45":1.0,"46":1.0,"47":1.0,"48":1.0,"49":1.0},"fitness":{"0":0.0,"1":0.2968621994,"2":0.1969532361,"3":0.2669888536,"4":0.1365748562,"5":0.1700751314,"6":0.193126255,"7":0.1341463394,"8":0.11487235,"9":0.198573214,"10":0.1150504785,"11":0.1223773298,"12":0.2059480291,"13":0.1674299816,"14":0.1480889844,"15":0.1129424546,"16":0.0855666075,"17":0.0917220678,"18":0.0831152588,"19":0.0608607923,"20":0.2163734324,"21":0.1893309419,"22":0.1740746709,"23":0.1403619972,"24":0.1860711999,"25":0.1851320675,"26":0.1127401048,"27":0.1335086336,"28":0.087439686,"29":0.1935105595,"30":0.148873938,"31":0.1822742073,"32":0.1419861321,"33":0.143898194,"34":0.1398556244,"35":0.1412118065,"36":0.1254269369,"37":0.0904102893,"38":0.1099815052,"39":0.1147844343,"40":0.1106285779,"41":0.041894417,"42":0.2455924048,"43":0.2027041682,"44":0.1593436636,"45":0.2163949268,"46":0.1816349519,"47":0.1555340276,"48":0.1616887449,"49":0.1191679471},"best_lender_clients":{"0":4,"1":3,"2":4,"3":6,"4":5,"5":7,"6":6,"7":5,"8":4,"9":4,"10":4,"11":3,"12":4,"13":3,"14":4,"15":5,"16":5,"17":4,"18":6,"19":6,"20":5,"21":6,"22":7,"23":9,"24":9,"25":9,"26":8,"27":7,"28":5,"29":6,"30":5,"31":5,"32":5,"33":9,"34":8,"35":8,"36":6,"37":8,"38":8,"39":6,"40":6,"41":5,"42":5,"43":6,"44":5,"45":6,"46":5,"47":5,"48":5,"49":6},"rationing":{"0":8.7678576826,"1":59.2672429648,"2":51.1345999188,"3":58.8146908339,"4":58.4563243012,"5":16.2580276346,"6":31.7994933841,"7":66.7363691903,"8":14.7183540238,"9":49.8877741845,"10":61.3612531946,"11":55.0526685203,"12":38.0606649721,"13":4.0368368694,"14":36.2620291484,"15":2.2285361542,"16":28.4691388884,"17":60.9641127051,"18":54.5450983372,"19":22.3702692197,"20":87.5923747536,"21":32.7265715524,"22":24.8595851972,"23":14.2281138573,"24":0.0,"25":7.2993476049,"26":43.6744374399,"27":31.3284041269,"28":46.546013808,"29":5.6063177271,"30":12.3009497894,"31":6.4138650832,"32":17.9739697146,"33":39.7202371858,"34":43.7103796111,"35":12.2804504677,"36":35.1023854557,"37":29.5196191273,"38":3.4773083316,"39":12.9886654678,"40":24.5180961815,"41":0.0,"42":14.7396671086,"43":15.4249693715,"44":0.0,"45":0.0,"46":0.0,"47":69.1416359416,"48":31.0740413723,"49":26.2210632066},"leverage":{"0":0.2110013371,"1":3.6888061854,"2":0.0,"3":0.0,"4":0.3264196057,"5":0.3609032037,"6":1.3114186803,"7":0.0,"8":0.0,"9":0.0,"10":0.3839724378,"11":0.4038467879,"12":0.0179272108,"13":1.0557798966,"14":0.4504639303,"15":0.0,"16":-4.9911675007,"17":0.6795083154,"18":0.0367946631,"19":0.1554397253,"20":0.0,"21":0.3404309231,"22":0.030690614,"23":0.0069708416,"24":0.8213335928,"25":0.4843998175,"26":0.0,"27":24.1657493219,"28":0.0,"29":0.0846483878,"30":0.5430525476,"31":0.5559570905,"32":0.0,"33":1.5620833825,"34":0.0,"35":0.0,"36":0.2688755068,"37":0.0,"38":0.0,"39":10.435282761,"40":1.9943233636,"41":0.793360621,"42":1.9720551267,"43":-1.927587722,"44":11.9808093103,"45":0.9027734785,"46":-6.0960166003,"47":0.0557823163,"48":0.7572606939,"49":1.8129045457},"systemic_leverage":{"0":0.0042200267,"1":0.2951044948,"2":0.0,"3":0.0,"4":0.0195851763,"5":0.0072180641,"6":0.0524567472,"7":0.0,"8":0.0,"9":0.0,"10":0.0153588975,"11":0.0080769358,"12":0.0003585442,"13":0.0422311959,"14":0.0270278358,"15":0.0,"16":-0.1996467,"17":0.0271803326,"18":0.0007358933,"19":0.0031087945,"20":0.0,"21":0.0136172369,"22":0.0006138123,"23":0.0001394168,"24":0.0164266719,"25":0.0096879963,"26":0.0,"27":0.4833149864,"28":0.0,"29":0.0016929678,"30":0.010861051,"31":0.0111191418,"32":0.0,"33":0.1562083383,"34":0.0,"35":0.0,"36":0.0107550203,"37":0.0,"38":0.0,"39":0.4174113104,"40":0.0797729345,"41":0.0634688497,"42":0.0394411025,"43":-0.0385517544,"44":0.2396161862,"45":0.0180554696,"46":-0.121920332,"47":0.0011156463,"48":0.0151452139,"49":0.0725161818},"loans":{"0":7.4587751659,"1":10.1067986947,"2":16.2452142822,"3":null,"4":12.3579881351,"5":13.8002411694,"6":13.4552875652,"7":7.388707075,"8":13.8448141898,"9":17.6920415816,"10":14.5730931609,"11":22.8799030897,"12":0.2688117808,"13":9.0130529367,"14":7.8685881793,"15":14.3723434191,"16":18.5194055629,"17":11.2103978332,"18":13.4383002179,"19":10.6129067016,"20":null,"21":9.3467613094,"22":13.8842670272,"23":19.489242478,"24":5.4630385728,"25":9.7358896124,"26":8.6925846023,"27":9.2175190154,"28":12.6220950932,"29":7.9576301604,"30":9.7604906511,"31":8.2963778392,"32":18.1202285715,"33":14.8500949576,"34":12.266289881,"35":6.584010667,"36":4.1180776261,"37":11.0310579517,"38":38.8004759757,"39":11.3864044457,"40":11.8102734427,"41":25.4591944301,"42":8.0031435325,"43":9.1652111821,"44":20.7205558887,"45":13.0122889588,"46":13.3907379366,"47":2.3443919763,"48":9.1648818704,"49":14.767622974},"reserves":{"0":140.9394404042,"1":141.1579232895,"2":148.4263051572,"3":149.1008736738,"4":155.818243469,"5":160.4555911783,"6":173.8418372527,"7":163.0809933595,"8":155.5885702286,"9":151.1352817881,"10":156.5155440997,"11":151.4082817309,"12":156.0300007087,"13":160.9617160548,"14":166.3188003856,"15":168.9545930727,"16":168.9138465444,"17":184.8982691382,"18":182.3894991226,"19":159.6150946897,"20":164.0108832653,"21":169.4793408333,"22":175.3819462672,"23":191.8114189063,"24":202.5130877116,"25":200.8561462318,"26":202.2882692238,"27":205.1409798124,"28":182.5267237279,"29":177.8330800468,"30":172.5587323167,"31":164.9408501431,"32":164.3782631335,"33":174.0299572489,"34":171.85743787,"35":168.8322281675,"36":181.3482800986,"37":185.2247021677,"38":177.2044914197,"39":189.5466743656,"40":195.9180641612,"41":165.9531744442,"42":175.4226263406,"43":180.5051691952,"44":173.0465780324,"45":179.0739764178,"46":178.5122710503,"47":189.3578221995,"48":188.5007310514,"49":196.1580604594},"deposits":{"0":7046.9720202086,"1":7057.8961644731,"2":7421.3152578625,"3":7455.0436836911,"4":7790.9121734498,"5":8022.7795589138,"6":8692.0918626328,"7":8154.0496679765,"8":7779.4285114323,"9":7556.7640894062,"10":7825.7772049851,"11":7570.414086547,"12":7801.5000354347,"13":8048.0858027383,"14":8315.9400192804,"15":8447.7296536357,"16":8445.692327219,"17":9244.9134569088,"18":9119.4749561313,"19":7980.7547344856,"20":8200.544163263,"21":8473.9670416636,"22":8769.0973133608,"23":9590.5709453169,"24":10125.6543855801,"25":10042.8073115918,"26":10114.413461191,"27":10257.0489906191,"28":9126.3361863969,"29":8891.6540023389,"30":8627.9366158349,"31":8247.0425071527,"32":8218.9131566737,"33":8701.4978624428,"34":8592.871893501,"35":8441.6114083759,"36":9067.4140049291,"37":9261.2351083843,"38":8860.2245709834,"39":9477.3337182781,"40":9795.9032080608,"41":8297.6587222086,"42":8771.1313170289,"43":9025.2584597601,"44":8652.3289016196,"45":8953.6988208906,"46":8925.6135525143,"47":9467.8911099739,"48":9425.0365525684,"49":9807.9030229713},"active_lenders":{"0":6,"1":4,"2":3,"3":0,"4":3,"5":6,"6":4,"7":4,"8":4,"9":4,"10":3,"11":3,"12":1,"13":6,"14":5,"15":3,"16":4,"17":5,"18":2,"19":5,"20":0,"21":5,"22":3,"23":4,"24":3,"25":5,"26":2,"27":2,"28":4,"29":2,"30":3,"31":4,"32":2,"33":5,"34":2,"35":2,"36":3,"37":3,"38":1,"39":1,"40":2,"41":7,"42":1,"43":4,"44":4,"45":3,"46":4,"47":2,"48":1,"49":5},"active_borrowers":{"0":7,"1":4,"2":4,"3":0,"4":6,"5":8,"6":4,"7":5,"8":5,"9":4,"10":4,"11":6,"12":1,"13":7,"14":6,"15":3,"16":6,"17":5,"18":4,"19":5,"20":0,"21":6,"22":4,"23":6,"24":3,"25":5,"26":2,"27":2,"28":6,"29":2,"30":4,"31":4,"32":2,"33":8,"34":3,"35":2,"36":3,"37":3,"38":2,"39":2,"40":2,"41":13,"42":1,"43":4,"44":4,"45":4,"46":4,"47":2,"48":1,"49":7},"prob_bankruptcy":{"0":0.0,"1":0.0041847076,"2":0.6353894557,"3":0.0,"4":0.0078285291,"5":0.2521744858,"6":0.0010951671,"7":0.9038480174,"8":0.0946978739,"9":0.2436249797,"10":0.0000446408,"11":0.3553079475,"12":0.0000446408,"13":0.0686366044,"14":0.5089602486,"15":0.0111426083,"16":0.0561235888,"17":0.2277713064,"18":0.5322852408,"19":0.3712102899,"20":0.0,"21":0.3245170806,"22":0.2347723109,"23":0.2467873273,"24":0.2138845941,"25":0.2138845941,"26":0.2853566782,"27":0.2138845941,"28":0.2840195039,"29":0.0519231055,"30":0.2353239951,"31":0.2737682975,"32":0.0162748476,"33":0.0726209758,"34":1.7349541774,"35":0.0162748476,"36":0.0108498984,"37":0.1684863842,"38":0.088960949,"39":0.002569836,"40":0.002569836,"41":0.1572529577,"42":0.1758425737,"43":0.3290361225,"44":0.5139374013,"45":0.4323509729,"46":0.3561175928,"47":0.6992039845,"48":0.3182156391,"49":0.4061583535},"num_banks":{"0":50,"1":50,"2":50,"3":50,"4":50,"5":50,"6":50,"7":50,"8":50,"9":50,"10":50,"11":50,"12":50,"13":50,"14":50,"15":50,"16":50,"17":50,"18":50,"19":50,"20":50,"21":50,"22":50,"23":50,"24":50,"25":50,"26":50,"27":50,"28":50,"29":50,"30":50,"31":50,"32":50,"33":50,"34":50,"35":50,"36":50,"37":50,"38":50,"39":50,"40":50,"41":50,"42":50,"43":50,"44":50,"45":50,"46":50,"47":50,"48":50,"49":50},"bankruptcy_rationed":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0}}'

    def setUp(self):
        model = interbank.Model()
        model.log.define_log('ERROR')
        model.config.lender_change = self.ALGORITHM()
        model.configure(N=self.N, T=self.T)
        model.initialize(seed=self.SEED)
        model.simulate_full()
        self.generated_now_values = model.finish()
        ## self.results.to_dict() and save the json to self.RESULTS_TO_COMPARE
        ## also        json.dumps(separators=(',', ':'), obj=self.results.to_json())

        # we also create a gdt file with a whole execution:
        model.configure(T=self.T_LONG)
        model.statistics.define_output_format('gdt')
        model.initialize(seed=self.SEED, output_directory='tests',
                         export_datafile='test_whole_execution_boltzmann')
        model.simulate_full(interactive=True)
        model.finish()

    def test_values_after_execution(self):
        self.assertEqual(self.generated_now_values.to_json(), self.RESULTS_TO_COMPARE)


if __name__ == '__main__':
    unittest.main()
